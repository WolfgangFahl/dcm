
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>dynamic_competence_map API Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dynamic_competence_map-api-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="dynamic_competence_map API Documentation" class="md-header__button md-logo" aria-label="dynamic_competence_map API Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            dynamic_competence_map API Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="dynamic_competence_map API Documentation" class="md-nav__button md-logo" aria-label="dynamic_competence_map API Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    dynamic_competence_map API Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    API
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dcm" class="md-nav__link">
    <span class="md-ellipsis">
      dcm
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.dcm_assessment" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_assessment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_assessment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment" class="md-nav__link">
    <span class="md-ellipsis">
      Assessment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Assessment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.clear" class="md-nav__link">
    <span class="md-ellipsis">
      clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.get_index_str" class="md-nav__link">
    <span class="md-ellipsis">
      get_index_str
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.setup_achievements" class="md-nav__link">
    <span class="md-ellipsis">
      setup_achievements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.setup_ui" class="md-nav__link">
    <span class="md-ellipsis">
      setup_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.show_progress" class="md-nav__link">
    <span class="md-ellipsis">
      show_progress
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.step" class="md-nav__link">
    <span class="md-ellipsis">
      step
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.step_area" class="md-nav__link">
    <span class="md-ellipsis">
      step_area
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.store" class="md-nav__link">
    <span class="md-ellipsis">
      store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.update_achievement_view" class="md-nav__link">
    <span class="md-ellipsis">
      update_achievement_view
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.update_current_achievement_view" class="md-nav__link">
    <span class="md-ellipsis">
      update_current_achievement_view
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.ButtonRow" class="md-nav__link">
    <span class="md-ellipsis">
      ButtonRow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ButtonRow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.ButtonRow.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.ButtonRow.handle_selection" class="md-nav__link">
    <span class="md-ellipsis">
      handle_selection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.ButtonRow.set_button_states" class="md-nav__link">
    <span class="md-ellipsis">
      set_button_states
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.ButtonRow.setup_buttons" class="md-nav__link">
    <span class="md-ellipsis">
      setup_buttons
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.dcm_chart" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_chart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_chart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart" class="md-nav__link">
    <span class="md-ellipsis">
      DcmChart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DcmChart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.add_donut_segment" class="md-nav__link">
    <span class="md-ellipsis">
      add_donut_segment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.calculate_parent_segments" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_parent_segments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.calculate_segments" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_segments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.calculate_sub_segments" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_sub_segments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.create_donut_segment" class="md-nav__link">
    <span class="md-ellipsis">
      create_donut_segment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.generate_donut_segment_for_achievement" class="md-nav__link">
    <span class="md-ellipsis">
      generate_donut_segment_for_achievement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.generate_donut_segment_for_element" class="md-nav__link">
    <span class="md-ellipsis">
      generate_donut_segment_for_element
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.generate_pie_elements_for_segments" class="md-nav__link">
    <span class="md-ellipsis">
      generate_pie_elements_for_segments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.generate_svg" class="md-nav__link">
    <span class="md-ellipsis">
      generate_svg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.generate_svg_markup" class="md-nav__link">
    <span class="md-ellipsis">
      generate_svg_markup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.get_element_config" class="md-nav__link">
    <span class="md-ellipsis">
      get_element_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.get_stacked_segment" class="md-nav__link">
    <span class="md-ellipsis">
      get_stacked_segment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.prepare_and_add_inner_circle" class="md-nav__link">
    <span class="md-ellipsis">
      prepare_and_add_inner_circle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.save_svg_to_file" class="md-nav__link">
    <span class="md-ellipsis">
      save_svg_to_file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.dcm_cmd" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_cmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_cmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_cmd.CompetenceCmd" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceCmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CompetenceCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_cmd.CompetenceCmd.getArgParser" class="md-nav__link">
    <span class="md-ellipsis">
      getArgParser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_cmd.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.dcm_core" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_core
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.Achievement" class="md-nav__link">
    <span class="md-ellipsis">
      Achievement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceArea" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceArea
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceAspect" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceAspect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceElement" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceElement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CompetenceElement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceElement.as_html" class="md-nav__link">
    <span class="md-ellipsis">
      as_html
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceElement.to_svg_node_config" class="md-nav__link">
    <span class="md-ellipsis">
      to_svg_node_config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceFacet" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceFacet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceLevel" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceLevel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceTree
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CompetenceTree">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.total_valid_levels" class="md-nav__link">
    <span class="md-ellipsis">
      total_valid_levels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.add_legend" class="md-nav__link">
    <span class="md-ellipsis">
      add_legend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.calculate_ring_specs" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_ring_specs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.get_elements_for_level" class="md-nav__link">
    <span class="md-ellipsis">
      get_elements_for_level
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.get_level_color" class="md-nav__link">
    <span class="md-ellipsis">
      get_level_color
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.get_symmetry_spec" class="md-nav__link">
    <span class="md-ellipsis">
      get_symmetry_spec
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.lookup_by_path" class="md-nav__link">
    <span class="md-ellipsis">
      lookup_by_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.set_symmetry_mode" class="md-nav__link">
    <span class="md-ellipsis">
      set_symmetry_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.to_pretty_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_pretty_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.update_paths" class="md-nav__link">
    <span class="md-ellipsis">
      update_paths
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.DynamicCompetenceMap" class="md-nav__link">
    <span class="md-ellipsis">
      DynamicCompetenceMap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DynamicCompetenceMap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.DynamicCompetenceMap.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.DynamicCompetenceMap.from_definition_string" class="md-nav__link">
    <span class="md-ellipsis">
      from_definition_string
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.DynamicCompetenceMap.get_example_dcm_definitions" class="md-nav__link">
    <span class="md-ellipsis">
      get_example_dcm_definitions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.DynamicCompetenceMap.parse_markup" class="md-nav__link">
    <span class="md-ellipsis">
      parse_markup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.Learner" class="md-nav__link">
    <span class="md-ellipsis">
      Learner
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Learner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.Learner.most_recent_achievement_iso_date" class="md-nav__link">
    <span class="md-ellipsis">
      most_recent_achievement_iso_date
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.Learner.add_achievement" class="md-nav__link">
    <span class="md-ellipsis">
      add_achievement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.Learner.get_competence_tree_ids" class="md-nav__link">
    <span class="md-ellipsis">
      get_competence_tree_ids
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.RingSpec" class="md-nav__link">
    <span class="md-ellipsis">
      RingSpec
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.dcm_web" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_web
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_web">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView" class="md-nav__link">
    <span class="md-ellipsis">
      RingSpecView
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RingSpecView">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.on_inner_ratio_change" class="md-nav__link">
    <span class="md-ellipsis">
      on_inner_ratio_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.on_level_visible_change" class="md-nav__link">
    <span class="md-ellipsis">
      on_level_visible_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.on_outer_ratio_change" class="md-nav__link">
    <span class="md-ellipsis">
      on_outer_ratio_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.on_text_mode_change" class="md-nav__link">
    <span class="md-ellipsis">
      on_text_mode_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.setup_ui" class="md-nav__link">
    <span class="md-ellipsis">
      setup_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecsView" class="md-nav__link">
    <span class="md-ellipsis">
      RingSpecsView
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RingSpecsView">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecsView.on_change" class="md-nav__link">
    <span class="md-ellipsis">
      on_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecsView.on_symmetry_change" class="md-nav__link">
    <span class="md-ellipsis">
      on_symmetry_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecsView.setup_ui" class="md-nav__link">
    <span class="md-ellipsis">
      setup_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecsView.update_rings" class="md-nav__link">
    <span class="md-ellipsis">
      update_rings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.dcm_webserver" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_webserver
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_webserver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution" class="md-nav__link">
    <span class="md-ellipsis">
      DcmSolution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DcmSolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.assess" class="md-nav__link">
    <span class="md-ellipsis">
      assess
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.assess_learner" class="md-nav__link">
    <span class="md-ellipsis">
      assess_learner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.assess_learner_by_slug" class="md-nav__link">
    <span class="md-ellipsis">
      assess_learner_by_slug
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.assess_state" class="md-nav__link">
    <span class="md-ellipsis">
      assess_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.download" class="md-nav__link">
    <span class="md-ellipsis">
      download
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.get_learner_file_path" class="md-nav__link">
    <span class="md-ellipsis">
      get_learner_file_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.home" class="md-nav__link">
    <span class="md-ellipsis">
      home
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.load_learner" class="md-nav__link">
    <span class="md-ellipsis">
      load_learner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.new_assess" class="md-nav__link">
    <span class="md-ellipsis">
      new_assess
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.on_update_ringspecs" class="md-nav__link">
    <span class="md-ellipsis">
      on_update_ringspecs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.prepare_svg" class="md-nav__link">
    <span class="md-ellipsis">
      prepare_svg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.prepare_ui" class="md-nav__link">
    <span class="md-ellipsis">
      prepare_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.render" class="md-nav__link">
    <span class="md-ellipsis">
      render
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.render_dcm" class="md-nav__link">
    <span class="md-ellipsis">
      render_dcm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.save_session_state" class="md-nav__link">
    <span class="md-ellipsis">
      save_session_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.show_ui" class="md-nav__link">
    <span class="md-ellipsis">
      show_ui
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DynamicCompentenceMapWebServer" class="md-nav__link">
    <span class="md-ellipsis">
      DynamicCompentenceMapWebServer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DynamicCompentenceMapWebServer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DynamicCompentenceMapWebServer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DynamicCompentenceMapWebServer.configure_run" class="md-nav__link">
    <span class="md-ellipsis">
      configure_run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DynamicCompentenceMapWebServer.get_config" class="md-nav__link">
    <span class="md-ellipsis">
      get_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DynamicCompentenceMapWebServer.render_svg" class="md-nav__link">
    <span class="md-ellipsis">
      render_svg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DynamicCompentenceMapWebServer.show_description" class="md-nav__link">
    <span class="md-ellipsis">
      show_description
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.SVGRenderRequest" class="md-nav__link">
    <span class="md-ellipsis">
      SVGRenderRequest
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.linkml" class="md-nav__link">
    <span class="md-ellipsis">
      linkml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="linkml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.linkml.dcm_model" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.linkml.dcm_model.Achievement" class="md-nav__link">
    <span class="md-ellipsis">
      Achievement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.linkml.dcm_model.Learner" class="md-nav__link">
    <span class="md-ellipsis">
      Learner
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.radar_chart" class="md-nav__link">
    <span class="md-ellipsis">
      radar_chart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="radar_chart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.radar_chart.RadarChart" class="md-nav__link">
    <span class="md-ellipsis">
      RadarChart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RadarChart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.radar_chart.RadarChart.add_scale_circles" class="md-nav__link">
    <span class="md-ellipsis">
      add_scale_circles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.radar_chart.RadarChart.add_scores" class="md-nav__link">
    <span class="md-ellipsis">
      add_scores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.radar_chart.RadarChart.calculate_radar_chart_points" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_radar_chart_points
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.svg" class="md-nav__link">
    <span class="md-ellipsis">
      svg
    </span>
  </a>
  
    <nav class="md-nav" aria-label="svg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.svg.DonutSegment" class="md-nav__link">
    <span class="md-ellipsis">
      DonutSegment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DonutSegment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.svg.DonutSegment.large_arc_flag" class="md-nav__link">
    <span class="md-ellipsis">
      large_arc_flag
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.DonutSegment.get_arc" class="md-nav__link">
    <span class="md-ellipsis">
      get_arc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.DonutSegment.radial_radius" class="md-nav__link">
    <span class="md-ellipsis">
      radial_radius
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.DonutSegment.relative_angle" class="md-nav__link">
    <span class="md-ellipsis">
      relative_angle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.Polygon" class="md-nav__link">
    <span class="md-ellipsis">
      Polygon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG" class="md-nav__link">
    <span class="md-ellipsis">
      SVG
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SVG">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_circle" class="md-nav__link">
    <span class="md-ellipsis">
      add_circle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_donut_segment" class="md-nav__link">
    <span class="md-ellipsis">
      add_donut_segment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_element" class="md-nav__link">
    <span class="md-ellipsis">
      add_element
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_group" class="md-nav__link">
    <span class="md-ellipsis">
      add_group
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_legend_column" class="md-nav__link">
    <span class="md-ellipsis">
      add_legend_column
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_polygon" class="md-nav__link">
    <span class="md-ellipsis">
      add_polygon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_rectangle" class="md-nav__link">
    <span class="md-ellipsis">
      add_rectangle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_text" class="md-nav__link">
    <span class="md-ellipsis">
      add_text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_text_to_donut_segment" class="md-nav__link">
    <span class="md-ellipsis">
      add_text_to_donut_segment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_donut_path" class="md-nav__link">
    <span class="md-ellipsis">
      get_donut_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_indent" class="md-nav__link">
    <span class="md-ellipsis">
      get_indent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_java_script" class="md-nav__link">
    <span class="md-ellipsis">
      get_java_script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_svg_markup" class="md-nav__link">
    <span class="md-ellipsis">
      get_svg_markup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_svg_style" class="md-nav__link">
    <span class="md-ellipsis">
      get_svg_style
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_text_rotation" class="md-nav__link">
    <span class="md-ellipsis">
      get_text_rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_text_width" class="md-nav__link">
    <span class="md-ellipsis">
      get_text_width
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.save" class="md-nav__link">
    <span class="md-ellipsis">
      save
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVGConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SVGConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SVGConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVGConfig.total_height" class="md-nav__link">
    <span class="md-ellipsis">
      total_height
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVGNode" class="md-nav__link">
    <span class="md-ellipsis">
      SVGNode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVGNodeConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SVGNodeConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.Text" class="md-nav__link">
    <span class="md-ellipsis">
      Text
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Text">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.svg.Text.total_text_height" class="md-nav__link">
    <span class="md-ellipsis">
      total_text_height
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.Text.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.version" class="md-nav__link">
    <span class="md-ellipsis">
      version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.version.Version" class="md-nav__link">
    <span class="md-ellipsis">
      Version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.xapi" class="md-nav__link">
    <span class="md-ellipsis">
      xapi
    </span>
  </a>
  
    <nav class="md-nav" aria-label="xapi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.xapi.XAPI" class="md-nav__link">
    <span class="md-ellipsis">
      XAPI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="XAPI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.xapi.XAPI.to_learner" class="md-nav__link">
    <span class="md-ellipsis">
      to_learner
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dcm" class="md-nav__link">
    <span class="md-ellipsis">
      dcm
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.dcm_assessment" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_assessment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_assessment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment" class="md-nav__link">
    <span class="md-ellipsis">
      Assessment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Assessment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.clear" class="md-nav__link">
    <span class="md-ellipsis">
      clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.get_index_str" class="md-nav__link">
    <span class="md-ellipsis">
      get_index_str
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.setup_achievements" class="md-nav__link">
    <span class="md-ellipsis">
      setup_achievements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.setup_ui" class="md-nav__link">
    <span class="md-ellipsis">
      setup_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.show_progress" class="md-nav__link">
    <span class="md-ellipsis">
      show_progress
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.step" class="md-nav__link">
    <span class="md-ellipsis">
      step
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.step_area" class="md-nav__link">
    <span class="md-ellipsis">
      step_area
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.store" class="md-nav__link">
    <span class="md-ellipsis">
      store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.update_achievement_view" class="md-nav__link">
    <span class="md-ellipsis">
      update_achievement_view
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.Assessment.update_current_achievement_view" class="md-nav__link">
    <span class="md-ellipsis">
      update_current_achievement_view
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.ButtonRow" class="md-nav__link">
    <span class="md-ellipsis">
      ButtonRow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ButtonRow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.ButtonRow.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.ButtonRow.handle_selection" class="md-nav__link">
    <span class="md-ellipsis">
      handle_selection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.ButtonRow.set_button_states" class="md-nav__link">
    <span class="md-ellipsis">
      set_button_states
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_assessment.ButtonRow.setup_buttons" class="md-nav__link">
    <span class="md-ellipsis">
      setup_buttons
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.dcm_chart" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_chart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_chart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart" class="md-nav__link">
    <span class="md-ellipsis">
      DcmChart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DcmChart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.add_donut_segment" class="md-nav__link">
    <span class="md-ellipsis">
      add_donut_segment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.calculate_parent_segments" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_parent_segments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.calculate_segments" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_segments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.calculate_sub_segments" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_sub_segments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.create_donut_segment" class="md-nav__link">
    <span class="md-ellipsis">
      create_donut_segment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.generate_donut_segment_for_achievement" class="md-nav__link">
    <span class="md-ellipsis">
      generate_donut_segment_for_achievement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.generate_donut_segment_for_element" class="md-nav__link">
    <span class="md-ellipsis">
      generate_donut_segment_for_element
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.generate_pie_elements_for_segments" class="md-nav__link">
    <span class="md-ellipsis">
      generate_pie_elements_for_segments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.generate_svg" class="md-nav__link">
    <span class="md-ellipsis">
      generate_svg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.generate_svg_markup" class="md-nav__link">
    <span class="md-ellipsis">
      generate_svg_markup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.get_element_config" class="md-nav__link">
    <span class="md-ellipsis">
      get_element_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.get_stacked_segment" class="md-nav__link">
    <span class="md-ellipsis">
      get_stacked_segment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.prepare_and_add_inner_circle" class="md-nav__link">
    <span class="md-ellipsis">
      prepare_and_add_inner_circle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_chart.DcmChart.save_svg_to_file" class="md-nav__link">
    <span class="md-ellipsis">
      save_svg_to_file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.dcm_cmd" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_cmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_cmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_cmd.CompetenceCmd" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceCmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CompetenceCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_cmd.CompetenceCmd.getArgParser" class="md-nav__link">
    <span class="md-ellipsis">
      getArgParser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_cmd.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.dcm_core" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_core
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.Achievement" class="md-nav__link">
    <span class="md-ellipsis">
      Achievement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceArea" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceArea
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceAspect" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceAspect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceElement" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceElement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CompetenceElement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceElement.as_html" class="md-nav__link">
    <span class="md-ellipsis">
      as_html
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceElement.to_svg_node_config" class="md-nav__link">
    <span class="md-ellipsis">
      to_svg_node_config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceFacet" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceFacet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceLevel" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceLevel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree" class="md-nav__link">
    <span class="md-ellipsis">
      CompetenceTree
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CompetenceTree">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.total_valid_levels" class="md-nav__link">
    <span class="md-ellipsis">
      total_valid_levels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.add_legend" class="md-nav__link">
    <span class="md-ellipsis">
      add_legend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.calculate_ring_specs" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_ring_specs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.get_elements_for_level" class="md-nav__link">
    <span class="md-ellipsis">
      get_elements_for_level
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.get_level_color" class="md-nav__link">
    <span class="md-ellipsis">
      get_level_color
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.get_symmetry_spec" class="md-nav__link">
    <span class="md-ellipsis">
      get_symmetry_spec
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.lookup_by_path" class="md-nav__link">
    <span class="md-ellipsis">
      lookup_by_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.set_symmetry_mode" class="md-nav__link">
    <span class="md-ellipsis">
      set_symmetry_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.to_pretty_json" class="md-nav__link">
    <span class="md-ellipsis">
      to_pretty_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.CompetenceTree.update_paths" class="md-nav__link">
    <span class="md-ellipsis">
      update_paths
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.DynamicCompetenceMap" class="md-nav__link">
    <span class="md-ellipsis">
      DynamicCompetenceMap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DynamicCompetenceMap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.DynamicCompetenceMap.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.DynamicCompetenceMap.from_definition_string" class="md-nav__link">
    <span class="md-ellipsis">
      from_definition_string
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.DynamicCompetenceMap.get_example_dcm_definitions" class="md-nav__link">
    <span class="md-ellipsis">
      get_example_dcm_definitions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.DynamicCompetenceMap.parse_markup" class="md-nav__link">
    <span class="md-ellipsis">
      parse_markup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.Learner" class="md-nav__link">
    <span class="md-ellipsis">
      Learner
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Learner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.Learner.most_recent_achievement_iso_date" class="md-nav__link">
    <span class="md-ellipsis">
      most_recent_achievement_iso_date
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.Learner.add_achievement" class="md-nav__link">
    <span class="md-ellipsis">
      add_achievement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.Learner.get_competence_tree_ids" class="md-nav__link">
    <span class="md-ellipsis">
      get_competence_tree_ids
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_core.RingSpec" class="md-nav__link">
    <span class="md-ellipsis">
      RingSpec
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.dcm_web" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_web
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_web">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView" class="md-nav__link">
    <span class="md-ellipsis">
      RingSpecView
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RingSpecView">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.on_inner_ratio_change" class="md-nav__link">
    <span class="md-ellipsis">
      on_inner_ratio_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.on_level_visible_change" class="md-nav__link">
    <span class="md-ellipsis">
      on_level_visible_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.on_outer_ratio_change" class="md-nav__link">
    <span class="md-ellipsis">
      on_outer_ratio_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.on_text_mode_change" class="md-nav__link">
    <span class="md-ellipsis">
      on_text_mode_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.setup_ui" class="md-nav__link">
    <span class="md-ellipsis">
      setup_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecView.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecsView" class="md-nav__link">
    <span class="md-ellipsis">
      RingSpecsView
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RingSpecsView">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecsView.on_change" class="md-nav__link">
    <span class="md-ellipsis">
      on_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecsView.on_symmetry_change" class="md-nav__link">
    <span class="md-ellipsis">
      on_symmetry_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecsView.setup_ui" class="md-nav__link">
    <span class="md-ellipsis">
      setup_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_web.RingSpecsView.update_rings" class="md-nav__link">
    <span class="md-ellipsis">
      update_rings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.dcm_webserver" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_webserver
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_webserver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution" class="md-nav__link">
    <span class="md-ellipsis">
      DcmSolution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DcmSolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.assess" class="md-nav__link">
    <span class="md-ellipsis">
      assess
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.assess_learner" class="md-nav__link">
    <span class="md-ellipsis">
      assess_learner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.assess_learner_by_slug" class="md-nav__link">
    <span class="md-ellipsis">
      assess_learner_by_slug
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.assess_state" class="md-nav__link">
    <span class="md-ellipsis">
      assess_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.download" class="md-nav__link">
    <span class="md-ellipsis">
      download
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.get_learner_file_path" class="md-nav__link">
    <span class="md-ellipsis">
      get_learner_file_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.home" class="md-nav__link">
    <span class="md-ellipsis">
      home
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.load_learner" class="md-nav__link">
    <span class="md-ellipsis">
      load_learner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.new_assess" class="md-nav__link">
    <span class="md-ellipsis">
      new_assess
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.on_update_ringspecs" class="md-nav__link">
    <span class="md-ellipsis">
      on_update_ringspecs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.prepare_svg" class="md-nav__link">
    <span class="md-ellipsis">
      prepare_svg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.prepare_ui" class="md-nav__link">
    <span class="md-ellipsis">
      prepare_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.render" class="md-nav__link">
    <span class="md-ellipsis">
      render
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.render_dcm" class="md-nav__link">
    <span class="md-ellipsis">
      render_dcm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.save_session_state" class="md-nav__link">
    <span class="md-ellipsis">
      save_session_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DcmSolution.show_ui" class="md-nav__link">
    <span class="md-ellipsis">
      show_ui
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DynamicCompentenceMapWebServer" class="md-nav__link">
    <span class="md-ellipsis">
      DynamicCompentenceMapWebServer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DynamicCompentenceMapWebServer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DynamicCompentenceMapWebServer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DynamicCompentenceMapWebServer.configure_run" class="md-nav__link">
    <span class="md-ellipsis">
      configure_run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DynamicCompentenceMapWebServer.get_config" class="md-nav__link">
    <span class="md-ellipsis">
      get_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DynamicCompentenceMapWebServer.render_svg" class="md-nav__link">
    <span class="md-ellipsis">
      render_svg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.DynamicCompentenceMapWebServer.show_description" class="md-nav__link">
    <span class="md-ellipsis">
      show_description
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.dcm_webserver.SVGRenderRequest" class="md-nav__link">
    <span class="md-ellipsis">
      SVGRenderRequest
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.linkml" class="md-nav__link">
    <span class="md-ellipsis">
      linkml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="linkml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.linkml.dcm_model" class="md-nav__link">
    <span class="md-ellipsis">
      dcm_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dcm_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.linkml.dcm_model.Achievement" class="md-nav__link">
    <span class="md-ellipsis">
      Achievement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.linkml.dcm_model.Learner" class="md-nav__link">
    <span class="md-ellipsis">
      Learner
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.radar_chart" class="md-nav__link">
    <span class="md-ellipsis">
      radar_chart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="radar_chart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.radar_chart.RadarChart" class="md-nav__link">
    <span class="md-ellipsis">
      RadarChart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RadarChart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.radar_chart.RadarChart.add_scale_circles" class="md-nav__link">
    <span class="md-ellipsis">
      add_scale_circles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.radar_chart.RadarChart.add_scores" class="md-nav__link">
    <span class="md-ellipsis">
      add_scores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.radar_chart.RadarChart.calculate_radar_chart_points" class="md-nav__link">
    <span class="md-ellipsis">
      calculate_radar_chart_points
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.svg" class="md-nav__link">
    <span class="md-ellipsis">
      svg
    </span>
  </a>
  
    <nav class="md-nav" aria-label="svg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.svg.DonutSegment" class="md-nav__link">
    <span class="md-ellipsis">
      DonutSegment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DonutSegment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.svg.DonutSegment.large_arc_flag" class="md-nav__link">
    <span class="md-ellipsis">
      large_arc_flag
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.DonutSegment.get_arc" class="md-nav__link">
    <span class="md-ellipsis">
      get_arc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.DonutSegment.radial_radius" class="md-nav__link">
    <span class="md-ellipsis">
      radial_radius
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.DonutSegment.relative_angle" class="md-nav__link">
    <span class="md-ellipsis">
      relative_angle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.Polygon" class="md-nav__link">
    <span class="md-ellipsis">
      Polygon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG" class="md-nav__link">
    <span class="md-ellipsis">
      SVG
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SVG">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_circle" class="md-nav__link">
    <span class="md-ellipsis">
      add_circle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_donut_segment" class="md-nav__link">
    <span class="md-ellipsis">
      add_donut_segment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_element" class="md-nav__link">
    <span class="md-ellipsis">
      add_element
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_group" class="md-nav__link">
    <span class="md-ellipsis">
      add_group
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_legend_column" class="md-nav__link">
    <span class="md-ellipsis">
      add_legend_column
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_polygon" class="md-nav__link">
    <span class="md-ellipsis">
      add_polygon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_rectangle" class="md-nav__link">
    <span class="md-ellipsis">
      add_rectangle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_text" class="md-nav__link">
    <span class="md-ellipsis">
      add_text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.add_text_to_donut_segment" class="md-nav__link">
    <span class="md-ellipsis">
      add_text_to_donut_segment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_donut_path" class="md-nav__link">
    <span class="md-ellipsis">
      get_donut_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_indent" class="md-nav__link">
    <span class="md-ellipsis">
      get_indent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_java_script" class="md-nav__link">
    <span class="md-ellipsis">
      get_java_script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_svg_markup" class="md-nav__link">
    <span class="md-ellipsis">
      get_svg_markup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_svg_style" class="md-nav__link">
    <span class="md-ellipsis">
      get_svg_style
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_text_rotation" class="md-nav__link">
    <span class="md-ellipsis">
      get_text_rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.get_text_width" class="md-nav__link">
    <span class="md-ellipsis">
      get_text_width
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVG.save" class="md-nav__link">
    <span class="md-ellipsis">
      save
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVGConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SVGConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SVGConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVGConfig.total_height" class="md-nav__link">
    <span class="md-ellipsis">
      total_height
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVGNode" class="md-nav__link">
    <span class="md-ellipsis">
      SVGNode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.SVGNodeConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SVGNodeConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.Text" class="md-nav__link">
    <span class="md-ellipsis">
      Text
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Text">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.svg.Text.total_text_height" class="md-nav__link">
    <span class="md-ellipsis">
      total_text_height
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dcm.svg.Text.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.version" class="md-nav__link">
    <span class="md-ellipsis">
      version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.version.Version" class="md-nav__link">
    <span class="md-ellipsis">
      Version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcm.xapi" class="md-nav__link">
    <span class="md-ellipsis">
      xapi
    </span>
  </a>
  
    <nav class="md-nav" aria-label="xapi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.xapi.XAPI" class="md-nav__link">
    <span class="md-ellipsis">
      XAPI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="XAPI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dcm.xapi.XAPI.to_learner" class="md-nav__link">
    <span class="md-ellipsis">
      to_learner
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="dynamic_competence_map-api-documentation">dynamic_competence_map API Documentation</h1>


<div class="doc doc-object doc-module">



<a id="dcm"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h2 id="dcm.dcm_assessment" class="doc doc-heading">
            <code>dcm_assessment</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2024-01-10</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_assessment.Assessment" class="doc doc-heading">
            <code>Assessment</code>


</h3>


    <div class="doc doc-contents ">


      <p>Assessment for CompetenceTree</p>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Assessment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assessment for CompetenceTree</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">webserver</span><span class="p">:</span> <span class="n">NiceGuiWebserver</span><span class="p">,</span>
        <span class="n">dcm</span><span class="p">:</span> <span class="n">DynamicCompetenceMap</span><span class="p">,</span>
        <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span><span class="p">,</span>
        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        initialize the assessment</span>

<span class="sd">        Args:</span>
<span class="sd">            webserver(NiceguiWebServer): the webserver context</span>
<span class="sd">            dcm(DynamicCompetenceMap): the competence map</span>
<span class="sd">            learner(Learner): the learner to get the self assessment for</span>
<span class="sd">            debug(bool): if True show debugging information</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span> <span class="o">=</span> <span class="n">webserver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">dcm</span><span class="o">=</span><span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="n">learner</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_ui</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">store</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Store the current state of</span>
<span class="sd">        the learner&#39;s achievements.</span>

<span class="sd">        Returns(str): the path to the file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Serialize the learner object to JSON</span>
            <span class="n">learner_data_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="c1"># Determine the file path for storing the learner&#39;s data</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">storage_path</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

            <span class="c1"># Write the serialized data to the file</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">learner_data_json</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Learner data stored in </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">file_path</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dcm</span><span class="p">:</span> <span class="n">DynamicCompetenceMap</span><span class="p">,</span>
        <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            (re)set the assessment</span>

<span class="sd">        Args:</span>
<span class="sd">            webserver(NiceguiWebServer): the webserver context</span>
<span class="sd">            dcm(DynamicCompetenceMap): the competence map</span>
<span class="sd">            learner(Learner): the learner to get the self assessment for</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span> <span class="o">=</span> <span class="n">dcm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span> <span class="o">=</span> <span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="o">=</span> <span class="n">learner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># do we need setup the achievements?</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setup_achievements</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        clear the ui</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_achievement</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Achievement</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid achievement index </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">achievement</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">achievement</span>

    <span class="k">def</span> <span class="nf">setup_achievements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Setup achievements based on the competence tree.</span>

<span class="sd">        This method iterates over the competence aspects and their facets,</span>
<span class="sd">        constructs a path for each facet, and creates an Achievement instance</span>
<span class="sd">        based on the path. These achievements are then added to the learner&#39;s</span>
<span class="sd">        achievements list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">aspects</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="n">aspect</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_achievement</span><span class="p">(</span><span class="n">area</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">facet</span> <span class="ow">in</span> <span class="n">area</span><span class="o">.</span><span class="n">facets</span><span class="p">:</span>
                    <span class="c1"># Construct the path for the facet</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_achievement</span><span class="p">(</span><span class="n">facet</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_achievement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="c1"># Create a new Achievement instance with the constructed path</span>
        <span class="n">new_achievement</span> <span class="o">=</span> <span class="n">Achievement</span><span class="p">(</span>
            <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">add_achievement</span><span class="p">(</span><span class="n">new_achievement</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_index_str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the current achievement index</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">index_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span><span class="o">+</span><span class="mi">1</span><span class="si">:</span><span class="s2">2</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="si">:</span><span class="s2">2</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">index_str</span>

    <span class="k">def</span> <span class="nf">setup_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        display my competence Tree elements</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="s2">&quot;w-full&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span> <span class="o">=</span> <span class="n">NiceguiProgressbar</span><span class="p">(</span>
                <span class="n">total</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;self assessment&quot;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;facets&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
            <span class="n">facet_element_name</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">element_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;facet&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;facet&quot;</span>
            <span class="p">)</span>
            <span class="n">area_element_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">element_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;area&quot;</span>

            <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">navigation_row</span><span class="p">:</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                    <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;first_page&quot;</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="s2">&quot;to first&quot;</span><span class="p">)</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                    <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fast_rewind&quot;</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_area</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;previous </span><span class="si">{</span><span class="n">area_element_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                    <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;arrow_back&quot;</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;previous </span><span class="si">{</span><span class="n">facet_element_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                    <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;arrow_forward&quot;</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;next </span><span class="si">{</span><span class="n">facet_element_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                    <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fast_forward&quot;</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_area</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;next </span><span class="si">{</span><span class="n">area_element_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                    <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;last_page&quot;</span><span class="p">,</span>
                    <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
                <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="s2">&quot;to last&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_row_row</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">button_row</span> <span class="o">=</span> <span class="n">ButtonRow</span><span class="p">(</span>
                    <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_achievement</span>
                <span class="p">)</span>
            <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">card_row</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">card</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement_view</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">index_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_index_str</span><span class="p">())</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">link_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">html</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">markdown_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">markdown</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">show_progress</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the progress bar based on the</span>
<span class="sd">        number of achievements with a non-None level value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
            <span class="mi">1</span>
            <span class="k">for</span> <span class="n">achievement</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span>
            <span class="k">if</span> <span class="n">achievement</span><span class="o">.</span><span class="n">level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">update_value</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">step_area</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">area_step</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Step towards the area given in area_step.</span>
<span class="sd">        For example, 1 means next area, -1 means previous area.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">area_step</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>  <span class="c1"># No movement required</span>

        <span class="n">direction</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">area_step</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">area_count</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Start with the next/previous achievement based on the direction</span>
        <span class="n">new_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">+</span> <span class="n">direction</span>

        <span class="c1"># Loop through achievements until the desired area count is reached</span>
        <span class="k">while</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">new_index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span><span class="p">):</span>
            <span class="n">achievement</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span><span class="p">[</span><span class="n">new_index</span><span class="p">]</span>
            <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">lookup_by_path</span><span class="p">(</span><span class="n">achievement</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">CompetenceArea</span><span class="p">):</span>
                <span class="n">area_count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">area_count</span> <span class="o">==</span> <span class="nb">abs</span><span class="p">(</span><span class="n">area_step</span><span class="p">):</span>
                    <span class="c1"># Found the required area, update the index</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">new_index</span><span class="p">)</span>
                    <span class="k">return</span>

            <span class="c1"># Move to the next/previous achievement</span>
            <span class="n">new_index</span> <span class="o">+=</span> <span class="n">direction</span>

        <span class="c1"># Notify if no more areas in the direction</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="p">:</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Reached the end of the areas in this direction.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">goto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">=</span> <span class="n">index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        step with the achievement view</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_achievement_view</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_achievement_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        display the active achievement as the step indicates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_progress</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">+</span> <span class="n">step</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;first achievement reached!&quot;</span><span class="p">)</span>
            <span class="n">step</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">+</span> <span class="n">step</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">+=</span> <span class="n">step</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Done!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_current_achievement_view</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_current_achievement_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        show the current achievement</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index_view</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_index_str</span><span class="p">()</span>
        <span class="n">achievement</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_achievement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">render_dcm</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="p">,</span>
            <span class="n">selected_paths</span><span class="o">=</span><span class="p">[</span><span class="n">achievement</span><span class="o">.</span><span class="n">path</span><span class="p">],</span>
            <span class="n">clear_assessment</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_row</span><span class="o">.</span><span class="n">achievement</span> <span class="o">=</span> <span class="n">achievement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_row</span><span class="o">.</span><span class="n">set_button_states</span><span class="p">(</span><span class="n">achievement</span><span class="p">)</span>
        <span class="n">competence_element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">lookup_by_path</span><span class="p">(</span><span class="n">achievement</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">competence_element</span><span class="p">:</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid path: </span><span class="si">{</span><span class="n">achievement</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">markdown_view</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;⚠️ </span><span class="si">{</span><span class="n">achievement</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">competence_element</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">competence_element</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
                    <span class="n">link</span> <span class="o">=</span> <span class="n">Link</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">competence_element</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">competence_element</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">link</span> <span class="o">=</span> <span class="n">competence_element</span><span class="o">.</span><span class="n">path</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">link</span> <span class="o">=</span> <span class="s2">&quot;⚠️ - competence element path missing&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">link_view</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">link</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">competence_element</span><span class="o">.</span><span class="n">description</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">competence_element</span><span class="p">,</span> <span class="n">CompetenceArea</span><span class="p">):</span>
                <span class="n">aspect</span> <span class="o">=</span> <span class="n">competence_element</span><span class="o">.</span><span class="n">aspect</span>
                <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">aspect</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">**</span><span class="si">{</span><span class="n">competence_element</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">**:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">competence_element</span><span class="p">,</span> <span class="n">CompetenceFacet</span><span class="p">):</span>
                <span class="n">area</span> <span class="o">=</span> <span class="n">competence_element</span><span class="o">.</span><span class="n">area</span>
                <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">area</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">**</span><span class="si">{</span><span class="n">competence_element</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">**:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">markdown_view</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">description</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.Assessment.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">webserver</span><span class="p">,</span> <span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>initialize the assessment</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>webserver(NiceguiWebServer)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the webserver context</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dcm(DynamicCompetenceMap)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the competence map</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>learner(Learner)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the learner to get the self assessment for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>debug(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True show debugging information</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">webserver</span><span class="p">:</span> <span class="n">NiceGuiWebserver</span><span class="p">,</span>
    <span class="n">dcm</span><span class="p">:</span> <span class="n">DynamicCompetenceMap</span><span class="p">,</span>
    <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span><span class="p">,</span>
    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    initialize the assessment</span>

<span class="sd">    Args:</span>
<span class="sd">        webserver(NiceguiWebServer): the webserver context</span>
<span class="sd">        dcm(DynamicCompetenceMap): the competence map</span>
<span class="sd">        learner(Learner): the learner to get the self assessment for</span>
<span class="sd">        debug(bool): if True show debugging information</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span> <span class="o">=</span> <span class="n">webserver</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">dcm</span><span class="o">=</span><span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="n">learner</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_ui</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.Assessment.clear" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">clear</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>clear the ui</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    clear the ui</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.Assessment.get_index_str" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_index_str</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the current achievement index</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_index_str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the current achievement index</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">index_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span><span class="o">+</span><span class="mi">1</span><span class="si">:</span><span class="s2">2</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="si">:</span><span class="s2">2</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">index_str</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.Assessment.reset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">reset</span><span class="p">(</span><span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <pre><code>(re)set the assessment
</code></pre>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>webserver(NiceguiWebServer)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the webserver context</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>dcm(DynamicCompetenceMap)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the competence map</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>learner(Learner)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the learner to get the self assessment for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">reset</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">dcm</span><span class="p">:</span> <span class="n">DynamicCompetenceMap</span><span class="p">,</span>
    <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        (re)set the assessment</span>

<span class="sd">    Args:</span>
<span class="sd">        webserver(NiceguiWebServer): the webserver context</span>
<span class="sd">        dcm(DynamicCompetenceMap): the competence map</span>
<span class="sd">        learner(Learner): the learner to get the self assessment for</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span> <span class="o">=</span> <span class="n">dcm</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span> <span class="o">=</span> <span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="o">=</span> <span class="n">learner</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># do we need setup the achievements?</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_achievements</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.Assessment.setup_achievements" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setup_achievements</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Setup achievements based on the competence tree.</p>
<p>This method iterates over the competence aspects and their facets,
constructs a path for each facet, and creates an Achievement instance
based on the path. These achievements are then added to the learner's
achievements list.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setup_achievements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Setup achievements based on the competence tree.</span>

<span class="sd">    This method iterates over the competence aspects and their facets,</span>
<span class="sd">    constructs a path for each facet, and creates an Achievement instance</span>
<span class="sd">    based on the path. These achievements are then added to the learner&#39;s</span>
<span class="sd">    achievements list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">aspects</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="n">aspect</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_achievement</span><span class="p">(</span><span class="n">area</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">facet</span> <span class="ow">in</span> <span class="n">area</span><span class="o">.</span><span class="n">facets</span><span class="p">:</span>
                <span class="c1"># Construct the path for the facet</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_achievement</span><span class="p">(</span><span class="n">facet</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.Assessment.setup_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setup_ui</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>display my competence Tree elements</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setup_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    display my competence Tree elements</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="s2">&quot;w-full&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span> <span class="o">=</span> <span class="n">NiceguiProgressbar</span><span class="p">(</span>
            <span class="n">total</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;self assessment&quot;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;facets&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="n">facet_element_name</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">element_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;facet&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;facet&quot;</span>
        <span class="p">)</span>
        <span class="n">area_element_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">element_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;area&quot;</span>

        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">navigation_row</span><span class="p">:</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;first_page&quot;</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="s2">&quot;to first&quot;</span><span class="p">)</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fast_rewind&quot;</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_area</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;previous </span><span class="si">{</span><span class="n">area_element_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;arrow_back&quot;</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;previous </span><span class="si">{</span><span class="n">facet_element_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;arrow_forward&quot;</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;next </span><span class="si">{</span><span class="n">facet_element_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;fast_forward&quot;</span><span class="p">,</span> <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_area</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;next </span><span class="si">{</span><span class="n">area_element_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;last_page&quot;</span><span class="p">,</span>
                <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
            <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="s2">&quot;to last&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_row_row</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">button_row</span> <span class="o">=</span> <span class="n">ButtonRow</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_achievement</span>
            <span class="p">)</span>
        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">card_row</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">card</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement_view</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">index_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_index_str</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">link_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">html</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">markdown_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">markdown</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.Assessment.show_progress" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_progress</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Update the progress bar based on the
number of achievements with a non-None level value.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">show_progress</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the progress bar based on the</span>
<span class="sd">    number of achievements with a non-None level value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
        <span class="mi">1</span>
        <span class="k">for</span> <span class="n">achievement</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span>
        <span class="k">if</span> <span class="n">achievement</span><span class="o">.</span><span class="n">level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">progress_bar</span><span class="o">.</span><span class="n">update_value</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.Assessment.step" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">step</span><span class="p">(</span><span class="n">step</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>step with the achievement view</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    step with the achievement view</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_achievement_view</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.Assessment.step_area" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">step_area</span><span class="p">(</span><span class="n">area_step</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Step towards the area given in area_step.
For example, 1 means next area, -1 means previous area.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">step_area</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">area_step</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Step towards the area given in area_step.</span>
<span class="sd">    For example, 1 means next area, -1 means previous area.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">area_step</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span>  <span class="c1"># No movement required</span>

    <span class="n">direction</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">area_step</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">area_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Start with the next/previous achievement based on the direction</span>
    <span class="n">new_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">+</span> <span class="n">direction</span>

    <span class="c1"># Loop through achievements until the desired area count is reached</span>
    <span class="k">while</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">new_index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span><span class="p">):</span>
        <span class="n">achievement</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span><span class="p">[</span><span class="n">new_index</span><span class="p">]</span>
        <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">lookup_by_path</span><span class="p">(</span><span class="n">achievement</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">CompetenceArea</span><span class="p">):</span>
            <span class="n">area_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">area_count</span> <span class="o">==</span> <span class="nb">abs</span><span class="p">(</span><span class="n">area_step</span><span class="p">):</span>
                <span class="c1"># Found the required area, update the index</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">new_index</span><span class="p">)</span>
                <span class="k">return</span>

        <span class="c1"># Move to the next/previous achievement</span>
        <span class="n">new_index</span> <span class="o">+=</span> <span class="n">direction</span>

    <span class="c1"># Notify if no more areas in the direction</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="p">:</span>
        <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Reached the end of the areas in this direction.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.Assessment.store" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">store</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Store the current state of
the learner's achievements.</p>
<p>Returns(str): the path to the file</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">store</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Store the current state of</span>
<span class="sd">    the learner&#39;s achievements.</span>

<span class="sd">    Returns(str): the path to the file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Serialize the learner object to JSON</span>
        <span class="n">learner_data_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Determine the file path for storing the learner&#39;s data</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">storage_path</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

        <span class="c1"># Write the serialized data to the file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">learner_data_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Learner data stored in </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">file_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.Assessment.update_achievement_view" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_achievement_view</span><span class="p">(</span><span class="n">step</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>display the active achievement as the step indicates</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update_achievement_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    display the active achievement as the step indicates</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">show_progress</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">+</span> <span class="n">step</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;first achievement reached!&quot;</span><span class="p">)</span>
        <span class="n">step</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">+</span> <span class="n">step</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">achievements</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievement_index</span> <span class="o">+=</span> <span class="n">step</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;Done!&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_current_achievement_view</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.Assessment.update_current_achievement_view" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_current_achievement_view</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>show the current achievement</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update_current_achievement_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    show the current achievement</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">index_view</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_index_str</span><span class="p">()</span>
    <span class="n">achievement</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_achievement</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">render_dcm</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="p">,</span>
        <span class="n">selected_paths</span><span class="o">=</span><span class="p">[</span><span class="n">achievement</span><span class="o">.</span><span class="n">path</span><span class="p">],</span>
        <span class="n">clear_assessment</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">button_row</span><span class="o">.</span><span class="n">achievement</span> <span class="o">=</span> <span class="n">achievement</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">button_row</span><span class="o">.</span><span class="n">set_button_states</span><span class="p">(</span><span class="n">achievement</span><span class="p">)</span>
    <span class="n">competence_element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">lookup_by_path</span><span class="p">(</span><span class="n">achievement</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">competence_element</span><span class="p">:</span>
        <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid path: </span><span class="si">{</span><span class="n">achievement</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">markdown_view</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;⚠️ </span><span class="si">{</span><span class="n">achievement</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">competence_element</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">competence_element</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
                <span class="n">link</span> <span class="o">=</span> <span class="n">Link</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">competence_element</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">competence_element</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">link</span> <span class="o">=</span> <span class="n">competence_element</span><span class="o">.</span><span class="n">path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="s2">&quot;⚠️ - competence element path missing&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">link_view</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">link</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">competence_element</span><span class="o">.</span><span class="n">description</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">competence_element</span><span class="p">,</span> <span class="n">CompetenceArea</span><span class="p">):</span>
            <span class="n">aspect</span> <span class="o">=</span> <span class="n">competence_element</span><span class="o">.</span><span class="n">aspect</span>
            <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">aspect</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">**</span><span class="si">{</span><span class="n">competence_element</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">**:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">competence_element</span><span class="p">,</span> <span class="n">CompetenceFacet</span><span class="p">):</span>
            <span class="n">area</span> <span class="o">=</span> <span class="n">competence_element</span><span class="o">.</span><span class="n">area</span>
            <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">area</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">**</span><span class="si">{</span><span class="n">competence_element</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">**:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">markdown_view</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">description</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_assessment.ButtonRow" class="doc doc-heading">
            <code>ButtonRow</code>


</h3>


    <div class="doc doc-contents ">


      <p>A button row for selecting competence levels
to document achievements from  a CompetenceTree.</p>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ButtonRow</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A button row for selecting competence levels</span>
<span class="sd">    to document achievements from  a CompetenceTree.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">assessment</span><span class="p">:</span> <span class="s2">&quot;Assessment&quot;</span><span class="p">,</span>
        <span class="n">competence_tree</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">,</span>
        <span class="n">achievement</span><span class="p">:</span> <span class="n">Achievement</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construct a button row for the competence levels of the given CompetenceTree.</span>

<span class="sd">        Args:</span>
<span class="sd">            assessment (Assessment): The Assessment instance.</span>
<span class="sd">            competence_tree (CompetenceTree): The Competence Tree to display buttons for.</span>
<span class="sd">            achievement (Achievement): The current achievement of the learner.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="o">=</span> <span class="n">assessment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span> <span class="o">=</span> <span class="n">competence_tree</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievement</span> <span class="o">=</span> <span class="n">achievement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_buttons</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_button_states</span><span class="p">(</span><span class="n">achievement</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setup_buttons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create buttons for each competence level defined in the CompetenceTree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">row</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">levels</span><span class="p">:</span>
                <span class="c1"># generate a button to represent the level</span>
                <span class="n">button_label</span> <span class="o">=</span> <span class="n">level</span><span class="o">.</span><span class="n">name</span>
                <span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">utf8_icon</span><span class="p">:</span>
                    <span class="n">button_label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">level</span><span class="o">.</span><span class="n">utf8_icon</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">level</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">button</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                    <span class="n">button_label</span><span class="p">,</span>
                    <span class="n">icon</span><span class="o">=</span><span class="n">level</span><span class="o">.</span><span class="n">icon</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">level</span><span class="o">.</span><span class="n">color_code</span><span class="p">,</span>
                    <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="n">level</span><span class="o">.</span><span class="n">level</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_selection</span><span class="p">(</span><span class="n">l</span><span class="p">),</span>
                <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="n">level</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">level</span><span class="o">.</span><span class="n">level</span><span class="p">]</span> <span class="o">=</span> <span class="n">button</span>

    <span class="k">def</span> <span class="nf">set_button_states</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">achievement</span><span class="p">:</span> <span class="n">Achievement</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the state of buttons based on the given achievement.</span>

<span class="sd">        Args:</span>
<span class="sd">            achievement (Achievement): The current achievement of the learner.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If no achievement or level is set, enable all buttons</span>
        <span class="k">if</span> <span class="n">achievement</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">achievement</span><span class="o">.</span><span class="n">level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">button</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
                <span class="n">button</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Enable only the button corresponding to the current level and disable others</span>
            <span class="k">for</span> <span class="n">level</span><span class="p">,</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">level</span> <span class="o">==</span> <span class="n">achievement</span><span class="o">.</span><span class="n">level</span><span class="p">:</span>
                    <span class="n">button</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
                    <span class="n">button</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">button</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
                    <span class="n">button</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">handle_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selected_level</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        handle the selected level</span>

<span class="sd">        Args:</span>
<span class="sd">            selected_level(int): the selected level</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if the same level is selected again,</span>
        <span class="c1"># then reset the selection</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement</span><span class="o">.</span><span class="n">level</span> <span class="o">==</span> <span class="n">selected_level</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">achievement</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">achievement</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="n">selected_level</span>
            <span class="c1"># Get the current time in UTC</span>
            <span class="n">current_time_utc</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

            <span class="c1"># Convert the current time to ISO format</span>
            <span class="n">date_assessed_iso</span> <span class="o">=</span> <span class="n">current_time_utc</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>

            <span class="c1"># Assign it to self.achievement.date_assessed_iso</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">achievement</span><span class="o">.</span><span class="n">date_assessed_iso</span> <span class="o">=</span> <span class="n">date_assessed_iso</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_button_states</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">achievement</span><span class="p">)</span>
        <span class="c1"># refresh the ui</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">row</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="c1"># show achievement_view</span>
        <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement</span><span class="o">.</span><span class="n">level</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.ButtonRow.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">assessment</span><span class="p">,</span> <span class="n">competence_tree</span><span class="p">,</span> <span class="n">achievement</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Construct a button row for the competence levels of the given CompetenceTree.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>assessment</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.dcm_assessment.Assessment" href="#dcm.dcm_assessment.Assessment">Assessment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Assessment instance.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>competence_tree</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceTree" href="#dcm.dcm_core.CompetenceTree">CompetenceTree</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Competence Tree to display buttons for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>achievement</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.Achievement" href="#dcm.dcm_core.Achievement">Achievement</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current achievement of the learner.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">assessment</span><span class="p">:</span> <span class="s2">&quot;Assessment&quot;</span><span class="p">,</span>
    <span class="n">competence_tree</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">,</span>
    <span class="n">achievement</span><span class="p">:</span> <span class="n">Achievement</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct a button row for the competence levels of the given CompetenceTree.</span>

<span class="sd">    Args:</span>
<span class="sd">        assessment (Assessment): The Assessment instance.</span>
<span class="sd">        competence_tree (CompetenceTree): The Competence Tree to display buttons for.</span>
<span class="sd">        achievement (Achievement): The current achievement of the learner.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="o">=</span> <span class="n">assessment</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span> <span class="o">=</span> <span class="n">competence_tree</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">achievement</span> <span class="o">=</span> <span class="n">achievement</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_buttons</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_button_states</span><span class="p">(</span><span class="n">achievement</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.ButtonRow.handle_selection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handle_selection</span><span class="p">(</span><span class="n">selected_level</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>handle the selected level</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>selected_level(int)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the selected level</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">handle_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selected_level</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    handle the selected level</span>

<span class="sd">    Args:</span>
<span class="sd">        selected_level(int): the selected level</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if the same level is selected again,</span>
    <span class="c1"># then reset the selection</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement</span><span class="o">.</span><span class="n">level</span> <span class="o">==</span> <span class="n">selected_level</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievement</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievement</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="n">selected_level</span>
        <span class="c1"># Get the current time in UTC</span>
        <span class="n">current_time_utc</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

        <span class="c1"># Convert the current time to ISO format</span>
        <span class="n">date_assessed_iso</span> <span class="o">=</span> <span class="n">current_time_utc</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>

        <span class="c1"># Assign it to self.achievement.date_assessed_iso</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievement</span><span class="o">.</span><span class="n">date_assessed_iso</span> <span class="o">=</span> <span class="n">date_assessed_iso</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_button_states</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">achievement</span><span class="p">)</span>
    <span class="c1"># refresh the ui</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">row</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="c1"># show achievement_view</span>
    <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement</span><span class="o">.</span><span class="n">level</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.ButtonRow.set_button_states" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_button_states</span><span class="p">(</span><span class="n">achievement</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Set the state of buttons based on the given achievement.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>achievement</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.Achievement" href="#dcm.dcm_core.Achievement">Achievement</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current achievement of the learner.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_button_states</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">achievement</span><span class="p">:</span> <span class="n">Achievement</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the state of buttons based on the given achievement.</span>

<span class="sd">    Args:</span>
<span class="sd">        achievement (Achievement): The current achievement of the learner.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># If no achievement or level is set, enable all buttons</span>
    <span class="k">if</span> <span class="n">achievement</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">achievement</span><span class="o">.</span><span class="n">level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">button</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
            <span class="n">button</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Enable only the button corresponding to the current level and disable others</span>
        <span class="k">for</span> <span class="n">level</span><span class="p">,</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">level</span> <span class="o">==</span> <span class="n">achievement</span><span class="o">.</span><span class="n">level</span><span class="p">:</span>
                <span class="n">button</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
                <span class="n">button</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">button</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
                <span class="n">button</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_assessment.ButtonRow.setup_buttons" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setup_buttons</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Create buttons for each competence level defined in the CompetenceTree.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_assessment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setup_buttons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create buttons for each competence level defined in the CompetenceTree.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">row</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">levels</span><span class="p">:</span>
            <span class="c1"># generate a button to represent the level</span>
            <span class="n">button_label</span> <span class="o">=</span> <span class="n">level</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">utf8_icon</span><span class="p">:</span>
                <span class="n">button_label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">level</span><span class="o">.</span><span class="n">utf8_icon</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">level</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">button</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                <span class="n">button_label</span><span class="p">,</span>
                <span class="n">icon</span><span class="o">=</span><span class="n">level</span><span class="o">.</span><span class="n">icon</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">level</span><span class="o">.</span><span class="n">color_code</span><span class="p">,</span>
                <span class="n">on_click</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_args</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="n">level</span><span class="o">.</span><span class="n">level</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_selection</span><span class="p">(</span><span class="n">l</span><span class="p">),</span>
            <span class="p">)</span><span class="o">.</span><span class="n">tooltip</span><span class="p">(</span><span class="n">level</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">level</span><span class="o">.</span><span class="n">level</span><span class="p">]</span> <span class="o">=</span> <span class="n">button</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="dcm.dcm_chart" class="doc doc-heading">
            <code>dcm_chart</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2024-01-12</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_chart.DcmChart" class="doc doc-heading">
            <code>DcmChart</code>


</h3>


    <div class="doc doc-contents ">


      <p>a Dynamic competence map chart</p>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DcmChart</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a Dynamic competence map chart</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dcm</span><span class="p">:</span> <span class="n">DynamicCompetenceMap</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span> <span class="o">=</span> <span class="n">dcm</span>

    <span class="k">def</span> <span class="nf">prepare_and_add_inner_circle</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">competence_tree</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">,</span> <span class="n">lookup_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prepare the SVG markup generation and add</span>
<span class="sd">        the inner_circle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lookup_url</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">competence_tree</span><span class="o">.</span><span class="n">lookup_url</span> <span class="k">if</span> <span class="n">competence_tree</span><span class="o">.</span><span class="n">lookup_url</span> <span class="k">else</span> <span class="n">lookup_url</span>
        <span class="p">)</span>

        <span class="n">svg</span> <span class="o">=</span> <span class="n">SVG</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg</span> <span class="o">=</span> <span class="n">svg</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">svg</span><span class="o">.</span><span class="n">config</span>
        <span class="c1"># center of circle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">=</span> <span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">total_height</span> <span class="o">-</span> <span class="n">config</span><span class="o">.</span><span class="n">legend_height</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">ringspec</span> <span class="o">=</span> <span class="n">competence_tree</span><span class="o">.</span><span class="n">ring_specs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tree&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_radius</span> <span class="o">=</span> <span class="n">ringspec</span><span class="o">.</span><span class="n">outer_ratio</span> <span class="o">*</span> <span class="n">config</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">circle_config</span> <span class="o">=</span> <span class="n">competence_tree</span><span class="o">.</span><span class="n">to_svg_node_config</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree_radius</span>
        <span class="p">)</span>
        <span class="n">svg</span><span class="o">.</span><span class="n">add_circle</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">circle_config</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ringspec</span><span class="o">.</span><span class="n">text_mode</span> <span class="o">!=</span> <span class="s2">&quot;empty&quot;</span><span class="p">:</span>
            <span class="n">svg</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span>
                <span class="n">competence_tree</span><span class="o">.</span><span class="n">short_name</span><span class="p">,</span>
                <span class="n">text_anchor</span><span class="o">=</span><span class="s2">&quot;middle&quot;</span><span class="p">,</span>
                <span class="n">center_v</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">svg</span>

    <span class="k">def</span> <span class="nf">generate_svg</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">learner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Learner</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SVGConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">text_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;empty&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate the SVG markup and optionally save it to a file. If a filename is given, the method</span>
<span class="sd">        will also save the SVG to that file. The SVG is generated based on internal state not shown here.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str, optional): The path to the file where the SVG should be saved. Defaults to None.</span>
<span class="sd">            learner(Learner): the learner to show the achievements for</span>
<span class="sd">            config (SVGConfig, optional): The configuration for the SVG canvas and legend. Defaults to default values.</span>
<span class="sd">            text_mode(str): text display mode</span>
<span class="sd">        Returns:</span>
<span class="sd">            str: The SVG markup.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">SVGConfig</span><span class="p">(</span>
                <span class="n">with_popup</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>  <span class="c1"># Use default configuration if none provided</span>
        <span class="n">svg_markup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_svg_markup</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span><span class="p">,</span>
            <span class="n">learner</span><span class="o">=</span><span class="n">learner</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">text_mode</span><span class="o">=</span><span class="n">text_mode</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_svg_to_file</span><span class="p">(</span><span class="n">svg_markup</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">svg_markup</span>

    <span class="k">def</span> <span class="nf">get_element_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">:</span> <span class="n">CompetenceElement</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SVGNodeConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get a configuration for the given element</span>

<span class="sd">        Args:</span>
<span class="sd">            element(CompetenceElement): the element</span>

<span class="sd">        Return:</span>
<span class="sd">            SVGNodeConfig: an SVG Node configuration</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">element</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">element_config</span> <span class="o">=</span> <span class="n">SVGNodeConfig</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">element_config</span>
        <span class="n">element_url</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">element</span><span class="o">.</span><span class="n">url</span>
            <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">url</span>
            <span class="k">else</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lookup_url</span><span class="si">}</span><span class="s2">/description/</span><span class="si">{</span><span class="n">element</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="kc">None</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">show_as_popup</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="n">element_config</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">to_svg_node_config</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">element_url</span><span class="p">,</span>
            <span class="n">show_as_popup</span><span class="o">=</span><span class="n">show_as_popup</span><span class="p">,</span>
            <span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">element_config</span>

    <span class="k">def</span> <span class="nf">get_stacked_segment</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">total_levels</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
        <span class="n">element_config</span><span class="p">:</span> <span class="n">SVGNodeConfig</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DonutSegment</span><span class="p">,</span> <span class="n">SVGNodeConfig</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the stacked segment for a given level.</span>

<span class="sd">        Args:</span>
<span class="sd">            level (int): The current level for which to calculate the segment.</span>
<span class="sd">            total_levels (int): The total number of levels.</span>
<span class="sd">            segment (DonutSegment): The original donut Segment.</span>
<span class="sd">            element_config (SVGNodeConfig): The element configuration.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple[DonutSegment, SVGNodeConfig]:</span>
<span class="sd">                The calculated stacked segment and its configuration for the given level.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">level_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">get_level_color</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
        <span class="n">stack_element_config</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">element_config</span><span class="p">)</span>
        <span class="n">stack_element_config</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">level_color</span>
        <span class="n">ratio</span> <span class="o">=</span> <span class="n">level</span> <span class="o">/</span> <span class="n">total_levels</span>
        <span class="n">relative_radius</span> <span class="o">=</span> <span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">outer_radius</span> <span class="o">-</span> <span class="n">segment</span><span class="o">.</span><span class="n">inner_radius</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span>
        <span class="n">stacked_segment</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="n">stacked_segment</span><span class="o">.</span><span class="n">outer_radius</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">inner_radius</span> <span class="o">+</span> <span class="n">relative_radius</span>
        <span class="k">return</span> <span class="n">stacked_segment</span><span class="p">,</span> <span class="n">stack_element_config</span>

    <span class="k">def</span> <span class="nf">add_donut_segment</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span><span class="p">,</span>
        <span class="n">element</span><span class="p">:</span> <span class="n">CompetenceElement</span><span class="p">,</span>
        <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
        <span class="n">level_color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">achievement_level</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">ringspec</span><span class="p">:</span> <span class="n">RingSpec</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DonutSegment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a donut segment for the</span>
<span class="sd">        given competence element and add it</span>
<span class="sd">        to the given SVG</span>

<span class="sd">        if level color is available an achievement</span>
<span class="sd">        needs to be potentially shown</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">element_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_config</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="c1"># make sure we show the text on the original segment</span>
        <span class="n">text_segment</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">level_color</span><span class="p">:</span>
            <span class="n">element_config</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">level_color</span>  <span class="c1"># Set the color</span>
        <span class="k">if</span> <span class="n">element</span> <span class="ow">and</span> <span class="n">element</span><span class="o">.</span><span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_paths</span><span class="p">:</span>
            <span class="n">element_config</span><span class="o">.</span><span class="n">element_class</span> <span class="o">=</span> <span class="s2">&quot;selected&quot;</span>
            <span class="n">element_config</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;blue&quot;</span>
        <span class="c1"># in case we need to draw an achievement</span>
        <span class="n">total_levels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">total_valid_levels</span>

        <span class="k">if</span> <span class="n">achievement_level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">svg</span><span class="o">.</span><span class="n">add_donut_segment</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">element_config</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">segment</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">stacked_levels</span><span class="p">:</span>
                <span class="n">ratio</span> <span class="o">=</span> <span class="n">achievement_level</span> <span class="o">/</span> <span class="n">total_levels</span>
                <span class="n">relative_radius</span> <span class="o">=</span> <span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">outer_radius</span> <span class="o">-</span> <span class="n">segment</span><span class="o">.</span><span class="n">inner_radius</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span>
                <span class="n">segment</span><span class="o">.</span><span class="n">outer_radius</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">inner_radius</span> <span class="o">+</span> <span class="n">relative_radius</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">svg</span><span class="o">.</span><span class="n">add_donut_segment</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">element_config</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">segment</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># create the stacked segments starting with the highest level</span>
                <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">achievement_level</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                    <span class="n">stacked_segment</span><span class="p">,</span> <span class="n">stack_element_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_stacked_segment</span><span class="p">(</span>
                        <span class="n">level</span><span class="p">,</span> <span class="n">total_levels</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">element_config</span>
                    <span class="p">)</span>
                    <span class="c1"># the result will be overriden in the loop so we&#39;ll return the innermost</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">svg</span><span class="o">.</span><span class="n">add_donut_segment</span><span class="p">(</span>
                        <span class="n">config</span><span class="o">=</span><span class="n">stack_element_config</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">stacked_segment</span>
                    <span class="p">)</span>
        <span class="k">if</span> <span class="n">element</span><span class="p">:</span>
            <span class="n">text_mode</span> <span class="o">=</span> <span class="s2">&quot;empty&quot;</span>
            <span class="k">if</span> <span class="n">segment</span><span class="o">.</span><span class="n">text_mode</span><span class="p">:</span>
                <span class="n">text_mode</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">text_mode</span>
            <span class="k">if</span> <span class="n">text_mode</span> <span class="o">!=</span> <span class="s2">&quot;empty&quot;</span><span class="p">:</span>
                <span class="c1"># no autofill please</span>
                <span class="c1"># textwrap.fill(element.short_name, width=20)</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">short_name</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">add_text_to_donut_segment</span><span class="p">(</span>
                    <span class="n">text_segment</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">text_mode</span>
                <span class="p">)</span>
        <span class="c1"># in stacked mode show the level circles</span>
        <span class="c1"># by drawing arcs even if no achievements</span>
        <span class="c1"># are available</span>
        <span class="k">if</span> <span class="n">ringspec</span> <span class="ow">and</span> <span class="n">ringspec</span><span class="o">.</span><span class="n">levels_visible</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">total_levels</span><span class="p">:</span>
                <span class="n">svg</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;!-- arcs for </span><span class="si">{</span><span class="n">element</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2"> --&gt;&quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">total_levels</span><span class="p">):</span>
                    <span class="n">stacked_segment</span><span class="p">,</span> <span class="n">stack_element_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_stacked_segment</span><span class="p">(</span>
                        <span class="n">level</span><span class="p">,</span> <span class="n">total_levels</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">element_config</span>
                    <span class="p">)</span>
                    <span class="n">fill</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>  <span class="c1"># Set the color for unachieved levels</span>
                    <span class="n">donut_path</span> <span class="o">=</span> <span class="n">svg</span><span class="o">.</span><span class="n">get_donut_path</span><span class="p">(</span>
                        <span class="n">stacked_segment</span><span class="p">,</span> <span class="n">radial_offset</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">middle_arc</span><span class="o">=</span><span class="kc">True</span>
                    <span class="p">)</span>  <span class="c1"># Get the path for the stacked segment</span>
                    <span class="n">svg</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s1">&#39;&lt;path d=&quot;</span><span class="si">{</span><span class="n">donut_path</span><span class="si">}</span><span class="s1">&quot; stroke=&quot;</span><span class="si">{</span><span class="n">fill</span><span class="si">}</span><span class="s1">&quot; fill=&quot;none&quot; stroke-width=&quot;1.5&quot; /&gt;&#39;</span>
                    <span class="p">)</span>  <span class="c1"># Draw the path in SVG</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">generate_donut_segment_for_achievement</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span><span class="p">,</span>
        <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span><span class="p">,</span>
        <span class="n">element</span><span class="p">:</span> <span class="n">CompetenceElement</span><span class="p">,</span>
        <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DonutSegment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        generate a donut segment for the</span>
<span class="sd">        learner&#39;s achievements</span>
<span class="sd">        corresponding to the given path and return it&#39;s segment definition</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">achievement</span> <span class="o">=</span> <span class="n">learner</span><span class="o">.</span><span class="n">achievements_by_path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">achievement</span> <span class="ow">and</span> <span class="n">achievement</span><span class="o">.</span><span class="n">level</span><span class="p">:</span>
            <span class="c1"># Retrieve the color for the achievement level</span>
            <span class="n">level_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">get_level_color</span><span class="p">(</span><span class="n">achievement</span><span class="o">.</span><span class="n">level</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">level_color</span><span class="p">:</span>
                <span class="c1"># set the color and radius of</span>
                <span class="c1"># the segment for achievement</span>
                <span class="c1"># make sure we don&#39;t interfere with the segment calculations</span>
                <span class="n">segment</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_donut_segment</span><span class="p">(</span>
                    <span class="n">svg</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">level_color</span><span class="p">,</span> <span class="n">achievement</span><span class="o">.</span><span class="n">level</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">generate_donut_segment_for_element</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span><span class="p">,</span>
        <span class="n">element</span><span class="p">:</span> <span class="n">CompetenceElement</span><span class="p">,</span>
        <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span><span class="p">,</span>
        <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
        <span class="n">ringspec</span><span class="p">:</span> <span class="n">RingSpec</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DonutSegment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        generate a donut segment for a given element of</span>
<span class="sd">        the CompetenceTree</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">segment</span><span class="o">.</span><span class="n">outer_radius</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">segment</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Simply create the donut segment without considering the achievement</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_donut_segment</span><span class="p">(</span>
                <span class="n">svg</span><span class="o">=</span><span class="n">svg</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="n">element</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">segment</span><span class="p">,</span> <span class="n">ringspec</span><span class="o">=</span><span class="n">ringspec</span>
            <span class="p">)</span>
            <span class="c1"># check learner achievements</span>
            <span class="k">if</span> <span class="n">learner</span><span class="p">:</span>
                <span class="n">_learner_segment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_donut_segment_for_achievement</span><span class="p">(</span>
                    <span class="n">svg</span><span class="o">=</span><span class="n">svg</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="n">learner</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="n">element</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">segment</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">generate_pie_elements_for_segments</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span><span class="p">,</span>
        <span class="n">ct</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">,</span>
        <span class="n">segments</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">]],</span>
        <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate pie elements for the competence tree using pre-calculated segments.</span>

<span class="sd">        This method will iterate through the provided segments dictionary, using each pre-calculated</span>
<span class="sd">        DonutSegment to generate and render pie elements (e.g., aspects, areas, or facets) based on</span>
<span class="sd">        the learner&#39;s achievements.</span>

<span class="sd">        Args:</span>
<span class="sd">            svg (SVG): The SVG object where the pie elements will be drawn.</span>
<span class="sd">            ct (CompetenceTree): The competence tree structure.</span>
<span class="sd">            segments (Dict[str, Dict[str, DonutSegment]]): A nested dictionary where the first key is the</span>
<span class="sd">                                                           level name (e.g., &#39;aspect&#39;, &#39;area&#39;, &#39;facet&#39;),</span>
<span class="sd">                                                           and the second key is an element&#39;s path, mapping</span>
<span class="sd">                                                           to its corresponding DonutSegment.</span>
<span class="sd">            learner (Learner): The learner object containing achievement data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">level_name</span><span class="p">,</span> <span class="n">segment_dict</span> <span class="ow">in</span> <span class="n">segments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">ringspec</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="n">level_name</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segment_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">element</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">elements_by_path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">element</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">generate_donut_segment_for_element</span><span class="p">(</span>
                        <span class="n">svg</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">learner</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">segment</span><span class="p">,</span> <span class="n">ringspec</span><span class="o">=</span><span class="n">ringspec</span>
                    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_donut_segment</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">parent_segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
        <span class="n">start_angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">end_angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">ringspec</span><span class="p">:</span> <span class="n">RingSpec</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DonutSegment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new DonutSegment based on the specified parameters, calculating its</span>
<span class="sd">        inner and outer radii based on SVG configuration and ring specifications.</span>

<span class="sd">        Args:</span>
<span class="sd">            parent_segment (DonutSegment): The parent segment from which the new segment inherits its center (cx, cy).</span>
<span class="sd">            start_angle (float): The starting angle of the new segment.</span>
<span class="sd">            end_angle (float): The ending angle of the new segment.</span>
<span class="sd">            ringspec (RingSpec): An instance of RingSpec defining the ratios for inner and outer radii, and the text mode.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DonutSegment: A new DonutSegment instance configured as specified.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Calculate the actual inner and outer radii based on the SVG config and ringspec ratios</span>
        <span class="n">inner_radius</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">ringspec</span><span class="o">.</span><span class="n">inner_ratio</span>
        <span class="n">outer_radius</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">ringspec</span><span class="o">.</span><span class="n">outer_ratio</span>
        <span class="c1"># Create a new segment for this element</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">DonutSegment</span><span class="p">(</span>
            <span class="n">cx</span><span class="o">=</span><span class="n">parent_segment</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span>
            <span class="n">cy</span><span class="o">=</span><span class="n">parent_segment</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span>
            <span class="n">inner_radius</span><span class="o">=</span><span class="n">inner_radius</span><span class="p">,</span>
            <span class="n">outer_radius</span><span class="o">=</span><span class="n">outer_radius</span><span class="p">,</span>
            <span class="n">start_angle</span><span class="o">=</span><span class="n">start_angle</span><span class="p">,</span>
            <span class="n">end_angle</span><span class="o">=</span><span class="n">end_angle</span><span class="p">,</span>
            <span class="n">text_mode</span><span class="o">=</span><span class="n">ringspec</span><span class="o">.</span><span class="n">text_mode</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">segment</span>

    <span class="k">def</span> <span class="nf">calculate_sub_segments</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ct</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">,</span>
        <span class="n">parent_segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
        <span class="n">level_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">symmetry_mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">elements</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">CompetenceElement</span><span class="p">],</span>
        <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates and returns a dictionary of DonutSegment objects for a given level in the Competence Tree.</span>

<span class="sd">        This method divides a parent segment into sub-segments based on the number of elements in the specified level,</span>
<span class="sd">        and assigns each sub-segment to the corresponding element&#39;s path.</span>

<span class="sd">        Args:</span>
<span class="sd">            ct: An instance of CompetenceTree representing the entire competence structure.</span>
<span class="sd">            parent_segment: A DonutSegment instance representing the parent segment within which the sub-segments will be calculated.</span>
<span class="sd">            level_name: The name of the level (e.g., &#39;aspect&#39;, &#39;area&#39;, &#39;facet&#39;) for which sub-segments are being calculated.</span>
<span class="sd">            symmetry_mode: The symmetry mode (&#39;symmetric&#39; or &#39;asymmetric&#39;) affecting segment calculation.</span>
<span class="sd">            elements: A list of CompetenceElement instances at the current level.</span>
<span class="sd">            lenient (bool): if True symmetry mode will be adjusted to count in case there are no values</span>
<span class="sd">        Returns:</span>
<span class="sd">            A dictionary where keys are element paths and values are DonutSegment instances representing each element&#39;s segment in the visualization.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ringspec</span><span class="p">:</span> <span class="n">RingSpec</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="n">level_name</span><span class="p">]</span>
        <span class="n">sub_segments</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">attr_names</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="s2">&quot;max_score&quot;</span><span class="p">}</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">sub_segments</span>
        <span class="n">num_zero_none_values</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="n">symmetry_mode</span> <span class="o">==</span> <span class="s2">&quot;count&quot;</span><span class="p">:</span>
            <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">attr_name</span> <span class="o">=</span> <span class="n">attr_names</span><span class="p">[</span><span class="n">symmetry_mode</span><span class="p">]</span>
            <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">min_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span>
                <span class="s2">&quot;inf&quot;</span>
            <span class="p">)</span>  <span class="c1"># Initialize to infinity for proper minimum comparison</span>

            <span class="c1"># Initial loop to calculate total and count 0/None values</span>
            <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                    <span class="n">num_zero_none_values</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">total</span> <span class="o">+=</span> <span class="n">value</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="n">min_value</span><span class="p">:</span>
                        <span class="n">min_value</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">if</span> <span class="n">total</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">num_zero_none_values</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">lenient</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;All element values are 0 or None, cannot divide segment.&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># robust reaction on issue</span>
                <span class="n">symmetry_mode</span> <span class="o">=</span> <span class="s2">&quot;count&quot;</span>
                <span class="n">num_zero_none_values</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>

        <span class="c1"># Correct handling when all values are not 0/None</span>
        <span class="c1"># and therefore  min_value was not updated</span>
        <span class="k">if</span> <span class="n">num_zero_none_values</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># Adjust total value for 0/None values</span>
            <span class="c1"># we use the min_value as a default</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">min_value</span> <span class="o">*</span> <span class="n">num_zero_none_values</span>

        <span class="n">start_angle</span> <span class="o">=</span> <span class="n">parent_segment</span><span class="o">.</span><span class="n">start_angle</span>

        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">symmetry_mode</span> <span class="o">==</span> <span class="s2">&quot;count&quot;</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span> <span class="ow">or</span> <span class="n">min_value</span>
            <span class="n">proportion</span> <span class="o">=</span> <span class="n">value</span> <span class="o">/</span> <span class="n">total</span>
            <span class="n">angle_span</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">parent_segment</span><span class="o">.</span><span class="n">end_angle</span> <span class="o">-</span> <span class="n">parent_segment</span><span class="o">.</span><span class="n">start_angle</span>
            <span class="p">)</span> <span class="o">*</span> <span class="n">proportion</span>
            <span class="n">end_angle</span> <span class="o">=</span> <span class="n">start_angle</span> <span class="o">+</span> <span class="n">angle_span</span>

            <span class="n">segment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_donut_segment</span><span class="p">(</span>
                <span class="n">parent_segment</span><span class="p">,</span> <span class="n">start_angle</span><span class="p">,</span> <span class="n">end_angle</span><span class="p">,</span> <span class="n">ringspec</span>
            <span class="p">)</span>
            <span class="n">sub_segments</span><span class="p">[</span><span class="n">element</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">segment</span>
            <span class="n">start_angle</span> <span class="o">=</span> <span class="n">end_angle</span>

        <span class="k">return</span> <span class="n">sub_segments</span>

    <span class="k">def</span> <span class="nf">calculate_parent_segments</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">segments</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">],</span> <span class="n">ringspec</span><span class="p">:</span> <span class="n">RingSpec</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Aggregates child segments into parent segments, calculating the combined start and end angles</span>
<span class="sd">        for each parent based on its children segments. It uses the `create_donut_segment` function to</span>
<span class="sd">        ensure that newly created parent segments have the correct dimensions according to the specified `ringspec`.</span>

<span class="sd">        Args:</span>
<span class="sd">            segments: A dictionary of child segments with paths as keys and DonutSegment objects as values.</span>
<span class="sd">            ringspec: A RingSpec object specifying the dimensions for the newly created parent segments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary of aggregated parent segments with parent paths as keys and newly created DonutSegment objects as values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parent_segments</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># Extract the parent path</span>
            <span class="n">parent_path</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">parent_path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">parent_segments</span><span class="p">:</span>
                <span class="c1"># For a new parent segment, initialize with current segment&#39;s angles</span>
                <span class="n">parent_segments</span><span class="p">[</span><span class="n">parent_path</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_donut_segment</span><span class="p">(</span>
                    <span class="n">parent_segment</span><span class="o">=</span><span class="n">segment</span><span class="p">,</span>  <span class="c1"># Assuming there&#39;s logic to determine this correctly</span>
                    <span class="n">start_angle</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">start_angle</span><span class="p">,</span>
                    <span class="n">end_angle</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">end_angle</span><span class="p">,</span>
                    <span class="n">ringspec</span><span class="o">=</span><span class="n">ringspec</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Update existing parent segment&#39;s angles</span>
                <span class="n">parent_segment</span> <span class="o">=</span> <span class="n">parent_segments</span><span class="p">[</span><span class="n">parent_path</span><span class="p">]</span>
                <span class="n">parent_segment</span><span class="o">.</span><span class="n">start_angle</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span>
                    <span class="n">segment</span><span class="o">.</span><span class="n">start_angle</span><span class="p">,</span> <span class="n">parent_segment</span><span class="o">.</span><span class="n">start_angle</span>
                <span class="p">)</span>
                <span class="n">parent_segment</span><span class="o">.</span><span class="n">end_angle</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
                    <span class="n">segment</span><span class="o">.</span><span class="n">end_angle</span><span class="p">,</span> <span class="n">parent_segment</span><span class="o">.</span><span class="n">end_angle</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">parent_segments</span>

    <span class="k">def</span> <span class="nf">calculate_segments</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">,</span> <span class="n">tree_segment</span><span class="p">:</span> <span class="n">DonutSegment</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pre-calculate the donut segments for each level of the competence tree.</span>

<span class="sd">        Args:</span>
<span class="sd">            ct: A CompetenceTree instance for which segments are to be calculated.</span>
<span class="sd">            tree_segment: A DonutSegment instance representing the whole competence tree.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A nested dictionary where the first-level keys are level names (e.g., &#39;aspect&#39;, &#39;area&#39;, &#39;facet&#39;),</span>
<span class="sd">            and the second-level keys are element paths with their corresponding DonutSegment objects as values.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;aspect&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;facet&quot;</span><span class="p">:</span> <span class="p">{}}</span>

        <span class="n">symmetry_level</span><span class="p">,</span> <span class="n">symmetry_mode</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">get_symmetry_spec</span><span class="p">()</span>
        <span class="n">symmetry_elements</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">elements_by_level</span><span class="p">[</span><span class="n">symmetry_level</span><span class="p">]</span>
        <span class="n">sub_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_sub_segments</span><span class="p">(</span>
            <span class="n">ct</span><span class="p">,</span> <span class="n">tree_segment</span><span class="p">,</span> <span class="n">symmetry_level</span><span class="p">,</span> <span class="n">symmetry_mode</span><span class="p">,</span> <span class="n">symmetry_elements</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="n">symmetry_level</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub_segments</span>
        <span class="k">if</span> <span class="n">symmetry_level</span> <span class="o">==</span> <span class="s2">&quot;facet&quot;</span><span class="p">:</span>
            <span class="c1"># work from outer level to inner</span>
            <span class="n">area_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_parent_segments</span><span class="p">(</span>
                <span class="n">sub_segments</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">area_segments</span>
            <span class="n">aspect_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_parent_segments</span><span class="p">(</span>
                <span class="n">area_segments</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">aspect_segments</span>
        <span class="k">elif</span> <span class="n">symmetry_level</span> <span class="o">==</span> <span class="s2">&quot;area&quot;</span><span class="p">:</span>
            <span class="c1"># work from outer level to inner</span>
            <span class="n">area_segments</span> <span class="o">=</span> <span class="n">sub_segments</span>
            <span class="n">aspect_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_parent_segments</span><span class="p">(</span>
                <span class="n">area_segments</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">aspect_segments</span>
            <span class="c1"># work from middle level to outer</span>
            <span class="k">for</span> <span class="n">area_path</span><span class="p">,</span> <span class="n">area_segment</span> <span class="ow">in</span> <span class="n">area_segments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">area</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">[</span><span class="n">area_path</span><span class="p">]</span>
                <span class="n">facet_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_sub_segments</span><span class="p">(</span>
                    <span class="n">ct</span><span class="p">,</span> <span class="n">area_segment</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">,</span> <span class="n">symmetry_mode</span><span class="p">,</span> <span class="n">area</span><span class="o">.</span><span class="n">facets</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="s2">&quot;facet&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">facet_segments</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">symmetry_level</span> <span class="o">==</span> <span class="s2">&quot;aspect&quot;</span><span class="p">:</span>
            <span class="c1"># work from inner level to outer</span>
            <span class="k">for</span> <span class="n">aspect_path</span><span class="p">,</span> <span class="n">aspect_segment</span> <span class="ow">in</span> <span class="n">sub_segments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">aspect</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">[</span><span class="n">aspect_path</span><span class="p">]</span>
                <span class="n">area_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_sub_segments</span><span class="p">(</span>
                    <span class="n">ct</span><span class="p">,</span> <span class="n">aspect_segment</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="n">symmetry_mode</span><span class="p">,</span> <span class="n">aspect</span><span class="o">.</span><span class="n">areas</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">area_segments</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">area_path</span><span class="p">,</span> <span class="n">area_segment</span> <span class="ow">in</span> <span class="n">area_segments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">area</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">[</span><span class="n">area_path</span><span class="p">]</span>
                    <span class="n">facet_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_sub_segments</span><span class="p">(</span>
                        <span class="n">ct</span><span class="p">,</span> <span class="n">area_segment</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">,</span> <span class="n">symmetry_mode</span><span class="p">,</span> <span class="n">area</span><span class="o">.</span><span class="n">facets</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="s2">&quot;facet&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">facet_segments</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid symmetry_level </span><span class="si">{</span><span class="n">symmetry_level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span>

    <span class="k">def</span> <span class="nf">generate_svg_markup</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">competence_tree</span><span class="p">:</span> <span class="n">CompetenceTree</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">selected_paths</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">SVGConfig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">with_java_script</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">text_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;empty&quot;</span><span class="p">,</span>
        <span class="n">lookup_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate the SVG markup for the given CompetenceTree and Learner. This method</span>
<span class="sd">        creates an SVG representation of the competence map, which visualizes the</span>
<span class="sd">        structure and levels of competencies, along with highlighting the learner&#39;s</span>
<span class="sd">        achievements if provided.</span>

<span class="sd">        Args:</span>
<span class="sd">            competence_tree (CompetenceTree, optional): The competence tree structure</span>
<span class="sd">                to be visualized. If None, the competence tree of the DcmChart instance</span>
<span class="sd">                will be used. Defaults to None.</span>
<span class="sd">            learner (Learner, optional): The learner whose achievements are to be</span>
<span class="sd">                visualized on the competence tree. If None, no learner-specific</span>
<span class="sd">                information will be included in the SVG. Defaults to None.</span>
<span class="sd">            selected_paths (List, optional): A list of paths that should be highlighted</span>
<span class="sd">                in the SVG. These paths typically represent specific competencies or</span>
<span class="sd">                achievements. Defaults to an empty list.</span>
<span class="sd">            config (SVGConfig, optional): Configuration for the SVG canvas and legend.</span>
<span class="sd">                If None, default configuration settings are used. Defaults to None.</span>
<span class="sd">            text_mode(str): text display mode</span>
<span class="sd">            with_java_script (bool, optional): Indicates whether to include JavaScript</span>
<span class="sd">                in the SVG for interactivity. Defaults to True.</span>
<span class="sd">            lookup_url (str, optional): Base URL for linking to detailed descriptions</span>
<span class="sd">                or information about the competence elements. If not provided, links</span>
<span class="sd">                will not be generated. Defaults to an empty string.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: A string containing the SVG markup for the competence map.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If there are inconsistencies or issues with the provided data</span>
<span class="sd">                that prevent the creation of a valid SVG.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">competence_tree</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">competence_tree</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_paths</span> <span class="o">=</span> <span class="n">selected_paths</span>

        <span class="n">competence_tree</span><span class="o">.</span><span class="n">calculate_ring_specs</span><span class="p">(</span><span class="n">text_mode</span><span class="p">)</span>
        <span class="n">svg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_and_add_inner_circle</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">competence_tree</span><span class="p">,</span> <span class="n">lookup_url</span><span class="p">)</span>

        <span class="n">segment</span> <span class="o">=</span> <span class="n">DonutSegment</span><span class="p">(</span>
            <span class="n">cx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span> <span class="n">inner_radius</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">outer_radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree_radius</span>
        <span class="p">)</span>
        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_segments</span><span class="p">(</span><span class="n">competence_tree</span><span class="p">,</span> <span class="n">segment</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generate_pie_elements_for_segments</span><span class="p">(</span>
            <span class="n">svg</span><span class="o">=</span><span class="n">svg</span><span class="p">,</span> <span class="n">ct</span><span class="o">=</span><span class="n">competence_tree</span><span class="p">,</span> <span class="n">segments</span><span class="o">=</span><span class="n">segments</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="n">learner</span>
        <span class="p">)</span>
        <span class="c1"># self.generate_pie_elements(</span>
        <span class="c1">#    level=1,</span>
        <span class="c1">#    svg=svg,</span>
        <span class="c1">#    ct=competence_tree,</span>
        <span class="c1">#    parent_element=competence_tree,</span>
        <span class="c1">#    learner=learner,</span>
        <span class="c1">#    segment=segment,</span>
        <span class="c1"># )</span>
        <span class="k">if</span> <span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">legend_height</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">competence_tree</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span><span class="n">svg</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">svg</span><span class="o">.</span><span class="n">get_svg_markup</span><span class="p">(</span><span class="n">with_java_script</span><span class="o">=</span><span class="n">with_java_script</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_svg_to_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">svg_markup</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save the SVG content to a file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">svg_markup</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">dcm</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructor</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dcm</span><span class="p">:</span> <span class="n">DynamicCompetenceMap</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span> <span class="o">=</span> <span class="n">dcm</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.add_donut_segment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_donut_segment</span><span class="p">(</span><span class="n">svg</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">level_color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">achievement_level</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ringspec</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>create a donut segment for the
given competence element and add it
to the given SVG</p>
<p>if level color is available an achievement
needs to be potentially shown</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_donut_segment</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span><span class="p">,</span>
    <span class="n">element</span><span class="p">:</span> <span class="n">CompetenceElement</span><span class="p">,</span>
    <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
    <span class="n">level_color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">achievement_level</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">ringspec</span><span class="p">:</span> <span class="n">RingSpec</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DonutSegment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    create a donut segment for the</span>
<span class="sd">    given competence element and add it</span>
<span class="sd">    to the given SVG</span>

<span class="sd">    if level color is available an achievement</span>
<span class="sd">    needs to be potentially shown</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">element_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_config</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="c1"># make sure we show the text on the original segment</span>
    <span class="n">text_segment</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">level_color</span><span class="p">:</span>
        <span class="n">element_config</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">level_color</span>  <span class="c1"># Set the color</span>
    <span class="k">if</span> <span class="n">element</span> <span class="ow">and</span> <span class="n">element</span><span class="o">.</span><span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_paths</span><span class="p">:</span>
        <span class="n">element_config</span><span class="o">.</span><span class="n">element_class</span> <span class="o">=</span> <span class="s2">&quot;selected&quot;</span>
        <span class="n">element_config</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;blue&quot;</span>
    <span class="c1"># in case we need to draw an achievement</span>
    <span class="n">total_levels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">total_valid_levels</span>

    <span class="k">if</span> <span class="n">achievement_level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">svg</span><span class="o">.</span><span class="n">add_donut_segment</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">element_config</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">segment</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">stacked_levels</span><span class="p">:</span>
            <span class="n">ratio</span> <span class="o">=</span> <span class="n">achievement_level</span> <span class="o">/</span> <span class="n">total_levels</span>
            <span class="n">relative_radius</span> <span class="o">=</span> <span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">outer_radius</span> <span class="o">-</span> <span class="n">segment</span><span class="o">.</span><span class="n">inner_radius</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span>
            <span class="n">segment</span><span class="o">.</span><span class="n">outer_radius</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">inner_radius</span> <span class="o">+</span> <span class="n">relative_radius</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">svg</span><span class="o">.</span><span class="n">add_donut_segment</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">element_config</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">segment</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># create the stacked segments starting with the highest level</span>
            <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">achievement_level</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">stacked_segment</span><span class="p">,</span> <span class="n">stack_element_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_stacked_segment</span><span class="p">(</span>
                    <span class="n">level</span><span class="p">,</span> <span class="n">total_levels</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">element_config</span>
                <span class="p">)</span>
                <span class="c1"># the result will be overriden in the loop so we&#39;ll return the innermost</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">svg</span><span class="o">.</span><span class="n">add_donut_segment</span><span class="p">(</span>
                    <span class="n">config</span><span class="o">=</span><span class="n">stack_element_config</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">stacked_segment</span>
                <span class="p">)</span>
    <span class="k">if</span> <span class="n">element</span><span class="p">:</span>
        <span class="n">text_mode</span> <span class="o">=</span> <span class="s2">&quot;empty&quot;</span>
        <span class="k">if</span> <span class="n">segment</span><span class="o">.</span><span class="n">text_mode</span><span class="p">:</span>
            <span class="n">text_mode</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">text_mode</span>
        <span class="k">if</span> <span class="n">text_mode</span> <span class="o">!=</span> <span class="s2">&quot;empty&quot;</span><span class="p">:</span>
            <span class="c1"># no autofill please</span>
            <span class="c1"># textwrap.fill(element.short_name, width=20)</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">short_name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">add_text_to_donut_segment</span><span class="p">(</span>
                <span class="n">text_segment</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">text_mode</span>
            <span class="p">)</span>
    <span class="c1"># in stacked mode show the level circles</span>
    <span class="c1"># by drawing arcs even if no achievements</span>
    <span class="c1"># are available</span>
    <span class="k">if</span> <span class="n">ringspec</span> <span class="ow">and</span> <span class="n">ringspec</span><span class="o">.</span><span class="n">levels_visible</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">total_levels</span><span class="p">:</span>
            <span class="n">svg</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;!-- arcs for </span><span class="si">{</span><span class="n">element</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2"> --&gt;&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">total_levels</span><span class="p">):</span>
                <span class="n">stacked_segment</span><span class="p">,</span> <span class="n">stack_element_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_stacked_segment</span><span class="p">(</span>
                    <span class="n">level</span><span class="p">,</span> <span class="n">total_levels</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">element_config</span>
                <span class="p">)</span>
                <span class="n">fill</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>  <span class="c1"># Set the color for unachieved levels</span>
                <span class="n">donut_path</span> <span class="o">=</span> <span class="n">svg</span><span class="o">.</span><span class="n">get_donut_path</span><span class="p">(</span>
                    <span class="n">stacked_segment</span><span class="p">,</span> <span class="n">radial_offset</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">middle_arc</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">)</span>  <span class="c1"># Get the path for the stacked segment</span>
                <span class="n">svg</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;&lt;path d=&quot;</span><span class="si">{</span><span class="n">donut_path</span><span class="si">}</span><span class="s1">&quot; stroke=&quot;</span><span class="si">{</span><span class="n">fill</span><span class="si">}</span><span class="s1">&quot; fill=&quot;none&quot; stroke-width=&quot;1.5&quot; /&gt;&#39;</span>
                <span class="p">)</span>  <span class="c1"># Draw the path in SVG</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.calculate_parent_segments" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_parent_segments</span><span class="p">(</span><span class="n">segments</span><span class="p">,</span> <span class="n">ringspec</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Aggregates child segments into parent segments, calculating the combined start and end angles
for each parent based on its children segments. It uses the <code>create_donut_segment</code> function to
ensure that newly created parent segments have the correct dimensions according to the specified <code>ringspec</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>segments</code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of child segments with paths as keys and DonutSegment objects as values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ringspec</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.RingSpec" href="#dcm.dcm_core.RingSpec">RingSpec</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A RingSpec object specifying the dimensions for the newly created parent segments.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of aggregated parent segments with parent paths as keys and newly created DonutSegment objects as values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calculate_parent_segments</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">segments</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">],</span> <span class="n">ringspec</span><span class="p">:</span> <span class="n">RingSpec</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Aggregates child segments into parent segments, calculating the combined start and end angles</span>
<span class="sd">    for each parent based on its children segments. It uses the `create_donut_segment` function to</span>
<span class="sd">    ensure that newly created parent segments have the correct dimensions according to the specified `ringspec`.</span>

<span class="sd">    Args:</span>
<span class="sd">        segments: A dictionary of child segments with paths as keys and DonutSegment objects as values.</span>
<span class="sd">        ringspec: A RingSpec object specifying the dimensions for the newly created parent segments.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary of aggregated parent segments with parent paths as keys and newly created DonutSegment objects as values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parent_segments</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># Extract the parent path</span>
        <span class="n">parent_path</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">parent_path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">parent_segments</span><span class="p">:</span>
            <span class="c1"># For a new parent segment, initialize with current segment&#39;s angles</span>
            <span class="n">parent_segments</span><span class="p">[</span><span class="n">parent_path</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_donut_segment</span><span class="p">(</span>
                <span class="n">parent_segment</span><span class="o">=</span><span class="n">segment</span><span class="p">,</span>  <span class="c1"># Assuming there&#39;s logic to determine this correctly</span>
                <span class="n">start_angle</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">start_angle</span><span class="p">,</span>
                <span class="n">end_angle</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">end_angle</span><span class="p">,</span>
                <span class="n">ringspec</span><span class="o">=</span><span class="n">ringspec</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Update existing parent segment&#39;s angles</span>
            <span class="n">parent_segment</span> <span class="o">=</span> <span class="n">parent_segments</span><span class="p">[</span><span class="n">parent_path</span><span class="p">]</span>
            <span class="n">parent_segment</span><span class="o">.</span><span class="n">start_angle</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span>
                <span class="n">segment</span><span class="o">.</span><span class="n">start_angle</span><span class="p">,</span> <span class="n">parent_segment</span><span class="o">.</span><span class="n">start_angle</span>
            <span class="p">)</span>
            <span class="n">parent_segment</span><span class="o">.</span><span class="n">end_angle</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
                <span class="n">segment</span><span class="o">.</span><span class="n">end_angle</span><span class="p">,</span> <span class="n">parent_segment</span><span class="o">.</span><span class="n">end_angle</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">parent_segments</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.calculate_segments" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_segments</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">tree_segment</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Pre-calculate the donut segments for each level of the competence tree.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>ct</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceTree" href="#dcm.dcm_core.CompetenceTree">CompetenceTree</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A CompetenceTree instance for which segments are to be calculated.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>tree_segment</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A DonutSegment instance representing the whole competence tree.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Dict">Dict</span>[str, <a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A nested dictionary where the first-level keys are level names (e.g., 'aspect', 'area', 'facet'),</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Dict">Dict</span>[str, <a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>and the second-level keys are element paths with their corresponding DonutSegment objects as values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calculate_segments</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">,</span> <span class="n">tree_segment</span><span class="p">:</span> <span class="n">DonutSegment</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pre-calculate the donut segments for each level of the competence tree.</span>

<span class="sd">    Args:</span>
<span class="sd">        ct: A CompetenceTree instance for which segments are to be calculated.</span>
<span class="sd">        tree_segment: A DonutSegment instance representing the whole competence tree.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A nested dictionary where the first-level keys are level names (e.g., &#39;aspect&#39;, &#39;area&#39;, &#39;facet&#39;),</span>
<span class="sd">        and the second-level keys are element paths with their corresponding DonutSegment objects as values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;aspect&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;facet&quot;</span><span class="p">:</span> <span class="p">{}}</span>

    <span class="n">symmetry_level</span><span class="p">,</span> <span class="n">symmetry_mode</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">get_symmetry_spec</span><span class="p">()</span>
    <span class="n">symmetry_elements</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">elements_by_level</span><span class="p">[</span><span class="n">symmetry_level</span><span class="p">]</span>
    <span class="n">sub_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_sub_segments</span><span class="p">(</span>
        <span class="n">ct</span><span class="p">,</span> <span class="n">tree_segment</span><span class="p">,</span> <span class="n">symmetry_level</span><span class="p">,</span> <span class="n">symmetry_mode</span><span class="p">,</span> <span class="n">symmetry_elements</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="n">symmetry_level</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub_segments</span>
    <span class="k">if</span> <span class="n">symmetry_level</span> <span class="o">==</span> <span class="s2">&quot;facet&quot;</span><span class="p">:</span>
        <span class="c1"># work from outer level to inner</span>
        <span class="n">area_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_parent_segments</span><span class="p">(</span>
            <span class="n">sub_segments</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">area_segments</span>
        <span class="n">aspect_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_parent_segments</span><span class="p">(</span>
            <span class="n">area_segments</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">aspect_segments</span>
    <span class="k">elif</span> <span class="n">symmetry_level</span> <span class="o">==</span> <span class="s2">&quot;area&quot;</span><span class="p">:</span>
        <span class="c1"># work from outer level to inner</span>
        <span class="n">area_segments</span> <span class="o">=</span> <span class="n">sub_segments</span>
        <span class="n">aspect_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_parent_segments</span><span class="p">(</span>
            <span class="n">area_segments</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">aspect_segments</span>
        <span class="c1"># work from middle level to outer</span>
        <span class="k">for</span> <span class="n">area_path</span><span class="p">,</span> <span class="n">area_segment</span> <span class="ow">in</span> <span class="n">area_segments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">area</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">[</span><span class="n">area_path</span><span class="p">]</span>
            <span class="n">facet_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_sub_segments</span><span class="p">(</span>
                <span class="n">ct</span><span class="p">,</span> <span class="n">area_segment</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">,</span> <span class="n">symmetry_mode</span><span class="p">,</span> <span class="n">area</span><span class="o">.</span><span class="n">facets</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="s2">&quot;facet&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">facet_segments</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">symmetry_level</span> <span class="o">==</span> <span class="s2">&quot;aspect&quot;</span><span class="p">:</span>
        <span class="c1"># work from inner level to outer</span>
        <span class="k">for</span> <span class="n">aspect_path</span><span class="p">,</span> <span class="n">aspect_segment</span> <span class="ow">in</span> <span class="n">sub_segments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">aspect</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">[</span><span class="n">aspect_path</span><span class="p">]</span>
            <span class="n">area_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_sub_segments</span><span class="p">(</span>
                <span class="n">ct</span><span class="p">,</span> <span class="n">aspect_segment</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="n">symmetry_mode</span><span class="p">,</span> <span class="n">aspect</span><span class="o">.</span><span class="n">areas</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">area_segments</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">area_path</span><span class="p">,</span> <span class="n">area_segment</span> <span class="ow">in</span> <span class="n">area_segments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">area</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">[</span><span class="n">area_path</span><span class="p">]</span>
                <span class="n">facet_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_sub_segments</span><span class="p">(</span>
                    <span class="n">ct</span><span class="p">,</span> <span class="n">area_segment</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">,</span> <span class="n">symmetry_mode</span><span class="p">,</span> <span class="n">area</span><span class="o">.</span><span class="n">facets</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span><span class="p">[</span><span class="s2">&quot;facet&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">facet_segments</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid symmetry_level </span><span class="si">{</span><span class="n">symmetry_level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">level_segments</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.calculate_sub_segments" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_sub_segments</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">parent_segment</span><span class="p">,</span> <span class="n">level_name</span><span class="p">,</span> <span class="n">symmetry_mode</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Calculates and returns a dictionary of DonutSegment objects for a given level in the Competence Tree.</p>
<p>This method divides a parent segment into sub-segments based on the number of elements in the specified level,
and assigns each sub-segment to the corresponding element's path.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>ct</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceTree" href="#dcm.dcm_core.CompetenceTree">CompetenceTree</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of CompetenceTree representing the entire competence structure.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>parent_segment</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A DonutSegment instance representing the parent segment within which the sub-segments will be calculated.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>level_name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the level (e.g., 'aspect', 'area', 'facet') for which sub-segments are being calculated.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>symmetry_mode</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The symmetry mode ('symmetric' or 'asymmetric') affecting segment calculation.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>elements</code></td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceElement" href="#dcm.dcm_core.CompetenceElement">CompetenceElement</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of CompetenceElement instances at the current level.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>lenient</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True symmetry mode will be adjusted to count in case there are no values</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns:
    A dictionary where keys are element paths and values are DonutSegment instances representing each element's segment in the visualization.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calculate_sub_segments</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ct</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">,</span>
    <span class="n">parent_segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
    <span class="n">level_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">symmetry_mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">elements</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">CompetenceElement</span><span class="p">],</span>
    <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates and returns a dictionary of DonutSegment objects for a given level in the Competence Tree.</span>

<span class="sd">    This method divides a parent segment into sub-segments based on the number of elements in the specified level,</span>
<span class="sd">    and assigns each sub-segment to the corresponding element&#39;s path.</span>

<span class="sd">    Args:</span>
<span class="sd">        ct: An instance of CompetenceTree representing the entire competence structure.</span>
<span class="sd">        parent_segment: A DonutSegment instance representing the parent segment within which the sub-segments will be calculated.</span>
<span class="sd">        level_name: The name of the level (e.g., &#39;aspect&#39;, &#39;area&#39;, &#39;facet&#39;) for which sub-segments are being calculated.</span>
<span class="sd">        symmetry_mode: The symmetry mode (&#39;symmetric&#39; or &#39;asymmetric&#39;) affecting segment calculation.</span>
<span class="sd">        elements: A list of CompetenceElement instances at the current level.</span>
<span class="sd">        lenient (bool): if True symmetry mode will be adjusted to count in case there are no values</span>
<span class="sd">    Returns:</span>
<span class="sd">        A dictionary where keys are element paths and values are DonutSegment instances representing each element&#39;s segment in the visualization.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ringspec</span><span class="p">:</span> <span class="n">RingSpec</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="n">level_name</span><span class="p">]</span>
    <span class="n">sub_segments</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">attr_names</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="s2">&quot;max_score&quot;</span><span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sub_segments</span>
    <span class="n">num_zero_none_values</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="n">symmetry_mode</span> <span class="o">==</span> <span class="s2">&quot;count&quot;</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">attr_name</span> <span class="o">=</span> <span class="n">attr_names</span><span class="p">[</span><span class="n">symmetry_mode</span><span class="p">]</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">min_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span>
            <span class="s2">&quot;inf&quot;</span>
        <span class="p">)</span>  <span class="c1"># Initialize to infinity for proper minimum comparison</span>

        <span class="c1"># Initial loop to calculate total and count 0/None values</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">num_zero_none_values</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">total</span> <span class="o">+=</span> <span class="n">value</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="n">min_value</span><span class="p">:</span>
                    <span class="n">min_value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">if</span> <span class="n">total</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">num_zero_none_values</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">lenient</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;All element values are 0 or None, cannot divide segment.&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># robust reaction on issue</span>
            <span class="n">symmetry_mode</span> <span class="o">=</span> <span class="s2">&quot;count&quot;</span>
            <span class="n">num_zero_none_values</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>

    <span class="c1"># Correct handling when all values are not 0/None</span>
    <span class="c1"># and therefore  min_value was not updated</span>
    <span class="k">if</span> <span class="n">num_zero_none_values</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># Adjust total value for 0/None values</span>
        <span class="c1"># we use the min_value as a default</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">min_value</span> <span class="o">*</span> <span class="n">num_zero_none_values</span>

    <span class="n">start_angle</span> <span class="o">=</span> <span class="n">parent_segment</span><span class="o">.</span><span class="n">start_angle</span>

    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">symmetry_mode</span> <span class="o">==</span> <span class="s2">&quot;count&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span> <span class="ow">or</span> <span class="n">min_value</span>
        <span class="n">proportion</span> <span class="o">=</span> <span class="n">value</span> <span class="o">/</span> <span class="n">total</span>
        <span class="n">angle_span</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">parent_segment</span><span class="o">.</span><span class="n">end_angle</span> <span class="o">-</span> <span class="n">parent_segment</span><span class="o">.</span><span class="n">start_angle</span>
        <span class="p">)</span> <span class="o">*</span> <span class="n">proportion</span>
        <span class="n">end_angle</span> <span class="o">=</span> <span class="n">start_angle</span> <span class="o">+</span> <span class="n">angle_span</span>

        <span class="n">segment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_donut_segment</span><span class="p">(</span>
            <span class="n">parent_segment</span><span class="p">,</span> <span class="n">start_angle</span><span class="p">,</span> <span class="n">end_angle</span><span class="p">,</span> <span class="n">ringspec</span>
        <span class="p">)</span>
        <span class="n">sub_segments</span><span class="p">[</span><span class="n">element</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">segment</span>
        <span class="n">start_angle</span> <span class="o">=</span> <span class="n">end_angle</span>

    <span class="k">return</span> <span class="n">sub_segments</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.create_donut_segment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_donut_segment</span><span class="p">(</span><span class="n">parent_segment</span><span class="p">,</span> <span class="n">start_angle</span><span class="p">,</span> <span class="n">end_angle</span><span class="p">,</span> <span class="n">ringspec</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Creates a new DonutSegment based on the specified parameters, calculating its
inner and outer radii based on SVG configuration and ring specifications.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>parent_segment</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent segment from which the new segment inherits its center (cx, cy).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>start_angle</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The starting angle of the new segment.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>end_angle</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ending angle of the new segment.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ringspec</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.RingSpec" href="#dcm.dcm_core.RingSpec">RingSpec</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of RingSpec defining the ratios for inner and outer radii, and the text mode.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>DonutSegment</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new DonutSegment instance configured as specified.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_donut_segment</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">parent_segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
    <span class="n">start_angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">end_angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">ringspec</span><span class="p">:</span> <span class="n">RingSpec</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DonutSegment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new DonutSegment based on the specified parameters, calculating its</span>
<span class="sd">    inner and outer radii based on SVG configuration and ring specifications.</span>

<span class="sd">    Args:</span>
<span class="sd">        parent_segment (DonutSegment): The parent segment from which the new segment inherits its center (cx, cy).</span>
<span class="sd">        start_angle (float): The starting angle of the new segment.</span>
<span class="sd">        end_angle (float): The ending angle of the new segment.</span>
<span class="sd">        ringspec (RingSpec): An instance of RingSpec defining the ratios for inner and outer radii, and the text mode.</span>

<span class="sd">    Returns:</span>
<span class="sd">        DonutSegment: A new DonutSegment instance configured as specified.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Calculate the actual inner and outer radii based on the SVG config and ringspec ratios</span>
    <span class="n">inner_radius</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">ringspec</span><span class="o">.</span><span class="n">inner_ratio</span>
    <span class="n">outer_radius</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">ringspec</span><span class="o">.</span><span class="n">outer_ratio</span>
    <span class="c1"># Create a new segment for this element</span>
    <span class="n">segment</span> <span class="o">=</span> <span class="n">DonutSegment</span><span class="p">(</span>
        <span class="n">cx</span><span class="o">=</span><span class="n">parent_segment</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span>
        <span class="n">cy</span><span class="o">=</span><span class="n">parent_segment</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span>
        <span class="n">inner_radius</span><span class="o">=</span><span class="n">inner_radius</span><span class="p">,</span>
        <span class="n">outer_radius</span><span class="o">=</span><span class="n">outer_radius</span><span class="p">,</span>
        <span class="n">start_angle</span><span class="o">=</span><span class="n">start_angle</span><span class="p">,</span>
        <span class="n">end_angle</span><span class="o">=</span><span class="n">end_angle</span><span class="p">,</span>
        <span class="n">text_mode</span><span class="o">=</span><span class="n">ringspec</span><span class="o">.</span><span class="n">text_mode</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">segment</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.generate_donut_segment_for_achievement" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_donut_segment_for_achievement</span><span class="p">(</span><span class="n">svg</span><span class="p">,</span> <span class="n">learner</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">segment</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>generate a donut segment for the
learner's achievements
corresponding to the given path and return it's segment definition</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_donut_segment_for_achievement</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span><span class="p">,</span>
    <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span><span class="p">,</span>
    <span class="n">element</span><span class="p">:</span> <span class="n">CompetenceElement</span><span class="p">,</span>
    <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DonutSegment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    generate a donut segment for the</span>
<span class="sd">    learner&#39;s achievements</span>
<span class="sd">    corresponding to the given path and return it&#39;s segment definition</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">achievement</span> <span class="o">=</span> <span class="n">learner</span><span class="o">.</span><span class="n">achievements_by_path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">achievement</span> <span class="ow">and</span> <span class="n">achievement</span><span class="o">.</span><span class="n">level</span><span class="p">:</span>
        <span class="c1"># Retrieve the color for the achievement level</span>
        <span class="n">level_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">get_level_color</span><span class="p">(</span><span class="n">achievement</span><span class="o">.</span><span class="n">level</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">level_color</span><span class="p">:</span>
            <span class="c1"># set the color and radius of</span>
            <span class="c1"># the segment for achievement</span>
            <span class="c1"># make sure we don&#39;t interfere with the segment calculations</span>
            <span class="n">segment</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_donut_segment</span><span class="p">(</span>
                <span class="n">svg</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">level_color</span><span class="p">,</span> <span class="n">achievement</span><span class="o">.</span><span class="n">level</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.generate_donut_segment_for_element" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_donut_segment_for_element</span><span class="p">(</span><span class="n">svg</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">learner</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">ringspec</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>generate a donut segment for a given element of
the CompetenceTree</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_donut_segment_for_element</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span><span class="p">,</span>
    <span class="n">element</span><span class="p">:</span> <span class="n">CompetenceElement</span><span class="p">,</span>
    <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span><span class="p">,</span>
    <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
    <span class="n">ringspec</span><span class="p">:</span> <span class="n">RingSpec</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DonutSegment</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    generate a donut segment for a given element of</span>
<span class="sd">    the CompetenceTree</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">segment</span><span class="o">.</span><span class="n">outer_radius</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">segment</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Simply create the donut segment without considering the achievement</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_donut_segment</span><span class="p">(</span>
            <span class="n">svg</span><span class="o">=</span><span class="n">svg</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="n">element</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">segment</span><span class="p">,</span> <span class="n">ringspec</span><span class="o">=</span><span class="n">ringspec</span>
        <span class="p">)</span>
        <span class="c1"># check learner achievements</span>
        <span class="k">if</span> <span class="n">learner</span><span class="p">:</span>
            <span class="n">_learner_segment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_donut_segment_for_achievement</span><span class="p">(</span>
                <span class="n">svg</span><span class="o">=</span><span class="n">svg</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="n">learner</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="n">element</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">segment</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.generate_pie_elements_for_segments" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_pie_elements_for_segments</span><span class="p">(</span><span class="n">svg</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">learner</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Generate pie elements for the competence tree using pre-calculated segments.</p>
<p>This method will iterate through the provided segments dictionary, using each pre-calculated
DonutSegment to generate and render pie elements (e.g., aspects, areas, or facets) based on
the learner's achievements.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>svg</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.SVG" href="#dcm.svg.SVG">SVG</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SVG object where the pie elements will be drawn.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ct</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceTree" href="#dcm.dcm_core.CompetenceTree">CompetenceTree</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The competence tree structure.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>segments</code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Dict">Dict</span>[str, <a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A nested dictionary where the first key is the
                                           level name (e.g., 'aspect', 'area', 'facet'),
                                           and the second key is an element's path, mapping
                                           to its corresponding DonutSegment.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>learner</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.Learner" href="#dcm.dcm_core.Learner">Learner</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The learner object containing achievement data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_pie_elements_for_segments</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span><span class="p">,</span>
    <span class="n">ct</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">,</span>
    <span class="n">segments</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DonutSegment</span><span class="p">]],</span>
    <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate pie elements for the competence tree using pre-calculated segments.</span>

<span class="sd">    This method will iterate through the provided segments dictionary, using each pre-calculated</span>
<span class="sd">    DonutSegment to generate and render pie elements (e.g., aspects, areas, or facets) based on</span>
<span class="sd">    the learner&#39;s achievements.</span>

<span class="sd">    Args:</span>
<span class="sd">        svg (SVG): The SVG object where the pie elements will be drawn.</span>
<span class="sd">        ct (CompetenceTree): The competence tree structure.</span>
<span class="sd">        segments (Dict[str, Dict[str, DonutSegment]]): A nested dictionary where the first key is the</span>
<span class="sd">                                                       level name (e.g., &#39;aspect&#39;, &#39;area&#39;, &#39;facet&#39;),</span>
<span class="sd">                                                       and the second key is an element&#39;s path, mapping</span>
<span class="sd">                                                       to its corresponding DonutSegment.</span>
<span class="sd">        learner (Learner): The learner object containing achievement data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">level_name</span><span class="p">,</span> <span class="n">segment_dict</span> <span class="ow">in</span> <span class="n">segments</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">ringspec</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="n">level_name</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segment_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">elements_by_path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">element</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">generate_donut_segment_for_element</span><span class="p">(</span>
                    <span class="n">svg</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">learner</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">segment</span><span class="p">,</span> <span class="n">ringspec</span><span class="o">=</span><span class="n">ringspec</span>
                <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.generate_svg" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_svg</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">text_mode</span><span class="o">=</span><span class="s1">&#39;empty&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Generate the SVG markup and optionally save it to a file. If a filename is given, the method
will also save the SVG to that file. The SVG is generated based on internal state not shown here.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>filename</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the file where the SVG should be saved. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>learner(Learner)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the learner to show the achievements for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>config</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGConfig" href="#dcm.svg.SVGConfig">SVGConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configuration for the SVG canvas and legend. Defaults to default values.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>text_mode(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>text display mode</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns:
    str: The SVG markup.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_svg</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">learner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Learner</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SVGConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">text_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;empty&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate the SVG markup and optionally save it to a file. If a filename is given, the method</span>
<span class="sd">    will also save the SVG to that file. The SVG is generated based on internal state not shown here.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str, optional): The path to the file where the SVG should be saved. Defaults to None.</span>
<span class="sd">        learner(Learner): the learner to show the achievements for</span>
<span class="sd">        config (SVGConfig, optional): The configuration for the SVG canvas and legend. Defaults to default values.</span>
<span class="sd">        text_mode(str): text display mode</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: The SVG markup.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">SVGConfig</span><span class="p">(</span>
            <span class="n">with_popup</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>  <span class="c1"># Use default configuration if none provided</span>
    <span class="n">svg_markup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_svg_markup</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span><span class="p">,</span>
        <span class="n">learner</span><span class="o">=</span><span class="n">learner</span><span class="p">,</span>
        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
        <span class="n">text_mode</span><span class="o">=</span><span class="n">text_mode</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_svg_to_file</span><span class="p">(</span><span class="n">svg_markup</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">svg_markup</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.generate_svg_markup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_svg_markup</span><span class="p">(</span><span class="n">competence_tree</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selected_paths</span><span class="o">=</span><span class="p">[],</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">with_java_script</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text_mode</span><span class="o">=</span><span class="s1">&#39;empty&#39;</span><span class="p">,</span> <span class="n">lookup_url</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Generate the SVG markup for the given CompetenceTree and Learner. This method
creates an SVG representation of the competence map, which visualizes the
structure and levels of competencies, along with highlighting the learner's
achievements if provided.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>competence_tree</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceTree" href="#dcm.dcm_core.CompetenceTree">CompetenceTree</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The competence tree structure
to be visualized. If None, the competence tree of the DcmChart instance
will be used. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>learner</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.Learner" href="#dcm.dcm_core.Learner">Learner</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The learner whose achievements are to be
visualized on the competence tree. If None, no learner-specific
information will be included in the SVG. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>selected_paths</code></td>
            <td>
                  <code><span title="typing.List">List</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of paths that should be highlighted
in the SVG. These paths typically represent specific competencies or
achievements. Defaults to an empty list.</p>
              </div>
            </td>
            <td>
                  <code>[]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>config</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGConfig" href="#dcm.svg.SVGConfig">SVGConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration for the SVG canvas and legend.
If None, default configuration settings are used. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>text_mode(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>text display mode</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>with_java_script</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indicates whether to include JavaScript
in the SVG for interactivity. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>lookup_url</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Base URL for linking to detailed descriptions
or information about the competence elements. If not provided, links
will not be generated. Defaults to an empty string.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string containing the SVG markup for the competence map.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there are inconsistencies or issues with the provided data
that prevent the creation of a valid SVG.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_svg_markup</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">competence_tree</span><span class="p">:</span> <span class="n">CompetenceTree</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">selected_paths</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">SVGConfig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">with_java_script</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">text_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;empty&quot;</span><span class="p">,</span>
    <span class="n">lookup_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate the SVG markup for the given CompetenceTree and Learner. This method</span>
<span class="sd">    creates an SVG representation of the competence map, which visualizes the</span>
<span class="sd">    structure and levels of competencies, along with highlighting the learner&#39;s</span>
<span class="sd">    achievements if provided.</span>

<span class="sd">    Args:</span>
<span class="sd">        competence_tree (CompetenceTree, optional): The competence tree structure</span>
<span class="sd">            to be visualized. If None, the competence tree of the DcmChart instance</span>
<span class="sd">            will be used. Defaults to None.</span>
<span class="sd">        learner (Learner, optional): The learner whose achievements are to be</span>
<span class="sd">            visualized on the competence tree. If None, no learner-specific</span>
<span class="sd">            information will be included in the SVG. Defaults to None.</span>
<span class="sd">        selected_paths (List, optional): A list of paths that should be highlighted</span>
<span class="sd">            in the SVG. These paths typically represent specific competencies or</span>
<span class="sd">            achievements. Defaults to an empty list.</span>
<span class="sd">        config (SVGConfig, optional): Configuration for the SVG canvas and legend.</span>
<span class="sd">            If None, default configuration settings are used. Defaults to None.</span>
<span class="sd">        text_mode(str): text display mode</span>
<span class="sd">        with_java_script (bool, optional): Indicates whether to include JavaScript</span>
<span class="sd">            in the SVG for interactivity. Defaults to True.</span>
<span class="sd">        lookup_url (str, optional): Base URL for linking to detailed descriptions</span>
<span class="sd">            or information about the competence elements. If not provided, links</span>
<span class="sd">            will not be generated. Defaults to an empty string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A string containing the SVG markup for the competence map.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If there are inconsistencies or issues with the provided data</span>
<span class="sd">            that prevent the creation of a valid SVG.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">competence_tree</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">competence_tree</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">selected_paths</span> <span class="o">=</span> <span class="n">selected_paths</span>

    <span class="n">competence_tree</span><span class="o">.</span><span class="n">calculate_ring_specs</span><span class="p">(</span><span class="n">text_mode</span><span class="p">)</span>
    <span class="n">svg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_and_add_inner_circle</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">competence_tree</span><span class="p">,</span> <span class="n">lookup_url</span><span class="p">)</span>

    <span class="n">segment</span> <span class="o">=</span> <span class="n">DonutSegment</span><span class="p">(</span>
        <span class="n">cx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span> <span class="n">inner_radius</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">outer_radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree_radius</span>
    <span class="p">)</span>
    <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_segments</span><span class="p">(</span><span class="n">competence_tree</span><span class="p">,</span> <span class="n">segment</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">generate_pie_elements_for_segments</span><span class="p">(</span>
        <span class="n">svg</span><span class="o">=</span><span class="n">svg</span><span class="p">,</span> <span class="n">ct</span><span class="o">=</span><span class="n">competence_tree</span><span class="p">,</span> <span class="n">segments</span><span class="o">=</span><span class="n">segments</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="n">learner</span>
    <span class="p">)</span>
    <span class="c1"># self.generate_pie_elements(</span>
    <span class="c1">#    level=1,</span>
    <span class="c1">#    svg=svg,</span>
    <span class="c1">#    ct=competence_tree,</span>
    <span class="c1">#    parent_element=competence_tree,</span>
    <span class="c1">#    learner=learner,</span>
    <span class="c1">#    segment=segment,</span>
    <span class="c1"># )</span>
    <span class="k">if</span> <span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">legend_height</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">competence_tree</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span><span class="n">svg</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">svg</span><span class="o">.</span><span class="n">get_svg_markup</span><span class="p">(</span><span class="n">with_java_script</span><span class="o">=</span><span class="n">with_java_script</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.get_element_config" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_element_config</span><span class="p">(</span><span class="n">element</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get a configuration for the given element</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>element(CompetenceElement)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the element</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="return" open>
  <summary>Return</summary>
  <p>SVGNodeConfig: an SVG Node configuration</p>
</details>
            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_element_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">:</span> <span class="n">CompetenceElement</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SVGNodeConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get a configuration for the given element</span>

<span class="sd">    Args:</span>
<span class="sd">        element(CompetenceElement): the element</span>

<span class="sd">    Return:</span>
<span class="sd">        SVGNodeConfig: an SVG Node configuration</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">element</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">element_config</span> <span class="o">=</span> <span class="n">SVGNodeConfig</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">element_config</span>
    <span class="n">element_url</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">element</span><span class="o">.</span><span class="n">url</span>
        <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">url</span>
        <span class="k">else</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lookup_url</span><span class="si">}</span><span class="s2">/description/</span><span class="si">{</span><span class="n">element</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">show_as_popup</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="n">element_config</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">to_svg_node_config</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">element_url</span><span class="p">,</span>
        <span class="n">show_as_popup</span><span class="o">=</span><span class="n">show_as_popup</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">element_config</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.get_stacked_segment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_stacked_segment</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">total_levels</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">element_config</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Calculate the stacked segment for a given level.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>level</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current level for which to calculate the segment.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>total_levels</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The total number of levels.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>segment</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original donut Segment.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>element_config</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGNodeConfig" href="#dcm.svg.SVGNodeConfig">SVGNodeConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The element configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a>, <a class="autorefs autorefs-internal" title="dcm.svg.SVGNodeConfig" href="#dcm.svg.SVGNodeConfig">SVGNodeConfig</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple[DonutSegment, SVGNodeConfig]:
The calculated stacked segment and its configuration for the given level.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_stacked_segment</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">total_levels</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
    <span class="n">element_config</span><span class="p">:</span> <span class="n">SVGNodeConfig</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DonutSegment</span><span class="p">,</span> <span class="n">SVGNodeConfig</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the stacked segment for a given level.</span>

<span class="sd">    Args:</span>
<span class="sd">        level (int): The current level for which to calculate the segment.</span>
<span class="sd">        total_levels (int): The total number of levels.</span>
<span class="sd">        segment (DonutSegment): The original donut Segment.</span>
<span class="sd">        element_config (SVGNodeConfig): The element configuration.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple[DonutSegment, SVGNodeConfig]:</span>
<span class="sd">            The calculated stacked segment and its configuration for the given level.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">level_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">get_level_color</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
    <span class="n">stack_element_config</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">element_config</span><span class="p">)</span>
    <span class="n">stack_element_config</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">level_color</span>
    <span class="n">ratio</span> <span class="o">=</span> <span class="n">level</span> <span class="o">/</span> <span class="n">total_levels</span>
    <span class="n">relative_radius</span> <span class="o">=</span> <span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">outer_radius</span> <span class="o">-</span> <span class="n">segment</span><span class="o">.</span><span class="n">inner_radius</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span>
    <span class="n">stacked_segment</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
    <span class="n">stacked_segment</span><span class="o">.</span><span class="n">outer_radius</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">inner_radius</span> <span class="o">+</span> <span class="n">relative_radius</span>
    <span class="k">return</span> <span class="n">stacked_segment</span><span class="p">,</span> <span class="n">stack_element_config</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.prepare_and_add_inner_circle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">prepare_and_add_inner_circle</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">competence_tree</span><span class="p">,</span> <span class="n">lookup_url</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>prepare the SVG markup generation and add
the inner_circle</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">prepare_and_add_inner_circle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">competence_tree</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">,</span> <span class="n">lookup_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    prepare the SVG markup generation and add</span>
<span class="sd">    the inner_circle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lookup_url</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">competence_tree</span><span class="o">.</span><span class="n">lookup_url</span> <span class="k">if</span> <span class="n">competence_tree</span><span class="o">.</span><span class="n">lookup_url</span> <span class="k">else</span> <span class="n">lookup_url</span>
    <span class="p">)</span>

    <span class="n">svg</span> <span class="o">=</span> <span class="n">SVG</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">svg</span> <span class="o">=</span> <span class="n">svg</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">svg</span><span class="o">.</span><span class="n">config</span>
    <span class="c1"># center of circle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">2</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">=</span> <span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">total_height</span> <span class="o">-</span> <span class="n">config</span><span class="o">.</span><span class="n">legend_height</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
    <span class="n">ringspec</span> <span class="o">=</span> <span class="n">competence_tree</span><span class="o">.</span><span class="n">ring_specs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tree&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tree_radius</span> <span class="o">=</span> <span class="n">ringspec</span><span class="o">.</span><span class="n">outer_ratio</span> <span class="o">*</span> <span class="n">config</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">circle_config</span> <span class="o">=</span> <span class="n">competence_tree</span><span class="o">.</span><span class="n">to_svg_node_config</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree_radius</span>
    <span class="p">)</span>
    <span class="n">svg</span><span class="o">.</span><span class="n">add_circle</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">circle_config</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ringspec</span><span class="o">.</span><span class="n">text_mode</span> <span class="o">!=</span> <span class="s2">&quot;empty&quot;</span><span class="p">:</span>
        <span class="n">svg</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cx</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cy</span><span class="p">,</span>
            <span class="n">competence_tree</span><span class="o">.</span><span class="n">short_name</span><span class="p">,</span>
            <span class="n">text_anchor</span><span class="o">=</span><span class="s2">&quot;middle&quot;</span><span class="p">,</span>
            <span class="n">center_v</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">svg</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_chart.DcmChart.save_svg_to_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_svg_to_file</span><span class="p">(</span><span class="n">svg_markup</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Save the SVG content to a file</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save_svg_to_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">svg_markup</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save the SVG content to a file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">svg_markup</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="dcm.dcm_cmd" class="doc doc-heading">
            <code>dcm_cmd</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2023-11-06</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_cmd.CompetenceCmd" class="doc doc-heading">
            <code>CompetenceCmd</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ngwidgets.cmd.WebserverCmd">WebserverCmd</span></code></p>


      <p>Command line for diagrams server</p>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_cmd.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CompetenceCmd</span><span class="p">(</span><span class="n">WebserverCmd</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Command line for diagrams server</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">getArgParser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version_msg</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ArgumentParser</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        override the default argparser call</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">getArgParser</span><span class="p">(</span><span class="n">description</span><span class="p">,</span> <span class="n">version_msg</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-v&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--verbose&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;show verbose output [default: </span><span class="si">%(default)s</span><span class="s2">]&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-rp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--root_path&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="n">DynamicCompetenceMap</span><span class="o">.</span><span class="n">examples_path</span><span class="p">(),</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;path to example dcm definition files [default: </span><span class="si">%(default)s</span><span class="s2">]&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_cmd.CompetenceCmd.getArgParser" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getArgParser</span><span class="p">(</span><span class="n">description</span><span class="p">,</span> <span class="n">version_msg</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>override the default argparser call</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_cmd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getArgParser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version_msg</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ArgumentParser</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    override the default argparser call</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">getArgParser</span><span class="p">(</span><span class="n">description</span><span class="p">,</span> <span class="n">version_msg</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-v&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--verbose&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;show verbose output [default: </span><span class="si">%(default)s</span><span class="s2">]&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-rp&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--root_path&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">DynamicCompetenceMap</span><span class="o">.</span><span class="n">examples_path</span><span class="p">(),</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;path to example dcm definition files [default: </span><span class="si">%(default)s</span><span class="s2">]&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="dcm.dcm_cmd.main" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>main call</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_cmd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    main call</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="n">CompetenceCmd</span><span class="p">(</span>
        <span class="n">config</span><span class="o">=</span><span class="n">DynamicCompentenceMapWebServer</span><span class="o">.</span><span class="n">get_config</span><span class="p">(),</span>
        <span class="n">webserver_cls</span><span class="o">=</span><span class="n">DynamicCompentenceMapWebServer</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">exit_code</span> <span class="o">=</span> <span class="n">cmd</span><span class="o">.</span><span class="n">cmd_main</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">exit_code</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="dcm.dcm_core" class="doc doc-heading">
            <code>dcm_core</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2023-06-11</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_core.Achievement" class="doc doc-heading">
            <code>Achievement</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


      <p>Class representing an individual's achievement level for a specific competence facet.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.Achievement.path">path</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path in the CompetenceTree, used to derive tree_id, aspect_id, and facet_id.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.Achievement.level">level</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The achieved level for this facet.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.Achievement.score">score</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>How well the achievement was reached.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.Achievement.score_unit">score_unit</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Unit of the score, default is "%".</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.Achievement.evidence">evidence</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional evidence supporting the achievement.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.Achievement.date_assessed">date_assessed</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional date when the achievement was assessed (ISO-Format).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass_json</span>
<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Achievement</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class representing an individual&#39;s achievement level for a specific competence facet.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        path (str): The path in the CompetenceTree, used to derive tree_id, aspect_id, and facet_id.</span>
<span class="sd">        level (int): The achieved level for this facet.</span>
<span class="sd">        score (float): How well the achievement was reached.</span>
<span class="sd">        score_unit (str): Unit of the score, default is &quot;%&quot;.</span>
<span class="sd">        evidence (Optional[str]): Optional evidence supporting the achievement.</span>
<span class="sd">        date_assessed (Optional[str]): Optional date when the achievement was assessed (ISO-Format).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">level</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">score_unit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;%&quot;</span>
    <span class="n">evidence</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">date_assessed_iso</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tree_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">parts</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">aspect_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">area_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">facet_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_core.CompetenceArea" class="doc doc-heading">
            <code>CompetenceArea</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceElement" href="#dcm.dcm_core.CompetenceElement">CompetenceElement</a></code></p>


      <p>Represents a specific area within a competence aspect, containing various facets.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceArea.facets">facets</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceFacet" href="#dcm.dcm_core.CompetenceFacet">CompetenceFacet</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of CompetenceFacet objects representing individual facets of this area.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass_json</span>
<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">CompetenceArea</span><span class="p">(</span><span class="n">CompetenceElement</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a specific area within a competence aspect, containing various facets.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        facets (List[CompetenceFacet]): A list of CompetenceFacet objects representing individual facets of this area.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">facets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">CompetenceFacet</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_core.CompetenceAspect" class="doc doc-heading">
            <code>CompetenceAspect</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceElement" href="#dcm.dcm_core.CompetenceElement">CompetenceElement</a></code></p>


      <p>Represents a broader category of competence, which includes various areas.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceAspect.areas">areas</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceArea" href="#dcm.dcm_core.CompetenceArea">CompetenceArea</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of CompetenceArea objects representing individual areas of this aspect.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass_json</span>
<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">CompetenceAspect</span><span class="p">(</span><span class="n">CompetenceElement</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a broader category of competence, which includes various areas.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        areas (List[CompetenceArea]): A list of CompetenceArea objects representing individual areas of this aspect.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">areas</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">CompetenceArea</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_core.CompetenceElement" class="doc doc-heading">
            <code>CompetenceElement</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


      <p>A base class representing a generic competence element with common properties.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceElement.name">name</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the competence element.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceElement.short_name(Optional[str])">short_name(Optional[str])</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the label to be displayed</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceElement.id">id</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional identifier for the competence element will be set to the name if id is None.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceElement.url">url</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional URL for more information about the competence element.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceElement.description">description</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional description of the competence element.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceElement.color_code">color_code</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string representing a (fill) color code associated with the competence element.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceElement.border_color">border_color</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string representing the border color to be used e.g. "black" or "#ffffff"</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass_json</span>
<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">CompetenceElement</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A base class representing a generic competence element with common properties.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str): The name of the competence element.</span>
<span class="sd">        short_name(Optional[str]): the label to be displayed</span>
<span class="sd">        id (Optional[str]): An optional identifier for the competence element will be set to the name if id is None.</span>
<span class="sd">        url (Optional[str]): An optional URL for more information about the competence element.</span>
<span class="sd">        description (Optional[str]): An optional description of the competence element.</span>
<span class="sd">        color_code (str): A string representing a (fill) color code associated with the competence element.</span>
<span class="sd">        border_color (str): A string representing the border color to be used e.g. &quot;black&quot; or &quot;#ffffff&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">short_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">color_code</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">border_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">time_unit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># h/CP</span>
    <span class="n">max_score</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># 100</span>
    <span class="n">score_unit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># %</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Set the id to the the slug of the name if id is None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># https://pypi.org/project/python-slugify/</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">lowercase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">regex_pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;[^\w\-]&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">short_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">short_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">as_html</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert me to html</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: html markup</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;h2&gt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&lt;/h2&gt;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
            <span class="n">desc_html</span> <span class="o">=</span> <span class="n">markdown2</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="n">extras</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fenced-code-blocks&quot;</span><span class="p">,</span> <span class="s2">&quot;tables&quot;</span><span class="p">,</span> <span class="s2">&quot;spoiler&quot;</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">html</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">desc_html</span>
        <span class="k">return</span> <span class="n">html</span>

    <span class="k">def</span> <span class="nf">to_svg_node_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SVGNodeConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert me to an SVGNode Configuration</span>

<span class="sd">        Args:</span>
<span class="sd">            url(str): the url to use for clicking this svg node - if None use</span>
<span class="sd">            my configured url</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>
        <span class="n">element_type</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">element_type</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">svg_node_config</span> <span class="o">=</span> <span class="n">SVGNodeConfig</span><span class="p">(</span>
            <span class="n">element_type</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">element_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">fill</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">color_code</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">border_color</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">svg_node_config</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.CompetenceElement.as_html" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">as_html</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>convert me to html</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>html markup</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">as_html</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert me to html</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: html markup</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;h2&gt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&lt;/h2&gt;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
        <span class="n">desc_html</span> <span class="o">=</span> <span class="n">markdown2</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="n">extras</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fenced-code-blocks&quot;</span><span class="p">,</span> <span class="s2">&quot;tables&quot;</span><span class="p">,</span> <span class="s2">&quot;spoiler&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">html</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">desc_html</span>
    <span class="k">return</span> <span class="n">html</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.CompetenceElement.to_svg_node_config" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_svg_node_config</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>convert me to an SVGNode Configuration</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>url(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the url to use for clicking this svg node - if None use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_svg_node_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SVGNodeConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert me to an SVGNode Configuration</span>

<span class="sd">    Args:</span>
<span class="sd">        url(str): the url to use for clicking this svg node - if None use</span>
<span class="sd">        my configured url</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>
    <span class="n">element_type</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">comment</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">element_type</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">svg_node_config</span> <span class="o">=</span> <span class="n">SVGNodeConfig</span><span class="p">(</span>
        <span class="n">element_type</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">element_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="nb">id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
        <span class="n">fill</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">color_code</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">border_color</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">svg_node_config</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_core.CompetenceFacet" class="doc doc-heading">
            <code>CompetenceFacet</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceElement" href="#dcm.dcm_core.CompetenceElement">CompetenceElement</a></code></p>


      <p>Represents a specific facet of a competence aspect, inheriting from CompetenceElement.</p>
<p>This class can include additional properties or methods specific to a competence facet.</p>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass_json</span>
<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">CompetenceFacet</span><span class="p">(</span><span class="n">CompetenceElement</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a specific facet of a competence aspect, inheriting from CompetenceElement.</span>

<span class="sd">    This class can include additional properties or methods specific to a competence facet.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_core.CompetenceLevel" class="doc doc-heading">
            <code>CompetenceLevel</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceElement" href="#dcm.dcm_core.CompetenceElement">CompetenceElement</a></code></p>


      <p>Defines a specific level of competence within the framework.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceLevel.level">level</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>level number starting from 1 as the lowest and going up to as many level as defined for the CompetenceTree</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceLevel.icon(str)">icon(str)</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name of a google mdi icon to be shown for this level</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceLevel.utf8_icon(str)">utf8_icon(str)</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>utf-8 char string to be used as icon</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass_json</span>
<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">CompetenceLevel</span><span class="p">(</span><span class="n">CompetenceElement</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Defines a specific level of competence within the framework.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        level (int): level number starting from 1 as the lowest and going up to as many level as defined for the CompetenceTree</span>
<span class="sd">        icon(str): the name of a google mdi icon to be shown for this level</span>
<span class="sd">        utf8_icon(str): utf-8 char string to be used as icon</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">icon</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">utf8_icon</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_core.CompetenceTree" class="doc doc-heading">
            <code>CompetenceTree</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceElement" href="#dcm.dcm_core.CompetenceElement">CompetenceElement</a></code>, <code><span title="ngwidgets.yamlable.YamlAble">YamlAble</span>[&#39;CompetenceTree&#39;]</code></p>


      <p>Represents the entire structure of competencies, including various aspects and levels.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceTree.lookup_url">lookup_url</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional URL for additional information.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceTree.total_levels">total_levels</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Total number of levels in the competence hierarchy.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceTree.stacked_levels">stacked_levels</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indicates whether the levels are stacked.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceTree.aspects">aspects</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceAspect" href="#dcm.dcm_core.CompetenceAspect">CompetenceAspect</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of CompetenceAspect objects.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceTree.levels">levels</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="dcm.dcm_core.CompetenceLevel" href="#dcm.dcm_core.CompetenceLevel">CompetenceLevel</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of CompetenceLevel objects.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceTree.element_names">element_names</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary holding the names for tree, aspects, facets, and levels.  The key is the type ("tree", "aspect", "facet", "level").</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceTree.ring_specs">ring_specs</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <a class="autorefs autorefs-internal" title="dcm.dcm_core.RingSpec" href="#dcm.dcm_core.RingSpec">RingSpec</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Specifications for the rings in the donut chart.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.CompetenceTree.total_elements">total_elements</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary holding the total number of elements for each type (aspects, areas, facets).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass_json</span>
<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">CompetenceTree</span><span class="p">(</span><span class="n">CompetenceElement</span><span class="p">,</span> <span class="n">YamlAble</span><span class="p">[</span><span class="s2">&quot;CompetenceTree&quot;</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the entire structure of competencies, including various aspects and levels.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        lookup_url (Optional[str]): Optional URL for additional information.</span>
<span class="sd">        total_levels (int): Total number of levels in the competence hierarchy.</span>
<span class="sd">        stacked_levels (Optional[bool]): Indicates whether the levels are stacked.</span>
<span class="sd">        aspects (List[CompetenceAspect]): A list of CompetenceAspect objects.</span>
<span class="sd">        levels (List[CompetenceLevel]): A list of CompetenceLevel objects.</span>
<span class="sd">        element_names (Dict[str, str]): A dictionary holding the names for tree, aspects, facets, and levels.  The key is the type (&quot;tree&quot;, &quot;aspect&quot;, &quot;facet&quot;, &quot;level&quot;).</span>
<span class="sd">        ring_specs (Dict[str, RingSpec]): Specifications for the rings in the donut chart.</span>
<span class="sd">        total_elements (Dict[str, int]): A dictionary holding the total number of elements for each type (aspects, areas, facets).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">lookup_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">total_levels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">stacked_levels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">aspects</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">CompetenceAspect</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">levels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">CompetenceLevel</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">element_names</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">ring_specs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">RingSpec</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">total_elements</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        initalize the path variables of my hierarchy</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__post_init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_paths</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calculate_ring_specs</span><span class="p">(</span><span class="s2">&quot;empty&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">calculate_ring_specs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text_mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        calculate the ring specifications</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">inner_ratio</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">circle_ratio</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_levels</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">outer_ratio</span> <span class="o">=</span> <span class="n">circle_ratio</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;tree&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="s2">&quot;tree&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">RingSpec</span><span class="p">(</span>
                <span class="n">text_mode</span><span class="o">=</span><span class="n">text_mode</span><span class="p">,</span> <span class="n">inner_ratio</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">outer_ratio</span><span class="o">=</span><span class="n">circle_ratio</span>
            <span class="p">)</span>
        <span class="c1"># loop over ring levels</span>
        <span class="k">for</span> <span class="n">rl</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">]:</span>
            <span class="n">inner_ratio</span> <span class="o">=</span> <span class="n">outer_ratio</span>
            <span class="n">outer_ratio</span> <span class="o">=</span> <span class="n">outer_ratio</span> <span class="o">+</span> <span class="n">circle_ratio</span> <span class="o">*</span> <span class="mi">2</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">rl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="n">rl</span><span class="p">]</span> <span class="o">=</span> <span class="n">RingSpec</span><span class="p">(</span>
                    <span class="n">text_mode</span><span class="o">=</span><span class="n">text_mode</span><span class="p">,</span>
                    <span class="n">inner_ratio</span><span class="o">=</span><span class="n">inner_ratio</span><span class="p">,</span>
                    <span class="n">outer_ratio</span><span class="o">=</span><span class="n">outer_ratio</span><span class="p">,</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_symmetry_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">symmetry_level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">symmetry_mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         Sets a new symmetry mode for a specified level</span>
<span class="sd">         in the competence tree. It resets the symmetry</span>
<span class="sd">         mode for all levels to None and then</span>
<span class="sd">         applies the new symmetry mode to the</span>
<span class="sd">         specified level. This method ensures that</span>
<span class="sd">         only one level has a symmetry mode set at any given time.</span>

<span class="sd">        Args:</span>
<span class="sd">            symmetry_level(str): The level to apply the new symmetry mode. Valid levels include &quot;tree&quot;, &quot;aspect&quot;, &quot;area&quot;, and &quot;facet&quot;.</span>
<span class="sd">            symmetry_mode (str): The symmetry mode to set for the specified level. Valid modes are &quot;count&quot;, &quot;score&quot;, and &quot;time&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># reset all ring specs</span>
        <span class="k">for</span> <span class="n">rl</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;tree&quot;</span><span class="p">,</span> <span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="n">rl</span><span class="p">]</span><span class="o">.</span><span class="n">symmetry_mode</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">symmetry_level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="n">symmetry_level</span><span class="p">]</span><span class="o">.</span><span class="n">symmetry_mode</span> <span class="o">=</span> <span class="n">symmetry_mode</span>

    <span class="k">def</span> <span class="nf">get_symmetry_spec</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the symmetry specification from the ring_specs, ensuring only one spec has the symmetry mode set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple[str, str]: A pair of symmetry mode and the level it is applied to.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If multiple RingSpecs have a symmetry mode set.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">symmetry_modes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">spec</span><span class="o">.</span><span class="n">symmetry_mode</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">level</span><span class="p">,</span> <span class="n">spec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">spec</span><span class="o">.</span><span class="n">symmetry_mode</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">symmetry_modes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Symmetry mode set for multiple ring specs.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">symmetry_modes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">level</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="n">symmetry_modes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Default to &quot;count&quot; and CompetenceFacet level if no spec is given</span>
            <span class="n">level</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;facet&quot;</span><span class="p">,</span> <span class="s2">&quot;count&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid symmetry mode </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2"> - must be count, score or time&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_elements_for_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">CompetenceElement</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the elements for the given hierarchy level</span>

<span class="sd">        Args:</span>
<span class="sd">            level(int): the hierarchy level</span>

<span class="sd">        Returns:</span>
<span class="sd">            List(CompetencElement): the list of elements on this level</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">level_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">level_names</span><span class="p">[</span><span class="n">level</span><span class="p">]</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_level</span><span class="p">[</span><span class="n">level_name</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">elements</span>

    <span class="k">def</span> <span class="nf">update_paths</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        update my paths</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;tree&quot;</span><span class="p">,</span> <span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level_attr_names</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;aspects&quot;</span><span class="p">,</span> <span class="s2">&quot;areas&quot;</span><span class="p">,</span> <span class="s2">&quot;facets&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;tree&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;aspects&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;areas&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;facets&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_level</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;tree&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="p">],</span>
            <span class="s2">&quot;aspect&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">&quot;facet&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="p">}</span>  <span class="c1"># Reset for re-calculation</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_levels</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_path</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">:</span> <span class="bp">self</span><span class="p">}</span>
        <span class="c1"># Loop through each competence aspect and set their paths and parent references</span>
        <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects</span><span class="p">:</span>
            <span class="n">aspect</span><span class="o">.</span><span class="n">competence_tree</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="n">aspect</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">aspect</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">[</span><span class="n">aspect</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">aspect</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span><span class="p">[</span><span class="s2">&quot;aspects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span><span class="p">[</span><span class="s2">&quot;aspects&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_levels</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_level</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">aspect</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="n">aspect</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">total_levels</span> <span class="o">=</span> <span class="mi">3</span>
                <span class="n">area</span><span class="o">.</span><span class="n">competence_tree</span> <span class="o">=</span> <span class="bp">self</span>
                <span class="n">area</span><span class="o">.</span><span class="n">aspect</span> <span class="o">=</span> <span class="n">aspect</span>
                <span class="n">area</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">aspect</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">area</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">[</span><span class="n">area</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">area</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span><span class="p">[</span><span class="s2">&quot;areas&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span><span class="p">[</span><span class="s2">&quot;areas&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_level</span><span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">area</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">facet</span> <span class="ow">in</span> <span class="n">area</span><span class="o">.</span><span class="n">facets</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">total_levels</span> <span class="o">=</span> <span class="mi">4</span>
                    <span class="n">facet</span><span class="o">.</span><span class="n">competence_tree</span> <span class="o">=</span> <span class="bp">self</span>
                    <span class="n">facet</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="n">area</span>
                    <span class="n">facet</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">aspect</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">area</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">facet</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">[</span><span class="n">facet</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">facet</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span><span class="p">[</span><span class="s2">&quot;facets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span><span class="p">[</span><span class="s2">&quot;facets&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_level</span><span class="p">[</span><span class="s2">&quot;facet&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">facet</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">required_keys</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">:</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;aspects&quot;</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">keys</span>

    <span class="k">def</span> <span class="nf">lookup_by_path</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">CompetenceElement</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Look up and return a competence element (tree,aspect of facet)</span>
<span class="sd">        based on the given path.</span>

<span class="sd">        The path is expected to be in the format &quot;tree_id/aspect_id/facet_id&quot;.</span>
<span class="sd">        This method parses the path and retrieves the corresponding competence aspect or facet.</span>

<span class="sd">        Args:</span>
<span class="sd">            path (str): The path in the format &quot;tree_id/aspect_id/facet_id&quot;.</span>

<span class="sd">            lenient(bool): if not lenient raise Exceptions for invalid paths and ids</span>
<span class="sd">        Returns:</span>
<span class="sd">            Optional[CompetenceElement]: The competence aspect or facet corresponding to the given path.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">handle_error</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">lenient</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="n">element</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;invalid path </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">lenient</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">element</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">total_valid_levels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the total number of levels excluding</span>
<span class="sd">        levels with a level of 0.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The total number of valid levels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">level_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">([</span><span class="n">level</span> <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span> <span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">level</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">level_count</span>

    <span class="k">def</span> <span class="nf">get_level_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">achievement_level</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the color associated with a specific achievement level.</span>

<span class="sd">        Args:</span>
<span class="sd">            achievement_level (int): The level of achievement to get the color for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[str]: The color code associated with the given level, or None if not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">level</span> <span class="o">==</span> <span class="n">achievement_level</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">level</span><span class="o">.</span><span class="n">color_code</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">to_pretty_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the CompetenceTree object to a pretty JSON string, handling null values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">json_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
        <span class="n">json_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">remove_none_values</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Recursively removes keys with None values from a dictionary, list, or nested structure.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="n">k</span><span class="p">:</span> <span class="n">remove_none_values</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="p">}</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">remove_none_values</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">data</span>

        <span class="n">none_free_dict</span> <span class="o">=</span> <span class="n">remove_none_values</span><span class="p">(</span><span class="n">json_dict</span><span class="p">)</span>
        <span class="n">null_free_json_str</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">none_free_dict</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">null_free_json_str</span>

    <span class="k">def</span> <span class="nf">add_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a legend to the SVG explaining the color codes for levels and aspects.</span>
<span class="sd">        Args:</span>
<span class="sd">            svg (SVG): The SVG object to which the legend will be added.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Starting x position for the legends, starting 10 pixels from the left edge</span>
        <span class="n">x_start</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="c1"># y position for the legends, starting 20 pixels from the bottom edge</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">total_height</span> <span class="o">-</span> <span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">legend_height</span> <span class="o">+</span> <span class="mi">20</span>
        <span class="c1"># Width and height of each legend color box</span>
        <span class="n">box_width</span><span class="p">,</span> <span class="n">box_height</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">20</span>
        <span class="c1"># Padding between legend items and between the color box and the text</span>
        <span class="n">padding</span> <span class="o">=</span> <span class="mi">5</span>

        <span class="c1"># Add the competence level legend</span>
        <span class="n">level_items</span> <span class="o">=</span> <span class="p">[(</span><span class="n">level</span><span class="o">.</span><span class="n">color_code</span><span class="p">,</span> <span class="n">level</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">]</span>
        <span class="n">svg</span><span class="o">.</span><span class="n">add_legend_column</span><span class="p">(</span>
            <span class="n">level_items</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">element_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;level&quot;</span><span class="p">,</span> <span class="s2">&quot;Level&quot;</span><span class="p">),</span>
            <span class="n">x_start</span><span class="p">,</span>
            <span class="n">y</span><span class="p">,</span>
            <span class="n">box_width</span><span class="p">,</span>
            <span class="n">box_height</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">max_name_width</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">:</span>
            <span class="n">max_name_width</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
                <span class="n">svg</span><span class="o">.</span><span class="n">get_text_width</span><span class="p">(</span><span class="n">level</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span>
            <span class="p">)</span>
        <span class="c1"># Calculate the x position for the aspect legend based on the width of the level legend</span>
        <span class="n">x_aspect_start</span> <span class="o">=</span> <span class="n">x_start</span> <span class="o">+</span> <span class="n">box_width</span> <span class="o">+</span> <span class="n">padding</span> <span class="o">+</span> <span class="n">max_name_width</span> <span class="o">+</span> <span class="n">padding</span>

        <span class="c1"># Add the competence aspect legend</span>
        <span class="n">aspect_items</span> <span class="o">=</span> <span class="p">[(</span><span class="n">aspect</span><span class="o">.</span><span class="n">color_code</span><span class="p">,</span> <span class="n">aspect</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects</span><span class="p">]</span>
        <span class="n">svg</span><span class="o">.</span><span class="n">add_legend_column</span><span class="p">(</span>
            <span class="n">aspect_items</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">element_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;Aspect&quot;</span><span class="p">),</span>
            <span class="n">x_aspect_start</span><span class="p">,</span>
            <span class="n">y</span><span class="p">,</span>
            <span class="n">box_width</span><span class="p">,</span>
            <span class="n">box_height</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="dcm.dcm_core.CompetenceTree.total_valid_levels" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">total_valid_levels</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Calculate the total number of levels excluding
levels with a level of 0.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The total number of valid levels.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.CompetenceTree.__post_init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__post_init__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>initalize the path variables of my hierarchy</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    initalize the path variables of my hierarchy</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__post_init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_paths</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">calculate_ring_specs</span><span class="p">(</span><span class="s2">&quot;empty&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.CompetenceTree.add_legend" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_legend</span><span class="p">(</span><span class="n">svg</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add a legend to the SVG explaining the color codes for levels and aspects.
Args:
    svg (SVG): The SVG object to which the legend will be added.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a legend to the SVG explaining the color codes for levels and aspects.</span>
<span class="sd">    Args:</span>
<span class="sd">        svg (SVG): The SVG object to which the legend will be added.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Starting x position for the legends, starting 10 pixels from the left edge</span>
    <span class="n">x_start</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="c1"># y position for the legends, starting 20 pixels from the bottom edge</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">total_height</span> <span class="o">-</span> <span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">legend_height</span> <span class="o">+</span> <span class="mi">20</span>
    <span class="c1"># Width and height of each legend color box</span>
    <span class="n">box_width</span><span class="p">,</span> <span class="n">box_height</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">20</span>
    <span class="c1"># Padding between legend items and between the color box and the text</span>
    <span class="n">padding</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="c1"># Add the competence level legend</span>
    <span class="n">level_items</span> <span class="o">=</span> <span class="p">[(</span><span class="n">level</span><span class="o">.</span><span class="n">color_code</span><span class="p">,</span> <span class="n">level</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">]</span>
    <span class="n">svg</span><span class="o">.</span><span class="n">add_legend_column</span><span class="p">(</span>
        <span class="n">level_items</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;level&quot;</span><span class="p">,</span> <span class="s2">&quot;Level&quot;</span><span class="p">),</span>
        <span class="n">x_start</span><span class="p">,</span>
        <span class="n">y</span><span class="p">,</span>
        <span class="n">box_width</span><span class="p">,</span>
        <span class="n">box_height</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">max_name_width</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">:</span>
        <span class="n">max_name_width</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
            <span class="n">svg</span><span class="o">.</span><span class="n">get_text_width</span><span class="p">(</span><span class="n">level</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span>
        <span class="p">)</span>
    <span class="c1"># Calculate the x position for the aspect legend based on the width of the level legend</span>
    <span class="n">x_aspect_start</span> <span class="o">=</span> <span class="n">x_start</span> <span class="o">+</span> <span class="n">box_width</span> <span class="o">+</span> <span class="n">padding</span> <span class="o">+</span> <span class="n">max_name_width</span> <span class="o">+</span> <span class="n">padding</span>

    <span class="c1"># Add the competence aspect legend</span>
    <span class="n">aspect_items</span> <span class="o">=</span> <span class="p">[(</span><span class="n">aspect</span><span class="o">.</span><span class="n">color_code</span><span class="p">,</span> <span class="n">aspect</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects</span><span class="p">]</span>
    <span class="n">svg</span><span class="o">.</span><span class="n">add_legend_column</span><span class="p">(</span>
        <span class="n">aspect_items</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;Aspect&quot;</span><span class="p">),</span>
        <span class="n">x_aspect_start</span><span class="p">,</span>
        <span class="n">y</span><span class="p">,</span>
        <span class="n">box_width</span><span class="p">,</span>
        <span class="n">box_height</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.CompetenceTree.calculate_ring_specs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_ring_specs</span><span class="p">(</span><span class="n">text_mode</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>calculate the ring specifications</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calculate_ring_specs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text_mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    calculate the ring specifications</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">inner_ratio</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">circle_ratio</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total_levels</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">outer_ratio</span> <span class="o">=</span> <span class="n">circle_ratio</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;tree&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="s2">&quot;tree&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">RingSpec</span><span class="p">(</span>
            <span class="n">text_mode</span><span class="o">=</span><span class="n">text_mode</span><span class="p">,</span> <span class="n">inner_ratio</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">outer_ratio</span><span class="o">=</span><span class="n">circle_ratio</span>
        <span class="p">)</span>
    <span class="c1"># loop over ring levels</span>
    <span class="k">for</span> <span class="n">rl</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">]:</span>
        <span class="n">inner_ratio</span> <span class="o">=</span> <span class="n">outer_ratio</span>
        <span class="n">outer_ratio</span> <span class="o">=</span> <span class="n">outer_ratio</span> <span class="o">+</span> <span class="n">circle_ratio</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">rl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="n">rl</span><span class="p">]</span> <span class="o">=</span> <span class="n">RingSpec</span><span class="p">(</span>
                <span class="n">text_mode</span><span class="o">=</span><span class="n">text_mode</span><span class="p">,</span>
                <span class="n">inner_ratio</span><span class="o">=</span><span class="n">inner_ratio</span><span class="p">,</span>
                <span class="n">outer_ratio</span><span class="o">=</span><span class="n">outer_ratio</span><span class="p">,</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.CompetenceTree.get_elements_for_level" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_elements_for_level</span><span class="p">(</span><span class="n">level</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the elements for the given hierarchy level</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>level(int)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the hierarchy level</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>List</code></td>            <td>
                  <code>CompetencElement</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of elements on this level</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_elements_for_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">CompetenceElement</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the elements for the given hierarchy level</span>

<span class="sd">    Args:</span>
<span class="sd">        level(int): the hierarchy level</span>

<span class="sd">    Returns:</span>
<span class="sd">        List(CompetencElement): the list of elements on this level</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">level_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">level_names</span><span class="p">[</span><span class="n">level</span><span class="p">]</span>
    <span class="n">elements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_level</span><span class="p">[</span><span class="n">level_name</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">elements</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.CompetenceTree.get_level_color" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_level_color</span><span class="p">(</span><span class="n">achievement_level</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Retrieve the color associated with a specific achievement level.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>achievement_level</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The level of achievement to get the color for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[str]: The color code associated with the given level, or None if not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_level_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">achievement_level</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve the color associated with a specific achievement level.</span>

<span class="sd">    Args:</span>
<span class="sd">        achievement_level (int): The level of achievement to get the color for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[str]: The color code associated with the given level, or None if not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">level</span> <span class="o">==</span> <span class="n">achievement_level</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">level</span><span class="o">.</span><span class="n">color_code</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.CompetenceTree.get_symmetry_spec" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_symmetry_spec</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Get the symmetry specification from the ring_specs, ensuring only one spec has the symmetry mode set.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[str, str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple[str, str]: A pair of symmetry mode and the level it is applied to.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If multiple RingSpecs have a symmetry mode set.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_symmetry_spec</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the symmetry specification from the ring_specs, ensuring only one spec has the symmetry mode set.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple[str, str]: A pair of symmetry mode and the level it is applied to.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If multiple RingSpecs have a symmetry mode set.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">symmetry_modes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">spec</span><span class="o">.</span><span class="n">symmetry_mode</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">level</span><span class="p">,</span> <span class="n">spec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">spec</span><span class="o">.</span><span class="n">symmetry_mode</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">symmetry_modes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Symmetry mode set for multiple ring specs.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">symmetry_modes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">level</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="n">symmetry_modes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Default to &quot;count&quot; and CompetenceFacet level if no spec is given</span>
        <span class="n">level</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;facet&quot;</span><span class="p">,</span> <span class="s2">&quot;count&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid symmetry mode </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2"> - must be count, score or time&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.CompetenceTree.lookup_by_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">lookup_by_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Look up and return a competence element (tree,aspect of facet)
based on the given path.</p>
<p>The path is expected to be in the format "tree_id/aspect_id/facet_id".
This method parses the path and retrieves the corresponding competence aspect or facet.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>path</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path in the format "tree_id/aspect_id/facet_id".</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>lenient(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if not lenient raise Exceptions for invalid paths and ids</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns:
    Optional[CompetenceElement]: The competence aspect or facet corresponding to the given path.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">lookup_by_path</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">CompetenceElement</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Look up and return a competence element (tree,aspect of facet)</span>
<span class="sd">    based on the given path.</span>

<span class="sd">    The path is expected to be in the format &quot;tree_id/aspect_id/facet_id&quot;.</span>
<span class="sd">    This method parses the path and retrieves the corresponding competence aspect or facet.</span>

<span class="sd">    Args:</span>
<span class="sd">        path (str): The path in the format &quot;tree_id/aspect_id/facet_id&quot;.</span>

<span class="sd">        lenient(bool): if not lenient raise Exceptions for invalid paths and ids</span>
<span class="sd">    Returns:</span>
<span class="sd">        Optional[CompetenceElement]: The competence aspect or facet corresponding to the given path.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">handle_error</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">lenient</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">element</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;invalid path </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">lenient</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">element</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.CompetenceTree.set_symmetry_mode" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_symmetry_mode</span><span class="p">(</span><span class="n">symmetry_level</span><span class="p">,</span> <span class="n">symmetry_mode</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Sets a new symmetry mode for a specified level
 in the competence tree. It resets the symmetry
 mode for all levels to None and then
 applies the new symmetry mode to the
 specified level. This method ensures that
 only one level has a symmetry mode set at any given time.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>symmetry_level(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The level to apply the new symmetry mode. Valid levels include "tree", "aspect", "area", and "facet".</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>symmetry_mode</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The symmetry mode to set for the specified level. Valid modes are "count", "score", and "time".</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_symmetry_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">symmetry_level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">symmetry_mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     Sets a new symmetry mode for a specified level</span>
<span class="sd">     in the competence tree. It resets the symmetry</span>
<span class="sd">     mode for all levels to None and then</span>
<span class="sd">     applies the new symmetry mode to the</span>
<span class="sd">     specified level. This method ensures that</span>
<span class="sd">     only one level has a symmetry mode set at any given time.</span>

<span class="sd">    Args:</span>
<span class="sd">        symmetry_level(str): The level to apply the new symmetry mode. Valid levels include &quot;tree&quot;, &quot;aspect&quot;, &quot;area&quot;, and &quot;facet&quot;.</span>
<span class="sd">        symmetry_mode (str): The symmetry mode to set for the specified level. Valid modes are &quot;count&quot;, &quot;score&quot;, and &quot;time&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># reset all ring specs</span>
    <span class="k">for</span> <span class="n">rl</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;tree&quot;</span><span class="p">,</span> <span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">]:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="n">rl</span><span class="p">]</span><span class="o">.</span><span class="n">symmetry_mode</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">symmetry_level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="n">symmetry_level</span><span class="p">]</span><span class="o">.</span><span class="n">symmetry_mode</span> <span class="o">=</span> <span class="n">symmetry_mode</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.CompetenceTree.to_pretty_json" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_pretty_json</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Converts the CompetenceTree object to a pretty JSON string, handling null values.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_pretty_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts the CompetenceTree object to a pretty JSON string, handling null values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">json_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
    <span class="n">json_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_none_values</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Recursively removes keys with None values from a dictionary, list, or nested structure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">remove_none_values</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="p">}</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">remove_none_values</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="n">none_free_dict</span> <span class="o">=</span> <span class="n">remove_none_values</span><span class="p">(</span><span class="n">json_dict</span><span class="p">)</span>
    <span class="n">null_free_json_str</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">none_free_dict</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">null_free_json_str</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.CompetenceTree.update_paths" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_paths</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>update my paths</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update_paths</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    update my paths</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">level_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;tree&quot;</span><span class="p">,</span> <span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">level_attr_names</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;aspects&quot;</span><span class="p">,</span> <span class="s2">&quot;areas&quot;</span><span class="p">,</span> <span class="s2">&quot;facets&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;tree&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;aspects&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;areas&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;facets&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_level</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;tree&quot;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="p">],</span>
        <span class="s2">&quot;aspect&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;facet&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="p">}</span>  <span class="c1"># Reset for re-calculation</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total_levels</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_path</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">:</span> <span class="bp">self</span><span class="p">}</span>
    <span class="c1"># Loop through each competence aspect and set their paths and parent references</span>
    <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects</span><span class="p">:</span>
        <span class="n">aspect</span><span class="o">.</span><span class="n">competence_tree</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">aspect</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">aspect</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">[</span><span class="n">aspect</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">aspect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span><span class="p">[</span><span class="s2">&quot;aspects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span><span class="p">[</span><span class="s2">&quot;aspects&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_levels</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_level</span><span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">aspect</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="n">aspect</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_levels</span> <span class="o">=</span> <span class="mi">3</span>
            <span class="n">area</span><span class="o">.</span><span class="n">competence_tree</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="n">area</span><span class="o">.</span><span class="n">aspect</span> <span class="o">=</span> <span class="n">aspect</span>
            <span class="n">area</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">aspect</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">area</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">[</span><span class="n">area</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">area</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span><span class="p">[</span><span class="s2">&quot;areas&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span><span class="p">[</span><span class="s2">&quot;areas&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_level</span><span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">area</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">facet</span> <span class="ow">in</span> <span class="n">area</span><span class="o">.</span><span class="n">facets</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">total_levels</span> <span class="o">=</span> <span class="mi">4</span>
                <span class="n">facet</span><span class="o">.</span><span class="n">competence_tree</span> <span class="o">=</span> <span class="bp">self</span>
                <span class="n">facet</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="n">area</span>
                <span class="n">facet</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">aspect</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">area</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">facet</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_path</span><span class="p">[</span><span class="n">facet</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">facet</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span><span class="p">[</span><span class="s2">&quot;facets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_elements</span><span class="p">[</span><span class="s2">&quot;facets&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">elements_by_level</span><span class="p">[</span><span class="s2">&quot;facet&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">facet</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_core.DynamicCompetenceMap" class="doc doc-heading">
            <code>DynamicCompetenceMap</code>


</h3>


    <div class="doc doc-contents ">


      <p>a visualization of a competence map</p>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DynamicCompetenceMap</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a visualization of a competence map</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">competence_tree</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">,</span> <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span> <span class="o">=</span> <span class="n">competence_tree</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg</span> <span class="o">=</span> <span class="n">svg</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">main_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">main_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">id</span>
        <span class="k">return</span> <span class="n">main_id</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">examples_path</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="c1"># the root directory (default: examples)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">&quot;../dcm_examples&quot;</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">path</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_example_dcm_definitions</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">markup</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">required_keys</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">as_text</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve example Dynamic Competence Map (DCM) definitions from files in the specified markup format (either JSON or YAML).</span>

<span class="sd">        Args:</span>
<span class="sd">            markup (str): The markup format of the input files. Defaults to &#39;json&#39;. Supported values are &#39;json&#39; and &#39;yaml&#39;.</span>
<span class="sd">            required_keys (Optional[Tuple]): A tuple of keys required to validate the data. If not provided, all keys will be considered valid.</span>
<span class="sd">            as_text (bool): If True, returns the file content as text; if False, returns parsed data. Defaults to True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary where each key is the prefix of the file name and the value is the file content as text or parsed data, depending on the value of &#39;as_text&#39;.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If there&#39;s an error in reading or parsing the file, or if the file does not meet the required validation criteria.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">example_dcm_defs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">file_ext</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">markup</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">examples_path</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">examples_path</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">dirpath</span><span class="p">,</span> <span class="n">_dirnames</span><span class="p">,</span> <span class="n">filenames</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">examples_path</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">file_ext</span><span class="p">):</span>
                    <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">definition_file</span><span class="p">:</span>
                        <span class="n">file_prefix</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">file_ext</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                        <span class="n">definition_text</span> <span class="o">=</span> <span class="n">definition_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">definition_data</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_markup</span><span class="p">(</span><span class="n">definition_text</span><span class="p">,</span> <span class="n">markup</span><span class="p">)</span>
                            <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">is_valid_definition</span><span class="p">(</span><span class="n">definition_data</span><span class="p">,</span> <span class="n">required_keys</span><span class="p">):</span>
                                <span class="k">if</span> <span class="n">as_text</span><span class="p">:</span>
                                    <span class="n">example_dcm_defs</span><span class="p">[</span><span class="n">file_prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">definition_text</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">example_dcm_defs</span><span class="p">[</span><span class="n">file_prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">definition_data</span>
                        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                            <span class="bp">cls</span><span class="o">.</span><span class="n">handle_markup_issue</span><span class="p">(</span>
                                <span class="n">filename</span><span class="p">,</span> <span class="n">definition_text</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">markup</span>
                            <span class="p">)</span>
        <span class="k">return</span> <span class="n">example_dcm_defs</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">parse_markup</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">markup</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse the given text as JSON or YAML based on the specified markup type.</span>

<span class="sd">        Args:</span>
<span class="sd">            text (str): The string content to be parsed.</span>
<span class="sd">            markup (str): The type of markup to use for parsing. Supported values are &#39;json&#39; and &#39;yaml&#39;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Union[dict, list]: The parsed data, which can be either a dictionary or a list, depending on the content.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If an unsupported markup format is specified.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">markup</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">data</span>
        <span class="k">elif</span> <span class="n">markup</span> <span class="o">==</span> <span class="s2">&quot;yaml&quot;</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported markup format: </span><span class="si">{</span><span class="n">markup</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">handle_markup_issue</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">definition_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">markup</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">JSONDecodeError</span><span class="p">):</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">definition_string</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>  <span class="c1"># Split the string into lines</span>
            <span class="n">err_line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">ex</span><span class="o">.</span><span class="n">lineno</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># JSONDecodeError gives 1-based lineno</span>
            <span class="n">pointer</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">ex</span><span class="o">.</span><span class="n">colno</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;^&quot;</span>
            <span class="p">)</span>  <span class="c1"># Create a pointer string to indicate the error position</span>
            <span class="n">error_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">:JSON parsing error on line </span><span class="si">{</span><span class="n">ex</span><span class="o">.</span><span class="n">lineno</span><span class="si">}</span><span class="s2"> column </span><span class="si">{</span><span class="n">ex</span><span class="o">.</span><span class="n">colno</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">err_line</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pointer</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ex</span><span class="o">.</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>  <span class="c1"># Raise a new exception with this message</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">error_message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;error in </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">error_message</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">is_valid_definition</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">definition_data</span><span class="p">,</span> <span class="n">required_keys</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="n">definition_data</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">required_keys</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_examples</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">content_class</span><span class="o">=</span><span class="n">CompetenceTree</span><span class="p">,</span> <span class="n">markup</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">examples</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">definition_string</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_example_dcm_definitions</span><span class="p">(</span>
            <span class="n">required_keys</span><span class="o">=</span><span class="n">content_class</span><span class="o">.</span><span class="n">required_keys</span><span class="p">(),</span> <span class="n">markup</span><span class="o">=</span><span class="n">markup</span>
        <span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">example</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_definition_string</span><span class="p">(</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">definition_string</span><span class="p">,</span> <span class="n">content_class</span><span class="p">,</span> <span class="n">markup</span><span class="o">=</span><span class="n">markup</span>
            <span class="p">)</span>
            <span class="c1"># check the type of the example</span>
            <span class="n">example_id</span> <span class="o">=</span> <span class="n">example</span><span class="o">.</span><span class="n">main_id</span>
            <span class="n">examples</span><span class="p">[</span><span class="n">example_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">example</span>
        <span class="k">return</span> <span class="n">examples</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_definition_string</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">definition_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content_class</span><span class="p">,</span>
        <span class="n">markup</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load a DynamicCompetenceMap or Learner instance from a definition string (either JSON or YAML).</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): A name identifier for the data source.</span>
<span class="sd">            definition_string (str): The string content of the definition.</span>
<span class="sd">            content_class (dataclass_json): The class which will be instantiated with the parsed data.</span>
<span class="sd">            markup (str): The markup format of the data. Defaults to &#39;json&#39;. Supported values are &#39;json&#39; and &#39;yaml&#39;.</span>
<span class="sd">            debug(bool): if True supply a JSON dump of the data in /tmp/{name}.json</span>
<span class="sd">        Returns:</span>
<span class="sd">            DynamicCompetenceMap: An instance of DynamicCompetenceMap loaded with the parsed data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If there&#39;s an error in parsing the data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_markup</span><span class="p">(</span><span class="n">definition_string</span><span class="p">,</span> <span class="n">markup</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                <span class="c1"># Save the parsed data to a JSON file in /tmp directory</span>
                <span class="n">debug_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;/tmp&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">)</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">debug_file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">debug_file</span><span class="p">:</span>
                    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">debug_file</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">content_class</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">CompetenceTree</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">DynamicCompetenceMap</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">content</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">handle_markup_issue</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">definition_string</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">markup</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.DynamicCompetenceMap.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">competence_tree</span><span class="p">,</span> <span class="n">svg</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>constructor</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">competence_tree</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">,</span> <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">competence_tree</span> <span class="o">=</span> <span class="n">competence_tree</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">svg</span> <span class="o">=</span> <span class="n">svg</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.DynamicCompetenceMap.from_definition_string" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_definition_string</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">definition_string</span><span class="p">,</span> <span class="n">content_class</span><span class="p">,</span> <span class="n">markup</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Load a DynamicCompetenceMap or Learner instance from a definition string (either JSON or YAML).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A name identifier for the data source.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>definition_string</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The string content of the definition.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>content_class</code></td>
            <td>
                  <code><span title="dataclasses_json.dataclass_json">dataclass_json</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class which will be instantiated with the parsed data.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>markup</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The markup format of the data. Defaults to 'json'. Supported values are 'json' and 'yaml'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;json&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>debug(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True supply a JSON dump of the data in /tmp/{name}.json</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns:
    DynamicCompetenceMap: An instance of DynamicCompetenceMap loaded with the parsed data.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there's an error in parsing the data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_definition_string</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">definition_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">content_class</span><span class="p">,</span>
    <span class="n">markup</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a DynamicCompetenceMap or Learner instance from a definition string (either JSON or YAML).</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): A name identifier for the data source.</span>
<span class="sd">        definition_string (str): The string content of the definition.</span>
<span class="sd">        content_class (dataclass_json): The class which will be instantiated with the parsed data.</span>
<span class="sd">        markup (str): The markup format of the data. Defaults to &#39;json&#39;. Supported values are &#39;json&#39; and &#39;yaml&#39;.</span>
<span class="sd">        debug(bool): if True supply a JSON dump of the data in /tmp/{name}.json</span>
<span class="sd">    Returns:</span>
<span class="sd">        DynamicCompetenceMap: An instance of DynamicCompetenceMap loaded with the parsed data.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If there&#39;s an error in parsing the data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_markup</span><span class="p">(</span><span class="n">definition_string</span><span class="p">,</span> <span class="n">markup</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="c1"># Save the parsed data to a JSON file in /tmp directory</span>
            <span class="n">debug_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;/tmp&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">debug_file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">debug_file</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">debug_file</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">content_class</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">CompetenceTree</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DynamicCompetenceMap</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">content</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">handle_markup_issue</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">definition_string</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">markup</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.DynamicCompetenceMap.get_example_dcm_definitions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_example_dcm_definitions</span><span class="p">(</span><span class="n">markup</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">required_keys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">as_text</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Retrieve example Dynamic Competence Map (DCM) definitions from files in the specified markup format (either JSON or YAML).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>markup</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The markup format of the input files. Defaults to 'json'. Supported values are 'json' and 'yaml'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;json&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>required_keys</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Tuple">Tuple</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple of keys required to validate the data. If not provided, all keys will be considered valid.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>as_text</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, returns the file content as text; if False, returns parsed data. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary where each key is the prefix of the file name and the value is the file content as text or parsed data, depending on the value of 'as_text'.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>Exception</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there's an error in reading or parsing the file, or if the file does not meet the required validation criteria.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_example_dcm_definitions</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">markup</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">required_keys</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">as_text</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve example Dynamic Competence Map (DCM) definitions from files in the specified markup format (either JSON or YAML).</span>

<span class="sd">    Args:</span>
<span class="sd">        markup (str): The markup format of the input files. Defaults to &#39;json&#39;. Supported values are &#39;json&#39; and &#39;yaml&#39;.</span>
<span class="sd">        required_keys (Optional[Tuple]): A tuple of keys required to validate the data. If not provided, all keys will be considered valid.</span>
<span class="sd">        as_text (bool): If True, returns the file content as text; if False, returns parsed data. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary where each key is the prefix of the file name and the value is the file content as text or parsed data, depending on the value of &#39;as_text&#39;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If there&#39;s an error in reading or parsing the file, or if the file does not meet the required validation criteria.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">example_dcm_defs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">file_ext</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">markup</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">examples_path</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">examples_path</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">dirpath</span><span class="p">,</span> <span class="n">_dirnames</span><span class="p">,</span> <span class="n">filenames</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">examples_path</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">file_ext</span><span class="p">):</span>
                <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">definition_file</span><span class="p">:</span>
                    <span class="n">file_prefix</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">file_ext</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                    <span class="n">definition_text</span> <span class="o">=</span> <span class="n">definition_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">definition_data</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_markup</span><span class="p">(</span><span class="n">definition_text</span><span class="p">,</span> <span class="n">markup</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">is_valid_definition</span><span class="p">(</span><span class="n">definition_data</span><span class="p">,</span> <span class="n">required_keys</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">as_text</span><span class="p">:</span>
                                <span class="n">example_dcm_defs</span><span class="p">[</span><span class="n">file_prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">definition_text</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">example_dcm_defs</span><span class="p">[</span><span class="n">file_prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">definition_data</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                        <span class="bp">cls</span><span class="o">.</span><span class="n">handle_markup_issue</span><span class="p">(</span>
                            <span class="n">filename</span><span class="p">,</span> <span class="n">definition_text</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">markup</span>
                        <span class="p">)</span>
    <span class="k">return</span> <span class="n">example_dcm_defs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.DynamicCompetenceMap.parse_markup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parse_markup</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">markup</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Parse the given text as JSON or YAML based on the specified markup type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>text</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The string content to be parsed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>markup</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of markup to use for parsing. Supported values are 'json' and 'yaml'.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[dict, list]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Union[dict, list]: The parsed data, which can be either a dictionary or a list, depending on the content.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If an unsupported markup format is specified.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">parse_markup</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">markup</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parse the given text as JSON or YAML based on the specified markup type.</span>

<span class="sd">    Args:</span>
<span class="sd">        text (str): The string content to be parsed.</span>
<span class="sd">        markup (str): The type of markup to use for parsing. Supported values are &#39;json&#39; and &#39;yaml&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Union[dict, list]: The parsed data, which can be either a dictionary or a list, depending on the content.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If an unsupported markup format is specified.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">markup</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">elif</span> <span class="n">markup</span> <span class="o">==</span> <span class="s2">&quot;yaml&quot;</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported markup format: </span><span class="si">{</span><span class="n">markup</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_core.Learner" class="doc doc-heading">
            <code>Learner</code>


</h3>


    <div class="doc doc-contents ">


      <p>A learner with achievements.
Attributes:
    learner_id (str): Identifier for the learner.
    achievements (Dict[str, List[Achievement]]):
        A dictionary where each key is a competence element identifier
        and the value is a list of Achievement instances for that tree.</p>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">Learner</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A learner with achievements.</span>
<span class="sd">    Attributes:</span>
<span class="sd">        learner_id (str): Identifier for the learner.</span>
<span class="sd">        achievements (Dict[str, List[Achievement]]):</span>
<span class="sd">            A dictionary where each key is a competence element identifier</span>
<span class="sd">            and the value is a list of Achievement instances for that tree.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">learner_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">achievements</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Achievement</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievements_by_path</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievement_indices_by_path</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievements</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">achievement</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">achievements</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">achievements_by_path</span><span class="p">[</span><span class="n">achievement</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">achievement</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">achievement_indices_by_path</span><span class="p">[</span><span class="n">achievement</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">required_keys</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;achievements&quot;</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">keys</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">main_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">main_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner_id</span>
        <span class="k">return</span> <span class="n">main_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">file_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">learner_id</span><span class="p">,</span> <span class="n">lowercase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">regex_pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;[^\w\s\-]&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">file_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">most_recent_achievement_iso_date</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the most recent achievement date in ISO format.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[str]: The ISO date string of the most recent achievement, or None if there are no achievements.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievements</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">dates</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">achievement</span><span class="o">.</span><span class="n">date_assessed_iso</span>
            <span class="k">for</span> <span class="n">achievement</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievements</span>
            <span class="k">if</span> <span class="n">achievement</span><span class="o">.</span><span class="n">date_assessed_iso</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">dates</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="c1"># Parse the ISO dates and return the most recent one</span>
        <span class="n">most_recent_date</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">date</span><span class="p">)</span> <span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">dates</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">most_recent_date</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_achievement_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">a_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievement_indices_by_path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">a_index</span>

    <span class="k">def</span> <span class="nf">add_achievement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_achievement</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a new achievement for the learner.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_achievement</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">achievements</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievements_by_path</span><span class="p">[</span><span class="n">new_achievement</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_achievement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievement_indices_by_path</span><span class="p">[</span><span class="n">new_achievement</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span>

    <span class="k">def</span> <span class="nf">get_competence_tree_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all unique competence tree IDs of my achievements.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[str]: A list of unique competence tree IDs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Assuming that the learner&#39;s achievements are stored in a list called self.achievements</span>
        <span class="c1"># You can modify this part according to your actual data structure.</span>

        <span class="c1"># Create a set to store unique competence tree IDs</span>
        <span class="n">unique_tree_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># Iterate through the learner&#39;s achievements</span>
        <span class="k">for</span> <span class="n">achievement</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievements</span><span class="p">:</span>
            <span class="c1"># Assuming each achievement has a tree_id attribute</span>
            <span class="n">tree_id</span> <span class="o">=</span> <span class="n">achievement</span><span class="o">.</span><span class="n">tree_id</span>

            <span class="c1"># Add the tree_id to the set</span>
            <span class="n">unique_tree_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tree_id</span><span class="p">)</span>

        <span class="c1"># Convert the set to a list and return</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">unique_tree_ids</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="dcm.dcm_core.Learner.most_recent_achievement_iso_date" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">most_recent_achievement_iso_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Get the most recent achievement date in ISO format.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[str]: The ISO date string of the most recent achievement, or None if there are no achievements.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.Learner.add_achievement" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_achievement</span><span class="p">(</span><span class="n">new_achievement</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add a new achievement for the learner.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_achievement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_achievement</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a new achievement for the learner.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">achievements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_achievement</span><span class="p">)</span>
    <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">achievements</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">achievements_by_path</span><span class="p">[</span><span class="n">new_achievement</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_achievement</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">achievement_indices_by_path</span><span class="p">[</span><span class="n">new_achievement</span><span class="o">.</span><span class="n">path</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_core.Learner.get_competence_tree_ids" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_competence_tree_ids</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Get all unique competence tree IDs of my achievements.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[str]: A list of unique competence tree IDs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_competence_tree_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get all unique competence tree IDs of my achievements.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[str]: A list of unique competence tree IDs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Assuming that the learner&#39;s achievements are stored in a list called self.achievements</span>
    <span class="c1"># You can modify this part according to your actual data structure.</span>

    <span class="c1"># Create a set to store unique competence tree IDs</span>
    <span class="n">unique_tree_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="c1"># Iterate through the learner&#39;s achievements</span>
    <span class="k">for</span> <span class="n">achievement</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievements</span><span class="p">:</span>
        <span class="c1"># Assuming each achievement has a tree_id attribute</span>
        <span class="n">tree_id</span> <span class="o">=</span> <span class="n">achievement</span><span class="o">.</span><span class="n">tree_id</span>

        <span class="c1"># Add the tree_id to the set</span>
        <span class="n">unique_tree_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tree_id</span><span class="p">)</span>

    <span class="c1"># Convert the set to a list and return</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">unique_tree_ids</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_core.RingSpec" class="doc doc-heading">
            <code>RingSpec</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


      <p>Specification of rings of the donut chart.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.RingSpec.text_mode">text_mode</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The mode of text display on the ring. Default is None.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.RingSpec.inner_ratio">inner_ratio</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[float]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The inner radius of the ring, relative to the chart size.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.RingSpec.outer_ratio">outer_ratio</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[float]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The outer radius of the ring, relative to the chart size.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_core.RingSpec.symmetry_mode">symmetry_mode</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Specifies the symmetry mode for the ring. Supports "count", "time", "score" to determine how the ring segments are balanced. Default is None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass_json</span>
<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">RingSpec</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specification of rings of the donut chart.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        text_mode (Optional[str]): The mode of text display on the ring. Default is None.</span>
<span class="sd">        inner_ratio (Optional[float]): The inner radius of the ring, relative to the chart size.</span>
<span class="sd">        outer_ratio (Optional[float]): The outer radius of the ring, relative to the chart size.</span>
<span class="sd">        symmetry_mode (Optional[str]): Specifies the symmetry mode for the ring. Supports &quot;count&quot;, &quot;time&quot;, &quot;score&quot; to determine how the ring segments are balanced. Default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">text_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;empty&quot;</span>
    <span class="n">inner_ratio</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">outer_ratio</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">levels_visible</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">symmetry_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">empty</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inner_ratio</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">outer_ratio</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inner_ratio</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">outer_ratio</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">empty</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="dcm.dcm_web" class="doc doc-heading">
            <code>dcm_web</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2024-01-26</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_web.RingSpecView" class="doc doc-heading">
            <code>RingSpecView</code>


</h3>


    <div class="doc doc-contents ">


      <p>show a single ring specification</p>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_web.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RingSpecView</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    show a single ring specification</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">ring_level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ringspec</span><span class="p">:</span> <span class="n">RingSpec</span><span class="p">,</span> <span class="n">throttle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        construct me</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span> <span class="o">=</span> <span class="n">ringspec</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ring_level</span> <span class="o">=</span> <span class="n">ring_level</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span> <span class="o">=</span> <span class="n">ringspec</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">change_enabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">throttle</span> <span class="o">=</span> <span class="n">throttle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_ui</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        setup the user interface</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">grid</span><span class="p">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span> <span class="s2">&quot;curved&quot;</span><span class="p">,</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span> <span class="s2">&quot;angled&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_mode_select</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">add_select</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ring_level</span><span class="p">,</span>
                <span class="n">selection</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">text_mode</span><span class="p">,</span>
                <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_text_mode_change</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">level_visible_checkbox</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span><span class="s2">&quot;level&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span>
                <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_level_visible_change</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inner_ratio_slider</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">slider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">inner_ratio</span><span class="p">)</span>
                <span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;label-always&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">on</span><span class="p">(</span>
                    <span class="s2">&quot;update:model-value&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">on_inner_ratio_change</span><span class="p">,</span>
                    <span class="n">throttle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">throttle</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outer_ratio_slider</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">slider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">outer_ratio</span><span class="p">)</span>
                <span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;label-always&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">on</span><span class="p">(</span>
                    <span class="s2">&quot;update:model-value&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">on_outer_ratio_change</span><span class="p">,</span>
                    <span class="n">throttle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">throttle</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rs</span><span class="p">:</span> <span class="n">RingSpec</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        update the ring specification to be modified by this ui</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span> <span class="o">=</span> <span class="n">rs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">change_enabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_mode_select</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">text_mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inner_ratio_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">inner_ratio</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outer_ratio_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">outer_ratio</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">change_enabled</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">on_level_visible_change</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">levels_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">level_visible_checkbox</span><span class="o">.</span><span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">on_change</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_inner_ratio_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gev</span><span class="p">:</span> <span class="n">GenericEventArguments</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle changes in the inner_ratio slider.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">inner_ratio</span> <span class="o">=</span> <span class="n">gev</span><span class="o">.</span><span class="n">args</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">on_change</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_outer_ratio_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gev</span><span class="p">:</span> <span class="n">GenericEventArguments</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle changes in the outer_ratio slider.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">outer_ratio</span> <span class="o">=</span> <span class="n">gev</span><span class="o">.</span><span class="n">args</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">on_change</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_text_mode_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        handle changes in the text_mode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># ignore changes if change_enabled is not active</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_enabled</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">new_text_mode</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="n">new_text_mode</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">text_mode</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">text_mode</span> <span class="o">=</span> <span class="n">new_text_mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">on_change</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_web.RingSpecView.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">ring_level</span><span class="p">,</span> <span class="n">ringspec</span><span class="p">,</span> <span class="n">throttle</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>construct me</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_web.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">ring_level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ringspec</span><span class="p">:</span> <span class="n">RingSpec</span><span class="p">,</span> <span class="n">throttle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    construct me</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span> <span class="o">=</span> <span class="n">ringspec</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ring_level</span> <span class="o">=</span> <span class="n">ring_level</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span> <span class="o">=</span> <span class="n">ringspec</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">change_enabled</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle</span> <span class="o">=</span> <span class="n">throttle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_ui</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_web.RingSpecView.on_inner_ratio_change" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">on_inner_ratio_change</span><span class="p">(</span><span class="n">gev</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Handle changes in the inner_ratio slider.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_web.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">on_inner_ratio_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gev</span><span class="p">:</span> <span class="n">GenericEventArguments</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handle changes in the inner_ratio slider.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_enabled</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">inner_ratio</span> <span class="o">=</span> <span class="n">gev</span><span class="o">.</span><span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">on_change</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_web.RingSpecView.on_level_visible_change" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">on_level_visible_change</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_web.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">on_level_visible_change</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">levels_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">level_visible_checkbox</span><span class="o">.</span><span class="n">value</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">on_change</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_web.RingSpecView.on_outer_ratio_change" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">on_outer_ratio_change</span><span class="p">(</span><span class="n">gev</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Handle changes in the outer_ratio slider.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_web.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">on_outer_ratio_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gev</span><span class="p">:</span> <span class="n">GenericEventArguments</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handle changes in the outer_ratio slider.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_enabled</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">outer_ratio</span> <span class="o">=</span> <span class="n">gev</span><span class="o">.</span><span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">on_change</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_web.RingSpecView.on_text_mode_change" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">on_text_mode_change</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>handle changes in the text_mode</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_web.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">on_text_mode_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    handle changes in the text_mode</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># ignore changes if change_enabled is not active</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_enabled</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">new_text_mode</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">value</span>
    <span class="k">if</span> <span class="n">new_text_mode</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">text_mode</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">text_mode</span> <span class="o">=</span> <span class="n">new_text_mode</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">on_change</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_web.RingSpecView.setup_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setup_ui</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>setup the user interface</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_web.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setup_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    setup the user interface</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">grid</span><span class="p">:</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span> <span class="s2">&quot;curved&quot;</span><span class="p">,</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span> <span class="s2">&quot;angled&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_mode_select</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">add_select</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ring_level</span><span class="p">,</span>
            <span class="n">selection</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">text_mode</span><span class="p">,</span>
            <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_text_mode_change</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level_visible_checkbox</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span><span class="s2">&quot;level&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span>
            <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_level_visible_change</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inner_ratio_slider</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">slider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">inner_ratio</span><span class="p">)</span>
            <span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;label-always&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">on</span><span class="p">(</span>
                <span class="s2">&quot;update:model-value&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">on_inner_ratio_change</span><span class="p">,</span>
                <span class="n">throttle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">throttle</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outer_ratio_slider</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">slider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span><span class="o">.</span><span class="n">outer_ratio</span><span class="p">)</span>
            <span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;label-always&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">on</span><span class="p">(</span>
                <span class="s2">&quot;update:model-value&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">on_outer_ratio_change</span><span class="p">,</span>
                <span class="n">throttle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">throttle</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_web.RingSpecView.update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">rs</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>update the ring specification to be modified by this ui</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_web.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rs</span><span class="p">:</span> <span class="n">RingSpec</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    update the ring specification to be modified by this ui</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ringspec</span> <span class="o">=</span> <span class="n">rs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">change_enabled</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">text_mode_select</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">text_mode</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inner_ratio_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">inner_ratio</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">outer_ratio_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">outer_ratio</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">change_enabled</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_web.RingSpecsView" class="doc doc-heading">
            <code>RingSpecsView</code>


</h3>


    <div class="doc doc-contents ">


      <p>show a list of ringspecs</p>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_web.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RingSpecsView</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    show a list of ringspecs</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">webserver</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span> <span class="o">=</span> <span class="n">webserver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ct</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># ringspec views</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rsv</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_ui</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">setup_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        setup the user interface</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">expansion</span><span class="p">(</span><span class="s2">&quot;ring specs&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;settings&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">expansion</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">expansion</span><span class="p">(</span><span class="s2">&quot;symmetry&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;balance&quot;</span><span class="p">):</span>
                <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode_radio</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">radio</span><span class="p">(</span>
                        <span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">],</span> <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_symmetry_change</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;inline&quot;</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level_radio</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">radio</span><span class="p">(</span>
                        <span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">],</span> <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_symmetry_change</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;inline&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">:</span>
                <span class="n">inner_ratio</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">outer_ratio</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">7</span>
                <span class="n">levels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;tree&quot;</span><span class="p">,</span> <span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">rl</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">:</span>
                    <span class="n">rs</span> <span class="o">=</span> <span class="n">RingSpec</span><span class="p">(</span>
                        <span class="n">text_mode</span><span class="o">=</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span>
                        <span class="n">inner_ratio</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">inner_ratio</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                        <span class="n">outer_ratio</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">outer_ratio</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">rsv</span><span class="p">[</span><span class="n">rl</span><span class="p">]</span> <span class="o">=</span> <span class="n">RingSpecView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rl</span><span class="p">,</span> <span class="n">rs</span><span class="p">)</span>
                    <span class="n">inner_ratio</span> <span class="o">=</span> <span class="n">outer_ratio</span>
                    <span class="n">outer_ratio</span> <span class="o">=</span> <span class="n">outer_ratio</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">7</span>

    <span class="k">def</span> <span class="nf">update_rings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        update the ring specifications based on the given competence tree</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">get_symmetry_spec</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level_radio</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode_radio</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode</span>
        <span class="c1"># set ct after changing radio buttions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ct</span> <span class="o">=</span> <span class="n">ct</span>
        <span class="k">for</span> <span class="n">rl</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;tree&quot;</span><span class="p">,</span> <span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rsv</span><span class="p">[</span><span class="n">rl</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="n">rl</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">on_symmetry_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        handle symmetry changes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="p">:</span>
            <span class="c1"># get compentency tree symmetry settings</span>
            <span class="c1"># and the current ui radio button settings</span>
            <span class="n">ct_symmetry_level</span><span class="p">,</span> <span class="n">ct_symmetry_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">get_symmetry_spec</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level_radio</span><span class="o">.</span><span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode_radio</span><span class="o">.</span><span class="n">value</span>
            <span class="c1"># check whether the radio values are different from the ct values</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">ct_symmetry_level</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level</span>
                <span class="ow">or</span> <span class="n">ct_symmetry_mode</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">set_symmetry_mode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode</span><span class="p">)</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_change</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_change</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        if a ring spec trigger update</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">on_update_ringspecs</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_web.RingSpecsView.on_change" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">on_change</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>if a ring spec trigger update</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_web.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">on_change</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    if a ring spec trigger update</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">on_update_ringspecs</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_web.RingSpecsView.on_symmetry_change" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">on_symmetry_change</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>handle symmetry changes</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_web.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">on_symmetry_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    handle symmetry changes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="p">:</span>
        <span class="c1"># get compentency tree symmetry settings</span>
        <span class="c1"># and the current ui radio button settings</span>
        <span class="n">ct_symmetry_level</span><span class="p">,</span> <span class="n">ct_symmetry_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">get_symmetry_spec</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level_radio</span><span class="o">.</span><span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode_radio</span><span class="o">.</span><span class="n">value</span>
        <span class="c1"># check whether the radio values are different from the ct values</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">ct_symmetry_level</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level</span>
            <span class="ow">or</span> <span class="n">ct_symmetry_mode</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">set_symmetry_mode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode</span><span class="p">)</span>
        <span class="k">pass</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_change</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_web.RingSpecsView.setup_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setup_ui</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>setup the user interface</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_web.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setup_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    setup the user interface</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">expansion</span><span class="p">(</span><span class="s2">&quot;ring specs&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;settings&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">expansion</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">expansion</span><span class="p">(</span><span class="s2">&quot;symmetry&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;balance&quot;</span><span class="p">):</span>
            <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode_radio</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">radio</span><span class="p">(</span>
                    <span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">],</span> <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_symmetry_change</span>
                <span class="p">)</span><span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;inline&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level_radio</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">radio</span><span class="p">(</span>
                    <span class="p">[</span><span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">],</span> <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">on_symmetry_change</span>
                <span class="p">)</span><span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;inline&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">:</span>
            <span class="n">inner_ratio</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">outer_ratio</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">7</span>
            <span class="n">levels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;tree&quot;</span><span class="p">,</span> <span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">rl</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">:</span>
                <span class="n">rs</span> <span class="o">=</span> <span class="n">RingSpec</span><span class="p">(</span>
                    <span class="n">text_mode</span><span class="o">=</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span>
                    <span class="n">inner_ratio</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">inner_ratio</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                    <span class="n">outer_ratio</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">outer_ratio</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rsv</span><span class="p">[</span><span class="n">rl</span><span class="p">]</span> <span class="o">=</span> <span class="n">RingSpecView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rl</span><span class="p">,</span> <span class="n">rs</span><span class="p">)</span>
                <span class="n">inner_ratio</span> <span class="o">=</span> <span class="n">outer_ratio</span>
                <span class="n">outer_ratio</span> <span class="o">=</span> <span class="n">outer_ratio</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">7</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_web.RingSpecsView.update_rings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_rings</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>update the ring specifications based on the given competence tree</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_web.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update_rings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    update the ring specifications based on the given competence tree</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">get_symmetry_spec</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level_radio</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_level</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode_radio</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_mode</span>
    <span class="c1"># set ct after changing radio buttions</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ct</span> <span class="o">=</span> <span class="n">ct</span>
    <span class="k">for</span> <span class="n">rl</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;tree&quot;</span><span class="p">,</span> <span class="s2">&quot;aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;facet&quot;</span><span class="p">]:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rsv</span><span class="p">[</span><span class="n">rl</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">ring_specs</span><span class="p">[</span><span class="n">rl</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="dcm.dcm_webserver" class="doc doc-heading">
            <code>dcm_webserver</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2023-11-06</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_webserver.DcmSolution" class="doc doc-heading">
            <code>DcmSolution</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ngwidgets.input_webserver.InputWebSolution">InputWebSolution</span></code></p>


      <p>the Dynamic Competence Map solution</p>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DcmSolution</span><span class="p">(</span><span class="n">InputWebSolution</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    the Dynamic Competence Map solution</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">webserver</span><span class="p">:</span> <span class="n">DynamicCompentenceMapWebServer</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">Client</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the solution</span>

<span class="sd">        Calls the constructor of the base solution</span>
<span class="sd">        Args:</span>
<span class="sd">            webserver (DynamicCompotenceMapWebServer): The webserver instance associated with this context.</span>
<span class="sd">            client (Client): The client instance this context is associated with.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">webserver</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>  <span class="c1"># Call to the superclass constructor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_mode</span> <span class="o">=</span> <span class="s2">&quot;empty&quot;</span>

    <span class="k">def</span> <span class="nf">get_basename_without_extension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="c1"># Parse the URL to get the path component</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">path</span>
        <span class="c1"># Extract the base name (e.g., &quot;example.html&quot; from &quot;/dir/example.html&quot;)</span>
        <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="c1"># Split the base name and extension and return just the base name</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">save_session_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save the current session state to app.storage.user.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">learner_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">learner_id</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">app</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">user</span><span class="p">[</span><span class="s2">&quot;learner_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">learner_id</span>
        <span class="n">app</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">user</span><span class="p">[</span><span class="s2">&quot;assessment&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_learner_file_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learner_slug</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the file path for a learner&#39;s JSON file based on the learner&#39;s slug.</span>

<span class="sd">        Args:</span>
<span class="sd">            learner_slug (str): The unique slug of the learner.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The file path for the learner&#39;s JSON file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">storage_path</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">learner_slug</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">load_learner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learner_slug</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load a learner from a JSON file based on the learner&#39;s slug.</span>

<span class="sd">        Args:</span>
<span class="sd">            learner_slug (str): The unique slug of the learner.</span>

<span class="sd">        Raises:</span>
<span class="sd">            FileNotFoundError: If the learner file does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">learner_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_learner_file_path</span><span class="p">(</span><span class="n">learner_slug</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">learner_file</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Learner file not found: </span><span class="si">{</span><span class="n">learner_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="o">=</span> <span class="n">Learner</span><span class="o">.</span><span class="n">load_from_json_file</span><span class="p">(</span><span class="n">learner_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_session_state</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_click_args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the json content as an SVG visualization</span>

<span class="sd">        Args:</span>
<span class="sd">            click_args (object): The click event arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">input_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span>
            <span class="k">if</span> <span class="n">input_source</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_basename_without_extension</span><span class="p">(</span><span class="n">input_source</span><span class="p">)</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_div</span><span class="p">:</span>
                    <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;rendering </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">definition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_read_input</span><span class="p">(</span><span class="n">input_source</span><span class="p">)</span>
                <span class="c1"># Determine the format based on the file extension</span>
                <span class="n">markup</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span> <span class="k">if</span> <span class="n">input_source</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.json&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;yaml&quot;</span>
                <span class="k">if</span> <span class="s2">&quot;learner_id&quot;</span> <span class="ow">in</span> <span class="n">definition</span><span class="p">:</span>
                    <span class="n">content_class</span> <span class="o">=</span> <span class="n">Learner</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">content_class</span> <span class="o">=</span> <span class="n">CompetenceTree</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">DynamicCompetenceMap</span><span class="o">.</span><span class="n">from_definition_string</span><span class="p">(</span>
                    <span class="n">name</span><span class="p">,</span> <span class="n">definition</span><span class="p">,</span> <span class="n">content_class</span><span class="o">=</span><span class="n">content_class</span><span class="p">,</span> <span class="n">markup</span><span class="o">=</span><span class="n">markup</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">render_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">DynamicCompetenceMap</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_dcm</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="o">=</span> <span class="n">item</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_session_state</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assess</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render_dcm</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dcm</span><span class="p">,</span>
        <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">selected_paths</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">clear_assessment</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        render the dynamic competence map</span>

<span class="sd">        Args:</span>
<span class="sd">            dcm(DynamicCompetenceMap)</span>
<span class="sd">            selected_paths (List, optional): A list of paths that should be highlighted</span>
<span class="sd">            in the SVG. These paths typically represent specific competencies or</span>
<span class="sd">            achievements. Defaults to an empty list.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">clear_assessment</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assessment_row</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                    <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span> <span class="o">=</span> <span class="n">dcm</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ringspecs_view</span><span class="o">.</span><span class="n">update_rings</span><span class="p">(</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assess_state</span><span class="p">()</span>
            <span class="n">dcm_chart</span> <span class="o">=</span> <span class="n">DcmChart</span><span class="p">(</span><span class="n">dcm</span><span class="p">)</span>
            <span class="n">svg_markup</span> <span class="o">=</span> <span class="n">dcm_chart</span><span class="o">.</span><span class="n">generate_svg_markup</span><span class="p">(</span>
                <span class="n">learner</span><span class="o">=</span><span class="n">learner</span><span class="p">,</span>
                <span class="n">selected_paths</span><span class="o">=</span><span class="n">selected_paths</span><span class="p">,</span>
                <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
                <span class="n">with_java_script</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">text_mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">text_mode</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># Use the new get_java_script method to get the JavaScript</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">svg_view</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="p">(</span><span class="n">svg_markup</span><span class="p">,)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">svg_view</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">prepare_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prepare the user interface</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_id</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">browser</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepare_svg</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">prepare_svg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prepare the SVG / javascript display</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">SVGConfig</span><span class="p">(</span><span class="n">with_popup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg</span> <span class="o">=</span> <span class="n">SVG</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
        <span class="n">java_script</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">get_java_script</span><span class="p">()</span>

        <span class="c1"># Add the script using ui.add_head_html()</span>
        <span class="n">ui</span><span class="o">.</span><span class="n">add_head_html</span><span class="p">(</span><span class="n">java_script</span><span class="p">,</span> <span class="n">shared</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">show_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        show the ui</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_div</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">splitter</span><span class="p">()</span> <span class="k">as</span> <span class="n">splitter</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">splitter</span><span class="o">.</span><span class="n">before</span><span class="p">:</span>
                    <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="s2">&quot;w-full&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">left_selection</span><span class="p">:</span>
                        <span class="n">extensions</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;json&quot;</span><span class="p">:</span> <span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">:</span> <span class="s2">&quot;.yaml&quot;</span><span class="p">}</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">example_selector</span> <span class="o">=</span> <span class="n">FileSelector</span><span class="p">(</span>
                            <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span>
                            <span class="n">extensions</span><span class="o">=</span><span class="n">extensions</span><span class="p">,</span>
                            <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">read_and_optionally_render</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">ringspecs_view</span> <span class="o">=</span> <span class="n">RingSpecsView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="s2">&quot;w-full&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">left_grid</span><span class="p">:</span>
                        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_row</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">input_input</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">input</span><span class="p">(</span>
                                <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">input_changed</span>
                            <span class="p">)</span><span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;size=100&quot;</span><span class="p">)</span>
                        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_row</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;reload&quot;</span><span class="p">,</span>
                                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;refresh&quot;</span><span class="p">,</span>
                                <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reload_file</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">assessment_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;assessment&quot;</span><span class="p">,</span>
                                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;query_stats&quot;</span><span class="p">,</span>
                                <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_assess</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                                    <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;open&quot;</span><span class="p">,</span>
                                    <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;file_open&quot;</span><span class="p">,</span>
                                    <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_file</span><span class="p">,</span>
                                <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">download_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;download&quot;</span><span class="p">,</span>
                                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;download&quot;</span><span class="p">,</span>
                                <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">download</span><span class="p">,</span>
                            <span class="p">)</span>
                <span class="k">with</span> <span class="n">splitter</span><span class="o">.</span><span class="n">after</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">svg_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">html</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">home</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates the home page with a selection of examples and</span>
<span class="sd">        svg display</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">setup_content_div</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_ui</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assess_state</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">assess_learner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        assess the given Dynamic Competence Map and learner</span>

<span class="sd">        Args:</span>
<span class="sd">            dcm(DynamicCompetenceMap): the competence map</span>
<span class="sd">            learner(Learner): the learner to get the self assessment for</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_div</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_div</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">dcm</span><span class="o">=</span><span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="n">learner</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">left_grid</span><span class="p">:</span>
                    <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment_row</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="o">=</span> <span class="n">Assessment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dcm</span><span class="o">=</span><span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="n">learner</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">new_assess</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        run a new  assessment for a new learner</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">learner_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="o">=</span> <span class="n">Learner</span><span class="p">(</span><span class="n">learner_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_session_state</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assess_learner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">assess_learner_by_slug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learner_slug</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Assess a learner based on the slug of the id</span>

<span class="sd">        Args:</span>
<span class="sd">            learner_slug (str): The unique slug of the learner.</span>

<span class="sd">        Raises:</span>
<span class="sd">            HTTPException: If the learner file does not exist or an error occurs.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">show</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_ui</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">load_learner</span><span class="p">(</span><span class="n">learner_slug</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assess</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">setup_content_div</span><span class="p">(</span><span class="n">show</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">assess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span><span class="p">,</span> <span class="n">tree_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        run an assessment for the given learner</span>

<span class="sd">        Args:</span>
<span class="sd">            learner(Learner): the learner to get the self assessment for</span>
<span class="sd">            tree_id(str): the identifier for the competence tree</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tree_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tree_ids</span> <span class="o">=</span> <span class="n">learner</span><span class="o">.</span><span class="n">get_competence_tree_ids</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tree_ids</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;There must be exactly one competence tree referenced but there are: </span><span class="si">{</span><span class="n">tree_ids</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="n">tree_id</span> <span class="o">=</span> <span class="n">tree_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tree_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">examples</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid competence tree_id </span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">dcm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">examples</span><span class="p">[</span><span class="n">tree_id</span><span class="p">]</span>
        <span class="c1"># assess_learner will render ...</span>
        <span class="c1"># self.render_dcm(dcm,learner=learner)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assess_learner</span><span class="p">(</span><span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_update_ringspecs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        react on changes in the ringspecs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">assess_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save the session state and reflect</span>
<span class="sd">        in the UI</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_session_state</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># allow creating a new learner</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assessment_button</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># the assessment is already on</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assessment_button</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># downloading is possible</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">download_button</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># downloading is not possible - we have n learner</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">download_button</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        allow downloading the assessment result</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_div</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span><span class="p">:</span>
                    <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;no active learner assessment&quot;</span><span class="p">)</span>
                    <span class="k">return</span>
                <span class="n">json_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span><span class="o">.</span><span class="n">store</span><span class="p">()</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;downloading </span><span class="si">{</span><span class="n">json_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">json_path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">webserver</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Initialize the solution</p>
<p>Calls the constructor of the base solution
Args:
    webserver (DynamicCompotenceMapWebServer): The webserver instance associated with this context.
    client (Client): The client instance this context is associated with.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">webserver</span><span class="p">:</span> <span class="n">DynamicCompentenceMapWebServer</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">Client</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the solution</span>

<span class="sd">    Calls the constructor of the base solution</span>
<span class="sd">    Args:</span>
<span class="sd">        webserver (DynamicCompotenceMapWebServer): The webserver instance associated with this context.</span>
<span class="sd">        client (Client): The client instance this context is associated with.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">webserver</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>  <span class="c1"># Call to the superclass constructor</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">text_mode</span> <span class="o">=</span> <span class="s2">&quot;empty&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.assess" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">assess</span><span class="p">(</span><span class="n">learner</span><span class="p">,</span> <span class="n">tree_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>run an assessment for the given learner</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>learner(Learner)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the learner to get the self assessment for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>tree_id(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the identifier for the competence tree</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">assess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span><span class="p">,</span> <span class="n">tree_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    run an assessment for the given learner</span>

<span class="sd">    Args:</span>
<span class="sd">        learner(Learner): the learner to get the self assessment for</span>
<span class="sd">        tree_id(str): the identifier for the competence tree</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">tree_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tree_ids</span> <span class="o">=</span> <span class="n">learner</span><span class="o">.</span><span class="n">get_competence_tree_ids</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tree_ids</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;There must be exactly one competence tree referenced but there are: </span><span class="si">{</span><span class="n">tree_ids</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="n">tree_id</span> <span class="o">=</span> <span class="n">tree_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tree_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">examples</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid competence tree_id </span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">dcm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">examples</span><span class="p">[</span><span class="n">tree_id</span><span class="p">]</span>
    <span class="c1"># assess_learner will render ...</span>
    <span class="c1"># self.render_dcm(dcm,learner=learner)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assess_learner</span><span class="p">(</span><span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.assess_learner" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">assess_learner</span><span class="p">(</span><span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>assess the given Dynamic Competence Map and learner</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>dcm(DynamicCompetenceMap)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the competence map</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>learner(Learner)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the learner to get the self assessment for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">assess_learner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    assess the given Dynamic Competence Map and learner</span>

<span class="sd">    Args:</span>
<span class="sd">        dcm(DynamicCompetenceMap): the competence map</span>
<span class="sd">        learner(Learner): the learner to get the self assessment for</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_div</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_div</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">dcm</span><span class="o">=</span><span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="n">learner</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">left_grid</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment_row</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="o">=</span> <span class="n">Assessment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dcm</span><span class="o">=</span><span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="n">learner</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.assess_learner_by_slug" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">assess_learner_by_slug</span><span class="p">(</span><span class="n">learner_slug</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Assess a learner based on the slug of the id</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>learner_slug</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The unique slug of the learner.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="fastapi.HTTPException">HTTPException</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the learner file does not exist or an error occurs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">assess_learner_by_slug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learner_slug</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assess a learner based on the slug of the id</span>

<span class="sd">    Args:</span>
<span class="sd">        learner_slug (str): The unique slug of the learner.</span>

<span class="sd">    Raises:</span>
<span class="sd">        HTTPException: If the learner file does not exist or an error occurs.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_ui</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_learner</span><span class="p">(</span><span class="n">learner_slug</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assess</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">setup_content_div</span><span class="p">(</span><span class="n">show</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.assess_state" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">assess_state</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>save the session state and reflect
in the UI</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">assess_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    save the session state and reflect</span>
<span class="sd">    in the UI</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_session_state</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># allow creating a new learner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assessment_button</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># the assessment is already on</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assessment_button</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># downloading is possible</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">download_button</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># downloading is not possible - we have n learner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">download_button</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.download" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">download</span><span class="p">(</span><span class="n">_args</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>allow downloading the assessment result</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    allow downloading the assessment result</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_div</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span><span class="p">:</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;no active learner assessment&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">json_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span><span class="o">.</span><span class="n">store</span><span class="p">()</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;downloading </span><span class="si">{</span><span class="n">json_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">json_path</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.get_learner_file_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_learner_file_path</span><span class="p">(</span><span class="n">learner_slug</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Get the file path for a learner's JSON file based on the learner's slug.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>learner_slug</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The unique slug of the learner.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The file path for the learner's JSON file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_learner_file_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learner_slug</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the file path for a learner&#39;s JSON file based on the learner&#39;s slug.</span>

<span class="sd">    Args:</span>
<span class="sd">        learner_slug (str): The unique slug of the learner.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The file path for the learner&#39;s JSON file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">storage_path</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">learner_slug</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.home" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">home</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Generates the home page with a selection of examples and
svg display</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">home</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates the home page with a selection of examples and</span>
<span class="sd">    svg display</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">setup_content_div</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_ui</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assess_state</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.load_learner" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_learner</span><span class="p">(</span><span class="n">learner_slug</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Load a learner from a JSON file based on the learner's slug.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>learner_slug</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The unique slug of the learner.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>FileNotFoundError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the learner file does not exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_learner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">learner_slug</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a learner from a JSON file based on the learner&#39;s slug.</span>

<span class="sd">    Args:</span>
<span class="sd">        learner_slug (str): The unique slug of the learner.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: If the learner file does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">learner_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_learner_file_path</span><span class="p">(</span><span class="n">learner_slug</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">learner_file</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Learner file not found: </span><span class="si">{</span><span class="n">learner_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="o">=</span> <span class="n">Learner</span><span class="o">.</span><span class="n">load_from_json_file</span><span class="p">(</span><span class="n">learner_file</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_session_state</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.new_assess" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">new_assess</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>run a new  assessment for a new learner</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">new_assess</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    run a new  assessment for a new learner</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">learner_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="o">=</span> <span class="n">Learner</span><span class="p">(</span><span class="n">learner_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_session_state</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assess_learner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.on_update_ringspecs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">on_update_ringspecs</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>react on changes in the ringspecs</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">on_update_ringspecs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    react on changes in the ringspecs</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">render_item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">render_item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcm</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.prepare_svg" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">prepare_svg</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>prepare the SVG / javascript display</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">prepare_svg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    prepare the SVG / javascript display</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">SVGConfig</span><span class="p">(</span><span class="n">with_popup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">svg</span> <span class="o">=</span> <span class="n">SVG</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
    <span class="n">java_script</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">get_java_script</span><span class="p">()</span>

    <span class="c1"># Add the script using ui.add_head_html()</span>
    <span class="n">ui</span><span class="o">.</span><span class="n">add_head_html</span><span class="p">(</span><span class="n">java_script</span><span class="p">,</span> <span class="n">shared</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.prepare_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">prepare_ui</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>prepare the user interface</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">prepare_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    prepare the user interface</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">user_id</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">browser</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prepare_svg</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.render" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">render</span><span class="p">(</span><span class="n">_click_args</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Renders the json content as an SVG visualization</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>click_args</code></td>
            <td>
                  <code>object</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The click event arguments.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_click_args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renders the json content as an SVG visualization</span>

<span class="sd">    Args:</span>
<span class="sd">        click_args (object): The click event arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">input_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span>
        <span class="k">if</span> <span class="n">input_source</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_basename_without_extension</span><span class="p">(</span><span class="n">input_source</span><span class="p">)</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_div</span><span class="p">:</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;rendering </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">definition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_read_input</span><span class="p">(</span><span class="n">input_source</span><span class="p">)</span>
            <span class="c1"># Determine the format based on the file extension</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span> <span class="k">if</span> <span class="n">input_source</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.json&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;yaml&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;learner_id&quot;</span> <span class="ow">in</span> <span class="n">definition</span><span class="p">:</span>
                <span class="n">content_class</span> <span class="o">=</span> <span class="n">Learner</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">content_class</span> <span class="o">=</span> <span class="n">CompetenceTree</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">DynamicCompetenceMap</span><span class="o">.</span><span class="n">from_definition_string</span><span class="p">(</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">definition</span><span class="p">,</span> <span class="n">content_class</span><span class="o">=</span><span class="n">content_class</span><span class="p">,</span> <span class="n">markup</span><span class="o">=</span><span class="n">markup</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.render_dcm" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">render_dcm</span><span class="p">(</span><span class="n">dcm</span><span class="p">,</span> <span class="n">learner</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selected_paths</span><span class="o">=</span><span class="p">[],</span> <span class="n">clear_assessment</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>render the dynamic competence map</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>selected_paths</code></td>
            <td>
                  <code><span title="typing.List">List</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of paths that should be highlighted</p>
              </div>
            </td>
            <td>
                  <code>[]</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">render_dcm</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">dcm</span><span class="p">,</span>
    <span class="n">learner</span><span class="p">:</span> <span class="n">Learner</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">selected_paths</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="n">clear_assessment</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    render the dynamic competence map</span>

<span class="sd">    Args:</span>
<span class="sd">        dcm(DynamicCompetenceMap)</span>
<span class="sd">        selected_paths (List, optional): A list of paths that should be highlighted</span>
<span class="sd">        in the SVG. These paths typically represent specific competencies or</span>
<span class="sd">        achievements. Defaults to an empty list.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">clear_assessment</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assessment_row</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcm</span> <span class="o">=</span> <span class="n">dcm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ringspecs_view</span><span class="o">.</span><span class="n">update_rings</span><span class="p">(</span><span class="n">dcm</span><span class="o">.</span><span class="n">competence_tree</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assess_state</span><span class="p">()</span>
        <span class="n">dcm_chart</span> <span class="o">=</span> <span class="n">DcmChart</span><span class="p">(</span><span class="n">dcm</span><span class="p">)</span>
        <span class="n">svg_markup</span> <span class="o">=</span> <span class="n">dcm_chart</span><span class="o">.</span><span class="n">generate_svg_markup</span><span class="p">(</span>
            <span class="n">learner</span><span class="o">=</span><span class="n">learner</span><span class="p">,</span>
            <span class="n">selected_paths</span><span class="o">=</span><span class="n">selected_paths</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
            <span class="n">with_java_script</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">text_mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">text_mode</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># Use the new get_java_script method to get the JavaScript</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg_view</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="p">(</span><span class="n">svg_markup</span><span class="p">,)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg_view</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.save_session_state" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_session_state</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Save the current session state to app.storage.user.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save_session_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save the current session state to app.storage.user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">learner_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span><span class="o">.</span><span class="n">learner_id</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">app</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">user</span><span class="p">[</span><span class="s2">&quot;learner_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">learner_id</span>
    <span class="n">app</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">user</span><span class="p">[</span><span class="s2">&quot;assessment&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assessment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DcmSolution.show_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_ui</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>show the ui</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">show_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    show the ui</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_div</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">splitter</span><span class="p">()</span> <span class="k">as</span> <span class="n">splitter</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">splitter</span><span class="o">.</span><span class="n">before</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="s2">&quot;w-full&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">left_selection</span><span class="p">:</span>
                    <span class="n">extensions</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;json&quot;</span><span class="p">:</span> <span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">:</span> <span class="s2">&quot;.yaml&quot;</span><span class="p">}</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">example_selector</span> <span class="o">=</span> <span class="n">FileSelector</span><span class="p">(</span>
                        <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">webserver</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span>
                        <span class="n">extensions</span><span class="o">=</span><span class="n">extensions</span><span class="p">,</span>
                        <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">read_and_optionally_render</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ringspecs_view</span> <span class="o">=</span> <span class="n">RingSpecsView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="s2">&quot;w-full&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">left_grid</span><span class="p">:</span>
                    <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_row</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_input</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">input</span><span class="p">(</span>
                            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">input_changed</span>
                        <span class="p">)</span><span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;size=100&quot;</span><span class="p">)</span>
                    <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">row</span><span class="p">()</span> <span class="k">as</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_row</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;reload&quot;</span><span class="p">,</span>
                            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;refresh&quot;</span><span class="p">,</span>
                            <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reload_file</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">assessment_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;assessment&quot;</span><span class="p">,</span>
                            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;query_stats&quot;</span><span class="p">,</span>
                            <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_assess</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;open&quot;</span><span class="p">,</span>
                                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;file_open&quot;</span><span class="p">,</span>
                                <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_file</span><span class="p">,</span>
                            <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">download_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;download&quot;</span><span class="p">,</span>
                            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;download&quot;</span><span class="p">,</span>
                            <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">download</span><span class="p">,</span>
                        <span class="p">)</span>
            <span class="k">with</span> <span class="n">splitter</span><span class="o">.</span><span class="n">after</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">svg_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">html</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_webserver.DynamicCompentenceMapWebServer" class="doc doc-heading">
            <code>DynamicCompentenceMapWebServer</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ngwidgets.input_webserver.InputWebserver">InputWebserver</span></code></p>


      <p>server to supply Dynamic Competence Map Visualizations</p>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DynamicCompentenceMapWebServer</span><span class="p">(</span><span class="n">InputWebserver</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    server to supply Dynamic Competence Map Visualizations</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_config</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WebserverConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the configuration for this Webserver</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">copy_right</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">WebserverConfig</span><span class="p">(</span>
            <span class="n">short_name</span><span class="o">=</span><span class="s2">&quot;dcm&quot;</span><span class="p">,</span>
            <span class="n">copy_right</span><span class="o">=</span><span class="n">copy_right</span><span class="p">,</span>
            <span class="n">version</span><span class="o">=</span><span class="n">Version</span><span class="p">(),</span>
            <span class="n">default_port</span><span class="o">=</span><span class="mi">8885</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">server_config</span> <span class="o">=</span> <span class="n">WebserverConfig</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
        <span class="n">server_config</span><span class="o">.</span><span class="n">solution_class</span> <span class="o">=</span> <span class="n">DcmSolution</span>
        <span class="k">return</span> <span class="n">server_config</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Constructs all the necessary attributes for the WebServer object.&quot;&quot;&quot;</span>
        <span class="n">InputWebserver</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">DynamicCompentenceMapWebServer</span><span class="o">.</span><span class="n">get_config</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">examples</span> <span class="o">=</span> <span class="n">DynamicCompetenceMap</span><span class="o">.</span><span class="n">get_examples</span><span class="p">(</span><span class="n">markup</span><span class="o">=</span><span class="s2">&quot;yaml&quot;</span><span class="p">)</span>

        <span class="c1"># FastAPI endpoints</span>
        <span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/svg/&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">render_svg</span><span class="p">(</span><span class="n">svg_render_request</span><span class="p">:</span> <span class="n">SVGRenderRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            render the given request</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_svg</span><span class="p">(</span><span class="n">svg_render_request</span><span class="p">)</span>

        <span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/description/</span><span class="si">{tree_id}</span><span class="s2">/</span><span class="si">{aspect_id}</span><span class="s2">/</span><span class="si">{area_id}</span><span class="s2">/</span><span class="si">{facet_id}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">get_description_for_facet</span><span class="p">(</span>
            <span class="n">tree_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">aspect_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">area_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">facet_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Endpoints to get the description of a competence facet</span>


<span class="sd">            Args:</span>
<span class="sd">                tree_id (str): ID of the tree</span>
<span class="sd">                area_id (str): ID of the area</span>
<span class="sd">                aspect_id (str, optional): ID of the aspect. Defaults to None.</span>
<span class="sd">                facet_id (str, optional): ID of the facet. Defaults to None.</span>

<span class="sd">            Returns:</span>
<span class="sd">                HTMLResponse: HTML content of the description.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">aspect_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">area_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">facet_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_description</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/description/</span><span class="si">{tree_id}</span><span class="s2">/</span><span class="si">{aspect_id}</span><span class="s2">/</span><span class="si">{area_id}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">get_description_for_area</span><span class="p">(</span>
            <span class="n">tree_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">aspect_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">area_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Endpoints to get the description of a</span>
<span class="sd">            competence area</span>

<span class="sd">            Args:</span>
<span class="sd">                tree_id (str): ID of the tree</span>
<span class="sd">                area_id (str): ID of the area</span>
<span class="sd">                aspect_id (str, optional): ID of the aspect. Defaults to None.</span>

<span class="sd">            Returns:</span>
<span class="sd">                HTMLResponse: HTML content of the description.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">aspect_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">area_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_description</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/description/</span><span class="si">{tree_id}</span><span class="s2">/</span><span class="si">{aspect_id}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">get_description_for_aspect</span><span class="p">(</span>
            <span class="n">tree_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">aspect_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Endpoint to get the description of a competence aspect</span>

<span class="sd">            Args:</span>
<span class="sd">                tree_id (str): ID of the tree</span>
<span class="sd">                area_id (str): ID of the area</span>

<span class="sd">            Returns:</span>
<span class="sd">                HTMLResponse: HTML content of the description.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">aspect_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_description</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/description/</span><span class="si">{tree_id}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">get_description_for_tree</span><span class="p">(</span><span class="n">tree_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Endpoint to get the description of a competence tree</span>

<span class="sd">            Args:</span>
<span class="sd">                tree_id (str): ID of the tree</span>

<span class="sd">            Returns:</span>
<span class="sd">                HTMLResponse: HTML content of the description.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_description</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="c1"># nicegui RESTFul endpoints</span>
        <span class="nd">@ui</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="s2">&quot;/learner/</span><span class="si">{learner_slug}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">show_learner</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">Client</span><span class="p">,</span> <span class="n">learner_slug</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="p">(</span>
                <span class="n">client</span><span class="p">,</span> <span class="n">DcmSolution</span><span class="o">.</span><span class="n">assess_learner_by_slug</span><span class="p">,</span> <span class="n">learner_slug</span>
            <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">render_svg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">svg_render_request</span><span class="p">:</span> <span class="n">SVGRenderRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        render the given request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">svg_render_request</span>
        <span class="n">dcm</span> <span class="o">=</span> <span class="n">DynamicCompetenceMap</span><span class="o">.</span><span class="n">from_definition_string</span><span class="p">(</span>
            <span class="n">r</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">definition</span><span class="p">,</span> <span class="n">content_class</span><span class="o">=</span><span class="n">CompetenceTree</span><span class="p">,</span> <span class="n">markup</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">markup</span>
        <span class="p">)</span>
        <span class="n">dcm_chart</span> <span class="o">=</span> <span class="n">DcmChart</span><span class="p">(</span><span class="n">dcm</span><span class="p">)</span>
        <span class="n">svg_markup</span> <span class="o">=</span> <span class="n">dcm_chart</span><span class="o">.</span><span class="n">generate_svg_markup</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">with_java_script</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text_mode</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">text_mode</span>
        <span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">HTMLResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">svg_markup</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">show_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show the HTML description of a specific</span>
<span class="sd">        competence element given by the path</span>

<span class="sd">        Args:</span>
<span class="sd">            path(str): the path identifying the element</span>

<span class="sd">        Returns:</span>
<span class="sd">            HTMLResponse: The response object containing the HTML-formatted description.</span>

<span class="sd">        Raises:</span>
<span class="sd">            HTTPException: If the example name provided does not exist in the examples collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path_parts</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="n">tree_id</span> <span class="o">=</span> <span class="n">path_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">tree_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">examples</span><span class="p">:</span>
            <span class="n">example</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">examples</span><span class="p">[</span><span class="n">tree_id</span><span class="p">]</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">example</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">lookup_by_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">element</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">as_html</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">HTMLResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;No element found for </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">return</span> <span class="n">HTMLResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;unknown competence tree </span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">configure_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        configure the allowed urls</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">InputWebserver</span><span class="o">.</span><span class="n">configure_run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allowed_urls</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c1"># &quot;https://raw.githubusercontent.com/JuanIrache/DJI_SRT_Parser/master/samples/&quot;,</span>
            <span class="c1"># &quot;https://raw.githubusercontent.com/JuanIrache/dji-srt-viewer/master/samples/&quot;,</span>
            <span class="c1"># &quot;https://cycle.travel/gpx/&quot;,</span>
            <span class="c1"># &quot;https://cycle.travel/map/journey/&quot;,</span>
            <span class="n">DynamicCompetenceMap</span><span class="o">.</span><span class="n">examples_path</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DynamicCompentenceMapWebServer.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructs all the necessary attributes for the WebServer object.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Constructs all the necessary attributes for the WebServer object.&quot;&quot;&quot;</span>
    <span class="n">InputWebserver</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">DynamicCompentenceMapWebServer</span><span class="o">.</span><span class="n">get_config</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">examples</span> <span class="o">=</span> <span class="n">DynamicCompetenceMap</span><span class="o">.</span><span class="n">get_examples</span><span class="p">(</span><span class="n">markup</span><span class="o">=</span><span class="s2">&quot;yaml&quot;</span><span class="p">)</span>

    <span class="c1"># FastAPI endpoints</span>
    <span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/svg/&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">render_svg</span><span class="p">(</span><span class="n">svg_render_request</span><span class="p">:</span> <span class="n">SVGRenderRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        render the given request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_svg</span><span class="p">(</span><span class="n">svg_render_request</span><span class="p">)</span>

    <span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/description/</span><span class="si">{tree_id}</span><span class="s2">/</span><span class="si">{aspect_id}</span><span class="s2">/</span><span class="si">{area_id}</span><span class="s2">/</span><span class="si">{facet_id}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_description_for_facet</span><span class="p">(</span>
        <span class="n">tree_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">aspect_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">area_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">facet_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Endpoints to get the description of a competence facet</span>


<span class="sd">        Args:</span>
<span class="sd">            tree_id (str): ID of the tree</span>
<span class="sd">            area_id (str): ID of the area</span>
<span class="sd">            aspect_id (str, optional): ID of the aspect. Defaults to None.</span>
<span class="sd">            facet_id (str, optional): ID of the facet. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            HTMLResponse: HTML content of the description.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">aspect_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">area_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">facet_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_description</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/description/</span><span class="si">{tree_id}</span><span class="s2">/</span><span class="si">{aspect_id}</span><span class="s2">/</span><span class="si">{area_id}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_description_for_area</span><span class="p">(</span>
        <span class="n">tree_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">aspect_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">area_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Endpoints to get the description of a</span>
<span class="sd">        competence area</span>

<span class="sd">        Args:</span>
<span class="sd">            tree_id (str): ID of the tree</span>
<span class="sd">            area_id (str): ID of the area</span>
<span class="sd">            aspect_id (str, optional): ID of the aspect. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            HTMLResponse: HTML content of the description.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">aspect_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">area_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_description</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/description/</span><span class="si">{tree_id}</span><span class="s2">/</span><span class="si">{aspect_id}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_description_for_aspect</span><span class="p">(</span>
        <span class="n">tree_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">aspect_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Endpoint to get the description of a competence aspect</span>

<span class="sd">        Args:</span>
<span class="sd">            tree_id (str): ID of the tree</span>
<span class="sd">            area_id (str): ID of the area</span>

<span class="sd">        Returns:</span>
<span class="sd">            HTMLResponse: HTML content of the description.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">aspect_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_description</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/description/</span><span class="si">{tree_id}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_description_for_tree</span><span class="p">(</span><span class="n">tree_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Endpoint to get the description of a competence tree</span>

<span class="sd">        Args:</span>
<span class="sd">            tree_id (str): ID of the tree</span>

<span class="sd">        Returns:</span>
<span class="sd">            HTMLResponse: HTML content of the description.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_description</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="c1"># nicegui RESTFul endpoints</span>
    <span class="nd">@ui</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="s2">&quot;/learner/</span><span class="si">{learner_slug}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">show_learner</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">Client</span><span class="p">,</span> <span class="n">learner_slug</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="p">(</span>
            <span class="n">client</span><span class="p">,</span> <span class="n">DcmSolution</span><span class="o">.</span><span class="n">assess_learner_by_slug</span><span class="p">,</span> <span class="n">learner_slug</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DynamicCompentenceMapWebServer.configure_run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">configure_run</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>configure the allowed urls</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">configure_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    configure the allowed urls</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">InputWebserver</span><span class="o">.</span><span class="n">configure_run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allowed_urls</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c1"># &quot;https://raw.githubusercontent.com/JuanIrache/DJI_SRT_Parser/master/samples/&quot;,</span>
        <span class="c1"># &quot;https://raw.githubusercontent.com/JuanIrache/dji-srt-viewer/master/samples/&quot;,</span>
        <span class="c1"># &quot;https://cycle.travel/gpx/&quot;,</span>
        <span class="c1"># &quot;https://cycle.travel/map/journey/&quot;,</span>
        <span class="n">DynamicCompetenceMap</span><span class="o">.</span><span class="n">examples_path</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DynamicCompentenceMapWebServer.get_config" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_config</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>get the configuration for this Webserver</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_config</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WebserverConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the configuration for this Webserver</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">copy_right</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">WebserverConfig</span><span class="p">(</span>
        <span class="n">short_name</span><span class="o">=</span><span class="s2">&quot;dcm&quot;</span><span class="p">,</span>
        <span class="n">copy_right</span><span class="o">=</span><span class="n">copy_right</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="n">Version</span><span class="p">(),</span>
        <span class="n">default_port</span><span class="o">=</span><span class="mi">8885</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">server_config</span> <span class="o">=</span> <span class="n">WebserverConfig</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">server_config</span><span class="o">.</span><span class="n">solution_class</span> <span class="o">=</span> <span class="n">DcmSolution</span>
    <span class="k">return</span> <span class="n">server_config</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DynamicCompentenceMapWebServer.render_svg" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">render_svg</span><span class="p">(</span><span class="n">svg_render_request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>render the given request</p>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">render_svg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">svg_render_request</span><span class="p">:</span> <span class="n">SVGRenderRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    render the given request</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">svg_render_request</span>
    <span class="n">dcm</span> <span class="o">=</span> <span class="n">DynamicCompetenceMap</span><span class="o">.</span><span class="n">from_definition_string</span><span class="p">(</span>
        <span class="n">r</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">definition</span><span class="p">,</span> <span class="n">content_class</span><span class="o">=</span><span class="n">CompetenceTree</span><span class="p">,</span> <span class="n">markup</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">markup</span>
    <span class="p">)</span>
    <span class="n">dcm_chart</span> <span class="o">=</span> <span class="n">DcmChart</span><span class="p">(</span><span class="n">dcm</span><span class="p">)</span>
    <span class="n">svg_markup</span> <span class="o">=</span> <span class="n">dcm_chart</span><span class="o">.</span><span class="n">generate_svg_markup</span><span class="p">(</span>
        <span class="n">config</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">with_java_script</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text_mode</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">text_mode</span>
    <span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">HTMLResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">svg_markup</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.dcm_webserver.DynamicCompentenceMapWebServer.show_description" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_description</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Show the HTML description of a specific
competence element given by the path</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>path(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the path identifying the element</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>HTMLResponse</code></td>            <td>
                  <code><span title="fastapi.responses.HTMLResponse">HTMLResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The response object containing the HTML-formatted description.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="fastapi.HTTPException">HTTPException</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the example name provided does not exist in the examples collection.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">show_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Show the HTML description of a specific</span>
<span class="sd">    competence element given by the path</span>

<span class="sd">    Args:</span>
<span class="sd">        path(str): the path identifying the element</span>

<span class="sd">    Returns:</span>
<span class="sd">        HTMLResponse: The response object containing the HTML-formatted description.</span>

<span class="sd">    Raises:</span>
<span class="sd">        HTTPException: If the example name provided does not exist in the examples collection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">path_parts</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
    <span class="n">tree_id</span> <span class="o">=</span> <span class="n">path_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">tree_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">examples</span><span class="p">:</span>
        <span class="n">example</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">examples</span><span class="p">[</span><span class="n">tree_id</span><span class="p">]</span>
        <span class="n">element</span> <span class="o">=</span> <span class="n">example</span><span class="o">.</span><span class="n">competence_tree</span><span class="o">.</span><span class="n">lookup_by_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">element</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">as_html</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">HTMLResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;No element found for </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">return</span> <span class="n">HTMLResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;unknown competence tree </span><span class="si">{</span><span class="n">tree_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.dcm_webserver.SVGRenderRequest" class="doc doc-heading">
            <code>SVGRenderRequest</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


      <p>A request for rendering an SVG.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_webserver.SVGRenderRequest.name">name</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the render request.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_webserver.SVGRenderRequest.definition">definition</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The string representation of the data to be rendered, in either JSON or YAML format.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_webserver.SVGRenderRequest.markup">markup</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format of the definition ('json' or 'yaml').</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.dcm_webserver.SVGRenderRequest.config">config</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGConfig" href="#dcm.svg.SVGConfig">SVGConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional configuration for SVG rendering. Defaults to None, which uses default settings.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>dcm/dcm_webserver.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SVGRenderRequest</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A request for rendering an SVG.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str): The name of the render request.</span>
<span class="sd">        definition (str): The string representation of the data to be rendered, in either JSON or YAML format.</span>
<span class="sd">        markup (str): The format of the definition (&#39;json&#39; or &#39;yaml&#39;).</span>
<span class="sd">        config (SVGConfig): Optional configuration for SVG rendering. Defaults to None, which uses default settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">definition</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">markup</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">text_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;empty&quot;</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SVGConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="dcm.linkml" class="doc doc-heading">
            <code>linkml</code>


</h2>

    <div class="doc doc-contents ">



  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h3 id="dcm.linkml.dcm_model" class="doc doc-heading">
            <code>dcm_model</code>


</h3>

    <div class="doc doc-contents ">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="dcm.linkml.dcm_model.Achievement" class="doc doc-heading">
            <code>Achievement</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="linkml_runtime.utils.yamlutils.YAMLRoot">YAMLRoot</span></code></p>


      <p>A record of an achievement attained by a learner.</p>

              <details class="quote">
                <summary>Source code in <code>dcm/linkml/dcm_model.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Achievement</span><span class="p">(</span><span class="n">YAMLRoot</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A record of an achievement attained by a learner.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_inherited_slots</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">class_class_uri</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">URIRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">DCM</span><span class="o">.</span><span class="n">Achievement</span>
    <span class="n">class_class_curie</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;dcm:Achievement&quot;</span>
    <span class="n">class_name</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Achievement&quot;</span>
    <span class="n">class_model_uri</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">URIRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">DCM</span><span class="o">.</span><span class="n">Achievement</span>

    <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">level</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">date_assessed_iso</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">level</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_assessed_iso</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date_assessed_iso</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date_assessed_iso</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date_assessed_iso</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__post_init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="dcm.linkml.dcm_model.Learner" class="doc doc-heading">
            <code>Learner</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="linkml_runtime.utils.yamlutils.YAMLRoot">YAMLRoot</span></code></p>


      <p>An individual learner with a unique identifier and a list of achievements.</p>

              <details class="quote">
                <summary>Source code in <code>dcm/linkml/dcm_model.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Learner</span><span class="p">(</span><span class="n">YAMLRoot</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An individual learner with a unique identifier and a list of achievements.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_inherited_slots</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">class_class_uri</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">URIRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">DCM</span><span class="o">.</span><span class="n">Learner</span>
    <span class="n">class_class_curie</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;dcm:Learner&quot;</span>
    <span class="n">class_name</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Learner&quot;</span>
    <span class="n">class_model_uri</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">URIRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">DCM</span><span class="o">.</span><span class="n">Learner</span>

    <span class="n">learner_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">achievements</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="s2">&quot;Achievement&quot;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="s2">&quot;Achievement&quot;</span><span class="p">]]]]</span> <span class="o">=</span> <span class="n">empty_list</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">learner_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learner_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">learner_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">learner_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">achievements</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">achievements</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">achievements</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievements</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">achievements</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Achievement</span><span class="p">)</span> <span class="k">else</span> <span class="n">Achievement</span><span class="p">(</span><span class="o">**</span><span class="n">as_dict</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">achievements</span><span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__post_init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="dcm.radar_chart" class="doc doc-heading">
            <code>radar_chart</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2024-02-05</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="dcm.radar_chart.RadarChart" class="doc doc-heading">
            <code>RadarChart</code>


</h3>


    <div class="doc doc-contents ">


      <p>a radar chart</p>

              <details class="quote">
                <summary>Source code in <code>dcm/radar_chart.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RadarChart</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a radar chart</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">svg</span><span class="p">:</span> <span class="n">SVG</span><span class="p">,</span> <span class="n">max_score</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">100.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg</span> <span class="o">=</span> <span class="n">svg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">center_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">center_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_score</span> <span class="o">=</span> <span class="n">max_score</span>

    <span class="k">def</span> <span class="nf">add_scale_circles</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">num_circles</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">stroke_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add concentric circles to the SVG based on the SVG&#39;s configuration.</span>

<span class="sd">        Args:</span>
<span class="sd">            num_circles (int): The number of concentric circles to draw.</span>
<span class="sd">            stroke_width (float): The stroke width of the circle lines.</span>
<span class="sd">            stroke_color (str): The color of the circle lines.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_circles</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">circle_radius</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">/</span> <span class="n">num_circles</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">add_circle</span><span class="p">(</span>
                <span class="n">SVGNodeConfig</span><span class="p">(</span>
                    <span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">center_x</span><span class="p">,</span>
                    <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">center_y</span><span class="p">,</span>
                    <span class="n">width</span><span class="o">=</span><span class="n">circle_radius</span><span class="p">,</span>
                    <span class="n">stroke_width</span><span class="o">=</span><span class="n">stroke_width</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">stroke_color</span><span class="p">,</span>
                    <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>  <span class="c1"># Ensure circles are not filled</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">calculate_radar_chart_points</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">scores</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the points for the radar chart based on the given scores.</span>

<span class="sd">        Args:</span>
<span class="sd">            scores (List[float]): The scores to be represented on the radar chart.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Tuple[float, float]]: The list of points for the radar chart.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num_axes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span>
        <span class="n">angle_per_axis</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="n">num_axes</span>  <span class="c1"># Angle between each axis in radians</span>

        <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">scores</span><span class="p">):</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="n">angle_per_axis</span> <span class="o">*</span> <span class="n">i</span>  <span class="c1"># Angle for this axis</span>
            <span class="c1"># Calculate the distance from the center for this point</span>
            <span class="n">distance</span> <span class="o">=</span> <span class="p">(</span><span class="n">score</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_score</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center_x</span> <span class="o">+</span> <span class="n">distance</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center_y</span> <span class="o">+</span> <span class="n">distance</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
            <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">points</span>

    <span class="k">def</span> <span class="nf">add_scores</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">scores</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SVGNodeConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add the scores to the radar chart as a polygon.</span>

<span class="sd">        Args:</span>
<span class="sd">            scores (List[float]): The scores to be represented on the radar chart.</span>
<span class="sd">            config (SVGNodeConfig, optional): The configuration for the polygon representing the scores.</span>
<span class="sd">        &quot;&quot;&quot;</span>  <span class="c1"># Use the function to calculate points for the scores</span>
        <span class="n">radar_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_radar_chart_points</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">SVGNodeConfig</span><span class="p">(</span>
                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="n">stroke_width</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.5</span>
            <span class="p">)</span>

        <span class="c1"># Create a Polygon for the radar chart</span>
        <span class="n">radar_chart_polygon</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span>
            <span class="n">points</span><span class="o">=</span><span class="n">radar_points</span><span class="p">,</span>
            <span class="n">fill</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">fill</span><span class="p">,</span>
            <span class="n">stroke_width</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">stroke_width</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">color</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">opacity</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">add_polygon</span><span class="p">(</span><span class="n">radar_chart_polygon</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.radar_chart.RadarChart.add_scale_circles" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_scale_circles</span><span class="p">(</span><span class="n">num_circles</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">stroke_width</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">stroke_color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add concentric circles to the SVG based on the SVG's configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>num_circles</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of concentric circles to draw.</p>
              </div>
            </td>
            <td>
                  <code>10</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>stroke_width</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stroke width of the circle lines.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>stroke_color</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The color of the circle lines.</p>
              </div>
            </td>
            <td>
                  <code>&#39;black&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/radar_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_scale_circles</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">num_circles</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">stroke_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">stroke_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add concentric circles to the SVG based on the SVG&#39;s configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        num_circles (int): The number of concentric circles to draw.</span>
<span class="sd">        stroke_width (float): The stroke width of the circle lines.</span>
<span class="sd">        stroke_color (str): The color of the circle lines.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_circles</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">circle_radius</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">/</span> <span class="n">num_circles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">add_circle</span><span class="p">(</span>
            <span class="n">SVGNodeConfig</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">center_x</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">center_y</span><span class="p">,</span>
                <span class="n">width</span><span class="o">=</span><span class="n">circle_radius</span><span class="p">,</span>
                <span class="n">stroke_width</span><span class="o">=</span><span class="n">stroke_width</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">stroke_color</span><span class="p">,</span>
                <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>  <span class="c1"># Ensure circles are not filled</span>
            <span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.radar_chart.RadarChart.add_scores" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_scores</span><span class="p">(</span><span class="n">scores</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add the scores to the radar chart as a polygon.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>scores</code></td>
            <td>
                  <code><span title="typing.List">List</span>[float]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The scores to be represented on the radar chart.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>config</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGNodeConfig" href="#dcm.svg.SVGNodeConfig">SVGNodeConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configuration for the polygon representing the scores.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/radar_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_scores</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">scores</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SVGNodeConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add the scores to the radar chart as a polygon.</span>

<span class="sd">    Args:</span>
<span class="sd">        scores (List[float]): The scores to be represented on the radar chart.</span>
<span class="sd">        config (SVGNodeConfig, optional): The configuration for the polygon representing the scores.</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># Use the function to calculate points for the scores</span>
    <span class="n">radar_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_radar_chart_points</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">SVGNodeConfig</span><span class="p">(</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="n">stroke_width</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.5</span>
        <span class="p">)</span>

    <span class="c1"># Create a Polygon for the radar chart</span>
    <span class="n">radar_chart_polygon</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span>
        <span class="n">points</span><span class="o">=</span><span class="n">radar_points</span><span class="p">,</span>
        <span class="n">fill</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">fill</span><span class="p">,</span>
        <span class="n">stroke_width</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">stroke_width</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">color</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">opacity</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">add_polygon</span><span class="p">(</span><span class="n">radar_chart_polygon</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.radar_chart.RadarChart.calculate_radar_chart_points" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calculate_radar_chart_points</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Calculate the points for the radar chart based on the given scores.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>scores</code></td>
            <td>
                  <code><span title="typing.List">List</span>[float]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The scores to be represented on the radar chart.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Tuple">Tuple</span>[float, float]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[Tuple[float, float]]: The list of points for the radar chart.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/radar_chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calculate_radar_chart_points</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">scores</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the points for the radar chart based on the given scores.</span>

<span class="sd">    Args:</span>
<span class="sd">        scores (List[float]): The scores to be represented on the radar chart.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[Tuple[float, float]]: The list of points for the radar chart.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num_axes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span>
    <span class="n">angle_per_axis</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="n">num_axes</span>  <span class="c1"># Angle between each axis in radians</span>

    <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">scores</span><span class="p">):</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">angle_per_axis</span> <span class="o">*</span> <span class="n">i</span>  <span class="c1"># Angle for this axis</span>
        <span class="c1"># Calculate the distance from the center for this point</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="p">(</span><span class="n">score</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_score</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center_x</span> <span class="o">+</span> <span class="n">distance</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center_y</span> <span class="o">+</span> <span class="n">distance</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">points</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="dcm.svg" class="doc doc-heading">
            <code>svg</code>


</h2>

    <div class="doc doc-contents ">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="dcm.svg.DonutSegment" class="doc doc-heading">
            <code>DonutSegment</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGNode" href="#dcm.svg.SVGNode">SVGNode</a></code></p>


      <p>A donut segment representing a
section of a donut chart.</p>

              <details class="quote">
                <summary>Source code in <code>dcm/svg.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">DonutSegment</span><span class="p">(</span><span class="n">SVGNode</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A donut segment representing a</span>
<span class="sd">    section of a donut chart.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cx</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">cy</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">inner_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">outer_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">start_angle</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">end_angle</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">360.0</span>
    <span class="n">text_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">large_arc_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determine if the arc should be drawn as a large-arc (values &gt;= 180 degrees).</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: &quot;1&quot; if the arc is a large arc, otherwise &quot;0&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">large_arc_flag</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_angle</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_angle</span> <span class="o">&gt;=</span> <span class="mi">180</span> <span class="k">else</span> <span class="s2">&quot;0&quot;</span>
        <span class="k">return</span> <span class="n">large_arc_flag</span>

    <span class="k">def</span> <span class="nf">relative_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle_factor</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate a relative angle of the donut segment.&quot;&quot;&quot;</span>
        <span class="n">relative_angle</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_angle</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_angle</span><span class="p">)</span> <span class="o">*</span> <span class="n">angle_factor</span>
        <span class="k">return</span> <span class="n">relative_angle</span>

    <span class="k">def</span> <span class="nf">radial_radius</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radial_offset</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the radial radius for the given radial offset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">radial_radius</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inner_radius</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outer_radius</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">inner_radius</span><span class="p">)</span> <span class="o">*</span> <span class="n">radial_offset</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">radial_radius</span>

    <span class="k">def</span> <span class="nf">x_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">radial_radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">+</span> <span class="n">radial_radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cy</span> <span class="o">+</span> <span class="n">radial_radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">get_arc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radial_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Arc</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the Arc for the given radial offset</span>

<span class="sd">        Args:</span>
<span class="sd">            radial_offset(float): e.g. 0.0 - inner 1.0 outer 0.5 middle</span>
<span class="sd">        Returns:</span>
<span class="sd">            Arc: the arc at the given radial offset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Calculate the adjusted radius within the bounds of inner and outer radii</span>
        <span class="n">radial_radius</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radial_radius</span><span class="p">(</span><span class="n">radial_offset</span><span class="p">)</span>

        <span class="c1"># Calculate the start and end points of the arc</span>
        <span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_y</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_angle</span><span class="p">,</span> <span class="n">radial_radius</span><span class="p">)</span>
        <span class="n">end_x</span><span class="p">,</span> <span class="n">end_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_y</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_angle</span><span class="p">,</span> <span class="n">radial_radius</span><span class="p">)</span>
        <span class="n">middle_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative_angle</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">middle_x</span><span class="p">,</span> <span class="n">middle_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_y</span><span class="p">(</span><span class="n">middle_angle</span><span class="p">,</span> <span class="n">radial_radius</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Arc</span><span class="p">(</span>
            <span class="n">radius</span><span class="o">=</span><span class="n">radial_radius</span><span class="p">,</span>
            <span class="n">start_x</span><span class="o">=</span><span class="n">start_x</span><span class="p">,</span>
            <span class="n">start_y</span><span class="o">=</span><span class="n">start_y</span><span class="p">,</span>
            <span class="n">middle_x</span><span class="o">=</span><span class="n">middle_x</span><span class="p">,</span>
            <span class="n">middle_y</span><span class="o">=</span><span class="n">middle_y</span><span class="p">,</span>
            <span class="n">end_x</span><span class="o">=</span><span class="n">end_x</span><span class="p">,</span>
            <span class="n">end_y</span><span class="o">=</span><span class="n">end_y</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="dcm.svg.DonutSegment.large_arc_flag" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">large_arc_flag</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Determine if the arc should be drawn as a large-arc (values &gt;= 180 degrees).</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>"1" if the arc is a large arc, otherwise "0".</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="dcm.svg.DonutSegment.get_arc" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_arc</span><span class="p">(</span><span class="n">radial_offset</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Get the Arc for the given radial offset</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>radial_offset(float)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>e.g. 0.0 - inner 1.0 outer 0.5 middle</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns:
    Arc: the arc at the given radial offset</p>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_arc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radial_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Arc</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the Arc for the given radial offset</span>

<span class="sd">    Args:</span>
<span class="sd">        radial_offset(float): e.g. 0.0 - inner 1.0 outer 0.5 middle</span>
<span class="sd">    Returns:</span>
<span class="sd">        Arc: the arc at the given radial offset</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Calculate the adjusted radius within the bounds of inner and outer radii</span>
    <span class="n">radial_radius</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radial_radius</span><span class="p">(</span><span class="n">radial_offset</span><span class="p">)</span>

    <span class="c1"># Calculate the start and end points of the arc</span>
    <span class="n">start_x</span><span class="p">,</span> <span class="n">start_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_y</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_angle</span><span class="p">,</span> <span class="n">radial_radius</span><span class="p">)</span>
    <span class="n">end_x</span><span class="p">,</span> <span class="n">end_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_y</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end_angle</span><span class="p">,</span> <span class="n">radial_radius</span><span class="p">)</span>
    <span class="n">middle_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relative_angle</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">middle_x</span><span class="p">,</span> <span class="n">middle_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_y</span><span class="p">(</span><span class="n">middle_angle</span><span class="p">,</span> <span class="n">radial_radius</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Arc</span><span class="p">(</span>
        <span class="n">radius</span><span class="o">=</span><span class="n">radial_radius</span><span class="p">,</span>
        <span class="n">start_x</span><span class="o">=</span><span class="n">start_x</span><span class="p">,</span>
        <span class="n">start_y</span><span class="o">=</span><span class="n">start_y</span><span class="p">,</span>
        <span class="n">middle_x</span><span class="o">=</span><span class="n">middle_x</span><span class="p">,</span>
        <span class="n">middle_y</span><span class="o">=</span><span class="n">middle_y</span><span class="p">,</span>
        <span class="n">end_x</span><span class="o">=</span><span class="n">end_x</span><span class="p">,</span>
        <span class="n">end_y</span><span class="o">=</span><span class="n">end_y</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.DonutSegment.radial_radius" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">radial_radius</span><span class="p">(</span><span class="n">radial_offset</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the radial radius for the given radial offset</p>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">radial_radius</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radial_offset</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the radial radius for the given radial offset</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">radial_radius</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inner_radius</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outer_radius</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">inner_radius</span><span class="p">)</span> <span class="o">*</span> <span class="n">radial_offset</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">radial_radius</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.DonutSegment.relative_angle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">relative_angle</span><span class="p">(</span><span class="n">angle_factor</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Calculate a relative angle of the donut segment.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">relative_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle_factor</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate a relative angle of the donut segment.&quot;&quot;&quot;</span>
    <span class="n">relative_angle</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_angle</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_angle</span><span class="p">)</span> <span class="o">*</span> <span class="n">angle_factor</span>
    <span class="k">return</span> <span class="n">relative_angle</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.svg.Polygon" class="doc doc-heading">
            <code>Polygon</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGNode" href="#dcm.svg.SVGNode">SVGNode</a></code></p>


      <p>A polygon representing a series of data points in a radar chart.</p>

              <details class="quote">
                <summary>Source code in <code>dcm/svg.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Polygon</span><span class="p">(</span><span class="n">SVGNode</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A polygon representing a series of data points in a radar chart.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># List of points (x, y) forming the polygon</span>
    <span class="n">points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.svg.SVG" class="doc doc-heading">
            <code>SVG</code>


</h3>


    <div class="doc doc-contents ">


      <p>Class for creating SVG drawings.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="dcm.svg.SVG.config">config</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGConfig" href="#dcm.svg.SVGConfig">SVGConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration for the SVG drawing.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>dcm/svg.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SVG</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for creating SVG drawings.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        config (SVGConfig): Configuration for the SVG drawing.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">SVGConfig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize SVG object with given configuration.</span>

<span class="sd">        Args:</span>
<span class="sd">            config (SVGConfig): Configuration for SVG generation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span> <span class="k">if</span> <span class="n">config</span> <span class="k">else</span> <span class="n">SVGConfig</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">indent</span>

    <span class="k">def</span> <span class="nf">get_indent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the indentation for the given level</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indentation</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">level</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">indentation</span>

    <span class="k">def</span> <span class="nf">get_svg_style</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Define styles for SVG elements.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: String containing style definitions for SVG.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="si">}</span><span class="s2">&lt;style&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">.hoverable </span><span class="se">{{</span><span class="s2"> cursor: pointer; fill-opacity: 1; stroke: black; stroke-width: 0.5; </span><span class="se">}}\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">.hoverable:hover </span><span class="se">{{</span><span class="s2"> fill-opacity: 0.7; </span><span class="se">}}\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">.selected </span><span class="se">{{</span><span class="s2"> fill-opacity: 0.5; stroke: blue !important; stroke-width: 1.5;</span><span class="se">}}\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">.noclick </span><span class="se">{{</span><span class="s2"> pointer-events: none; </span><span class="se">}}\n</span><span class="s2">&quot;</span>  <span class="c1"># style for non-clickable text</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">with_popup</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">+=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">.popup </span><span class="se">{{\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">border: 2px solid black;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">border-radius: 15px;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">overflow: auto;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># changed to &#39;auto&#39; to allow scrolling only if needed</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">background: white;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">box-sizing: border-box;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># ensures padding and border are included</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">padding: 10px;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># optional padding inside the popup</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">height: 100%;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># adjusts height relative to foreignObject</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">width: 100%;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># adjusts width relative to foreignObject</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="se">}}\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">.close-btn </span><span class="se">{{\n</span><span class="s2">&quot;</span>  <span class="c1"># style for the close button</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">cursor: pointer;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">position: absolute;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">top: 0;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">right: 0;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">padding: 5px;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">font-size: 20px;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">user-select: none;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># prevents text selection on click</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="se">}}\n</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="si">}</span><span class="s2">&lt;/style&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">style</span>

    <span class="k">def</span> <span class="nf">get_text_width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimate the width of a text string in the SVG based on the font size and font name.</span>

<span class="sd">        Args:</span>
<span class="sd">            text (str): The text content.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The estimated width of the text in pixels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">average_char_width_factor</span> <span class="o">=</span> <span class="mf">0.6</span>
        <span class="n">average_char_width</span> <span class="o">=</span> <span class="n">average_char_width_factor</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">font_size</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">average_char_width</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_text_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation_angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adjusts the rotation angle for SVG text elements to ensure that the text</span>
<span class="sd">        is upright and readable in a circular chart. The text will be rotated</span>
<span class="sd">        by 180 degrees if it is in the lower half of the chart (between 90 and 270 degrees).</span>

<span class="sd">        Args:</span>
<span class="sd">            rotation_angle (float): The initial rotation angle of the text element.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The adjusted rotation angle for the text element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># In the bottom half of the chart (90 to 270 degrees), the text</span>
        <span class="c1"># would appear upside down, so we rotate it by 180 degrees.</span>
        <span class="k">if</span> <span class="mi">90</span> <span class="o">&lt;=</span> <span class="n">rotation_angle</span> <span class="o">&lt;</span> <span class="mi">270</span><span class="p">:</span>
            <span class="n">rotation_angle</span> <span class="o">-=</span> <span class="mi">180</span>

        <span class="c1"># Return the adjusted angle. No adjustment is needed for the</span>
        <span class="c1"># top half of the chart as the text is already upright.</span>
        <span class="k">return</span> <span class="n">rotation_angle</span>

    <span class="k">def</span> <span class="nf">get_donut_path</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
        <span class="n">radial_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="n">middle_arc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an SVG path definition for an arc using the properties of a DonutSegment.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment (DonutSegment): The segment for which to create the path.</span>
<span class="sd">            radial_offset(float): 0 to 1 - useable in middle_arc mode</span>
<span class="sd">            middle_arc(bool): if True get the middle arc</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: SVG path definition string for the full donut segment or the middle_arc if middle_arc is set to true.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">middle_arc</span><span class="p">:</span>
            <span class="n">arc</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">get_arc</span><span class="p">(</span><span class="n">radial_offset</span><span class="o">=</span><span class="n">radial_offset</span><span class="p">)</span>

            <span class="c1"># Create the path for the middle arc</span>
            <span class="n">path_str</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;M </span><span class="si">{</span><span class="n">arc</span><span class="o">.</span><span class="n">start_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">arc</span><span class="o">.</span><span class="n">start_y</span><span class="si">}</span><span class="s2"> &quot;</span>  <span class="c1"># Move to start of middle arc</span>
                <span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="n">arc</span><span class="o">.</span><span class="n">radius</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">arc</span><span class="o">.</span><span class="n">radius</span><span class="si">}</span><span class="s2"> 0 </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">large_arc_flag</span><span class="si">}</span><span class="s2"> 1 </span><span class="si">{</span><span class="n">arc</span><span class="o">.</span><span class="n">end_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">arc</span><span class="o">.</span><span class="n">end_y</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">outer_arc</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">get_arc</span><span class="p">(</span><span class="n">radial_offset</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">inner_arc</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">get_arc</span><span class="p">(</span><span class="n">radial_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">path_str</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;M </span><span class="si">{</span><span class="n">inner_arc</span><span class="o">.</span><span class="n">start_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">inner_arc</span><span class="o">.</span><span class="n">start_y</span><span class="si">}</span><span class="s2"> &quot;</span>  <span class="c1"># Move to start of inner arc</span>
                <span class="sa">f</span><span class="s2">&quot;L </span><span class="si">{</span><span class="n">outer_arc</span><span class="o">.</span><span class="n">start_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">outer_arc</span><span class="o">.</span><span class="n">start_y</span><span class="si">}</span><span class="s2"> &quot;</span>  <span class="c1"># Line to start of outer arc</span>
                <span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">outer_radius</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">outer_radius</span><span class="si">}</span><span class="s2"> 0 </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">large_arc_flag</span><span class="si">}</span><span class="s2"> 1 </span><span class="si">{</span><span class="n">outer_arc</span><span class="o">.</span><span class="n">end_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">outer_arc</span><span class="o">.</span><span class="n">end_y</span><span class="si">}</span><span class="s2"> &quot;</span>  <span class="c1"># Outer arc</span>
                <span class="sa">f</span><span class="s2">&quot;L </span><span class="si">{</span><span class="n">inner_arc</span><span class="o">.</span><span class="n">end_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">inner_arc</span><span class="o">.</span><span class="n">end_y</span><span class="si">}</span><span class="s2"> &quot;</span>  <span class="c1"># Line to end of inner arc</span>
                <span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">inner_radius</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">inner_radius</span><span class="si">}</span><span class="s2"> 0 </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">large_arc_flag</span><span class="si">}</span><span class="s2"> 0 </span><span class="si">{</span><span class="n">inner_arc</span><span class="o">.</span><span class="n">start_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">inner_arc</span><span class="o">.</span><span class="n">start_y</span><span class="si">}</span><span class="s2"> &quot;</span>  <span class="c1"># Inner arc (reverse)</span>
                <span class="s2">&quot;Z&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">path_str</span>

    <span class="k">def</span> <span class="nf">add_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an SVG element to the elements list with proper indentation.</span>

<span class="sd">        Args:</span>
<span class="sd">            element (str): SVG element to be added.</span>
<span class="sd">            indent_level (int): Indentation level for the element.</span>
<span class="sd">            comment(str): optional comment to add</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_indent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="n">indented_comment</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_indent</span><span class="si">}</span><span class="s2">&lt;!-- </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s2"> --&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">indented_comment</span><span class="p">)</span>
        <span class="n">indented_element</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_indent</span><span class="si">}{</span><span class="n">element</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">indented_element</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">SVGNodeConfig</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a circle element to the SVG, optionally making it clickable and with a hover effect.</span>

<span class="sd">        Args:</span>
<span class="sd">            config (SVGNodeConfig): Configuration for the circle element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">fill</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">fill</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_color</span>
        <span class="n">circle_element</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;circle cx=&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s1">&quot; cy=&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s1">&quot; r=&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">width</span><span class="si">}</span><span class="s1">&quot; fill=&quot;</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s1">&quot; class=&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">element_class</span><span class="si">}</span><span class="s1">&quot; /&gt;&#39;</span>

        <span class="c1"># If URL is provided, wrap the circle in an anchor tag to make it clickable</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
            <span class="n">circle_indent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">indent_level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">circle_element</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;a xlink:href=&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot; target=&quot;_blank&quot;&gt;</span>
<span class="si">{</span><span class="n">circle_indent</span><span class="si">}{</span><span class="n">circle_element</span><span class="si">}</span>
<span class="s2">&lt;/a&gt;&quot;&quot;&quot;</span>

        <span class="c1"># Use add_group to add the circle element with proper indentation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_group</span><span class="p">(</span>
            <span class="n">circle_element</span><span class="p">,</span>
            <span class="n">group_id</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">group_class</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">element_class</span><span class="p">,</span>
            <span class="n">indent_level</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">indent_level</span><span class="p">,</span>
            <span class="n">comment</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_rectangle</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">fill</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a rectangle element to the SVG.</span>

<span class="sd">        Args:</span>
<span class="sd">            x (int): X-coordinate of the rectangle&#39;s top-left corner.</span>
<span class="sd">            y (int): Y-coordinate of the rectangle&#39;s top-left corner.</span>
<span class="sd">            width (int): Width of the rectangle.</span>
<span class="sd">            height (int): Height of the rectangle.</span>
<span class="sd">            fill (str, optional): Fill color of the rectangle. Defaults to the default color.</span>
<span class="sd">            indent_level (int): Indentation level for the rectangle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">fill</span> <span class="k">if</span> <span class="n">fill</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_color</span>
        <span class="n">rect</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;rect x=&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">&quot; y=&quot;</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s1">&quot; width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s1">&quot; height=&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s1">&quot; fill=&quot;</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s1">&quot; /&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">polygon</span><span class="p">:</span> <span class="n">Polygon</span><span class="p">,</span> <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a polygon to the SVG.</span>

<span class="sd">        Args:</span>
<span class="sd">            polygon (Polygon): The polygon to add to the SVG.</span>
<span class="sd">            indent_level (int): Indentation level for the element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">points_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">polygon</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
        <span class="n">fill_color</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">fill</span> <span class="k">if</span> <span class="n">polygon</span><span class="o">.</span><span class="n">fill</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_color</span>
        <span class="n">opacity</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">opacity</span>
        <span class="n">stroke_color</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">color</span> <span class="k">if</span> <span class="n">polygon</span><span class="o">.</span><span class="n">color</span> <span class="k">else</span> <span class="s2">&quot;black&quot;</span>
        <span class="n">stroke_width</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">stroke_width</span>

        <span class="n">polygon_element</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;&lt;polygon points=&quot;</span><span class="si">{</span><span class="n">points_str</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;stroke=&quot;</span><span class="si">{</span><span class="n">stroke_color</span><span class="si">}</span><span class="s1">&quot; stroke-width=&quot;</span><span class="si">{</span><span class="n">stroke_width</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;fill=&quot;</span><span class="si">{</span><span class="n">fill_color</span><span class="si">}</span><span class="s1">&quot; fill-opacity=&quot;</span><span class="si">{</span><span class="n">opacity</span><span class="si">}</span><span class="s1">&quot; /&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="p">)</span>

        <span class="c1"># If a title (tooltip) is provided, create a title element</span>
        <span class="n">title_element</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&lt;title&gt;</span><span class="si">{</span><span class="n">html</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">title</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/title&gt;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">polygon</span><span class="o">.</span><span class="n">title</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Combine polygon and title into one string without adding indentation here</span>
        <span class="n">group_content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">polygon_element</span><span class="si">}{</span><span class="n">title_element</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># Use add_group to add the polygon with proper indentation and optional comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_group</span><span class="p">(</span>
            <span class="n">group_content</span><span class="p">,</span>
            <span class="n">group_id</span><span class="o">=</span><span class="n">polygon</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">group_class</span><span class="o">=</span><span class="s2">&quot;hoverable&quot;</span><span class="p">,</span>  <span class="c1"># You might want to adjust this or make it configurable</span>
            <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span><span class="p">,</span>
            <span class="n">comment</span><span class="o">=</span><span class="n">polygon</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_legend_column</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a legend column to the SVG.</span>

<span class="sd">        Args:</span>
<span class="sd">            items (List[Tuple[str, str]]): List of tuples with color code and label.</span>
<span class="sd">            title (str): Title of the legend.</span>
<span class="sd">            x (int): X position of the legend.</span>
<span class="sd">            y (int): Y position of the legend.</span>
<span class="sd">            width (int): Width of the color box in the legend.</span>
<span class="sd">            height (int): Height of each legend item.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">height</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">font_weight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_rectangle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">index</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">5</span><span class="p">),</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span>
                <span class="n">x</span> <span class="o">+</span> <span class="n">width</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span>
                <span class="n">y</span> <span class="o">+</span> <span class="n">index</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">label</span><span class="p">,</span>
                <span class="n">center_v</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_text</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">fill</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="n">font_weight</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span>
        <span class="n">text_anchor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;start&quot;</span><span class="p">,</span>
        <span class="n">transform</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">center_v</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">text_class</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;noclick&quot;</span><span class="p">,</span>
        <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add text to the SVG.</span>

<span class="sd">        Args:</span>
<span class="sd">            x (int): X position of the text.</span>
<span class="sd">            y (int): Y position of the text.</span>
<span class="sd">            text(str): Text content.</span>
<span class="sd">            fill (str, optional): Fill color of the text. Defaults to &quot;black&quot;.</span>
<span class="sd">            font_weight (str, optional): Font weight (normal, bold, etc.). Defaults to &quot;normal&quot;.</span>
<span class="sd">            text_anchor (str, optional): Text alignment (start, middle, end). Defaults to &quot;start&quot;.</span>
<span class="sd">            indent_level(int): the indentation level to apply</span>
<span class="sd">            center_v (bool): If True, y as the vertical center of the text. Default is False.</span>
<span class="sd">            text_class(str): &quot;noclick&quot; by default so that elements below are clickable</span>
<span class="sd">            transform (str, optional): Transformation for the text (e.g., rotation). Defaults to an empty string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">text_obj</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">center_v</span><span class="p">:</span>
            <span class="c1"># y-offset adjustment to center the text vertically</span>
            <span class="n">y</span> <span class="o">-=</span> <span class="n">text_obj</span><span class="o">.</span><span class="n">total_text_height</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="c1"># adjust for the ascender / descender vertical font weighting</span>
            <span class="n">y</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">font_size</span> <span class="o">*</span> <span class="mf">0.5</span>
        <span class="c1"># Create a text element to hold the tspan elements</span>
        <span class="c1"># Only include the transform attribute if it is provided</span>
        <span class="n">transform_attr</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;transform=&quot;</span><span class="si">{</span><span class="n">transform</span><span class="si">}</span><span class="s1">&quot; &#39;</span> <span class="k">if</span> <span class="n">transform</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

        <span class="n">text_element</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="p">)</span><span class="si">}</span><span class="s1">&lt;text class=&quot;</span><span class="si">{</span><span class="n">text_class</span><span class="si">}</span><span class="s1">&quot; x=&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">&quot; y=&quot;</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s1">&quot; fill=&quot;</span><span class="si">{</span><span class="n">fill</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;font-family=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">font</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;font-size=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">font_size</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;font-weight=&quot;</span><span class="si">{</span><span class="n">font_weight</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;text-anchor=&quot;</span><span class="si">{</span><span class="n">text_anchor</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;dominant-baseline=&quot;middle&quot; &#39;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">transform_attr</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
        <span class="p">)</span>
        <span class="c1"># Add tspan elements for each line</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">text_obj</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="n">escaped_line</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="n">text_element</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="si">}</span><span class="s1">&lt;tspan x=&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">&quot; dy=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">line_height</span><span class="si">}</span><span class="s1">&quot;&gt;</span><span class="si">{</span><span class="n">escaped_line</span><span class="si">}</span><span class="s1">&lt;/tspan&gt;&#39;</span>

        <span class="n">text_element</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/text&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="n">text_element</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_group</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">group_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">group_class</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a group of elements to the SVG.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str): SVG content to be grouped.</span>
<span class="sd">            group_id (str, optional): ID for the group.</span>
<span class="sd">            group_class (str, optional): Class for the group.</span>
<span class="sd">            indent_level (int): Indentation level for the group.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">group_attrs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">group_id</span><span class="p">:</span>
            <span class="n">group_attrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;id=&quot;</span><span class="si">{</span><span class="n">group_id</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">group_class</span><span class="p">:</span>
            <span class="n">group_attrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;class=&quot;</span><span class="si">{</span><span class="n">group_class</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="n">attrs_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">group_attrs</span><span class="p">)</span>
        <span class="n">indented_content</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="si">}{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">group_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;g </span><span class="si">{</span><span class="n">attrs_str</span><span class="si">}</span><span class="s2">&gt;</span>
<span class="si">{</span><span class="n">indented_content</span><span class="si">}</span>
<span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/g&gt;</span>
<span class="s2">&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="n">group_str</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_donut_segment</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">SVGNodeConfig</span><span class="p">,</span>
        <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a donut segment to the SVG.</span>

<span class="sd">        Args:</span>
<span class="sd">            config (SVGNodeConfig): Configuration for the donut segment.</span>
<span class="sd">            segment(DonutSegment)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">fill</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">fill</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_color</span>
        <span class="n">stroke_color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">color</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">color</span> <span class="k">else</span> <span class="s2">&quot;black&quot;</span>

        <span class="n">path_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_donut_path</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>

        <span class="c1"># Assemble the path and title elements</span>
        <span class="n">path_element</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;&lt;path d=&quot;</span><span class="si">{</span><span class="n">path_str</span><span class="si">}</span><span class="s1">&quot; stroke=&quot;</span><span class="si">{</span><span class="n">stroke_color</span><span class="si">}</span><span class="s1">&quot; fill=&quot;</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s1">&quot; /&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">title</span><span class="p">:</span>
            <span class="n">escaped_title</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>  <span class="c1"># Escape special characters</span>

            <span class="n">title_element</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;title&gt;</span><span class="si">{</span><span class="n">escaped_title</span><span class="si">}</span><span class="s2">&lt;/title&gt;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">title_element</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># Combine path and title into one string without adding indentation here</span>
        <span class="n">group_content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path_element</span><span class="si">}{</span><span class="n">title_element</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># Check if the segment should be shown as a popup</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">show_as_popup</span><span class="p">:</span>
            <span class="c1"># Add JavaScript to handle popup logic</span>
            <span class="n">onclick_action</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;onclick=</span><span class="se">\&quot;</span><span class="s2">showPopup(&#39;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&#39;, evt,this)</span><span class="se">\&quot;</span><span class="s2">&quot;</span>
            <span class="n">group_content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;g </span><span class="si">{</span><span class="n">onclick_action</span><span class="si">}</span><span class="s2">&gt;</span><span class="si">{</span><span class="n">group_content</span><span class="si">}</span><span class="s2">&lt;/g&gt;&quot;</span>
        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
            <span class="c1"># Regular link behavior</span>
            <span class="n">group_content</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;&lt;a xlink:href=&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s1">&quot; target=&quot;_blank&quot;&gt;</span><span class="si">{</span><span class="n">group_content</span><span class="si">}</span><span class="s1">&lt;/a&gt;&#39;</span>
            <span class="p">)</span>

        <span class="c1"># Use add_group to add the pie segment with proper indentation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_group</span><span class="p">(</span>
            <span class="n">group_content</span><span class="p">,</span>
            <span class="n">group_id</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">group_class</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">element_class</span><span class="p">,</span>
            <span class="n">indent_level</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">comment</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_text_to_donut_segment</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
        <span class="n">color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">text_class</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;noclick&quot;</span><span class="p">,</span>
        <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add text to a donut segment with various direction options.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment (DonutSegment): The donut segment to which text will be added.</span>
<span class="sd">            text (str): The text content to be added.</span>
<span class="sd">            direction (str): The direction in which the text should be drawn.</span>
<span class="sd">                             Options are &quot;horizontal&quot;, &quot;angled&quot;, or &quot;curved&quot;.</span>
<span class="sd">            color (str): The color of the text. Default is &quot;white&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;horizontal&quot;</span><span class="p">,</span> <span class="s2">&quot;angled&quot;</span><span class="p">]:</span>
            <span class="c1"># Calculate position for horizontal or angled text</span>
            <span class="c1"># Use the get_arc method to find the position for horizontal or angled text</span>
            <span class="n">mid_arc</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">get_arc</span><span class="p">(</span><span class="n">radial_offset</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Get the mid-arc</span>
            <span class="n">text_x</span><span class="p">,</span> <span class="n">text_y</span> <span class="o">=</span> <span class="n">mid_arc</span><span class="o">.</span><span class="n">middle_x</span><span class="p">,</span> <span class="n">mid_arc</span><span class="o">.</span><span class="n">middle_y</span>

            <span class="c1"># Adjust text anchor and rotation for better readability</span>
            <span class="n">transform</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;angled&quot;</span><span class="p">:</span>
                <span class="n">mid_angle</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">relative_angle</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
                <span class="n">rotation_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text_rotation</span><span class="p">(</span><span class="n">mid_angle</span><span class="p">)</span>
                <span class="n">transform</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;rotate(</span><span class="si">{</span><span class="n">rotation_angle</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">text_x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">text_y</span><span class="si">}</span><span class="s2">)&quot;</span>

            <span class="c1"># Add text using the add_text method</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">text_x</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="n">text_y</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
                <span class="n">fill</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                <span class="n">font_weight</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span>
                <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span><span class="p">,</span>
                <span class="n">transform</span><span class="o">=</span><span class="n">transform</span><span class="p">,</span>
                <span class="n">text_anchor</span><span class="o">=</span><span class="s2">&quot;middle&quot;</span><span class="p">,</span>
                <span class="n">center_v</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;curved&quot;</span><span class="p">:</span>
            <span class="n">text_obj</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">text_obj</span><span class="o">.</span><span class="n">lines</span><span class="p">):</span>
                <span class="n">radial_offset</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">text_obj</span><span class="o">.</span><span class="n">line_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
                <span class="c1"># Create a path for the text to follow</span>
                <span class="n">path_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;path</span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">start_angle</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">end_angle</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">path_d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_donut_path</span><span class="p">(</span>
                    <span class="n">segment</span><span class="p">,</span> <span class="n">middle_arc</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">radial_offset</span><span class="o">=</span><span class="n">radial_offset</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;&lt;path id=&quot;</span><span class="si">{</span><span class="n">path_id</span><span class="si">}</span><span class="s1">&quot; d=&quot;</span><span class="si">{</span><span class="n">path_d</span><span class="si">}</span><span class="s1">&quot; fill=&quot;none&quot; stroke=&quot;none&quot; /&gt;&#39;</span>
                <span class="p">)</span>

                <span class="n">text_tag</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;text class=&quot;</span><span class="si">{</span><span class="n">text_class</span><span class="si">}</span><span class="s2">&quot; fill=&quot;</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s2">&quot; font-family=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">font</span><span class="si">}</span><span class="s2">&quot; font-size=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">font_size</span><span class="si">}</span><span class="s2">&quot;&gt;&quot;&quot;&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="n">text_tag</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span><span class="p">)</span>
                <span class="n">text_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;textPath  xlink:href=&quot;#</span><span class="si">{</span><span class="n">path_id</span><span class="si">}</span><span class="s2">&quot; startOffset=&quot;50%&quot; dominant-baseline=&quot;middle&quot; text-anchor=&quot;middle&quot;&gt;</span><span class="si">{</span><span class="n">html</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/textPath&gt;&quot;&quot;&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="n">text_path</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="s2">&quot;&lt;/text&gt;&quot;</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid direction </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_java_script</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the java script code for interactive behavior</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">popup_script</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    &lt;script&gt;</span>
<span class="s2">         function showPopup(url, evt,element) {</span>
<span class="s2">            // show a Popup fetching html content from the given url</span>
<span class="s2">            // for the given element</span>
<span class="s2">            // Handle the selection of the popup element</span>
<span class="s2">            selectPopupElement(element);</span>
<span class="s2">            var popup = document.getElementById(&#39;dcm-svg-popup&#39;);</span>
<span class="s2">            var iframe = document.getElementById(&#39;popup-iframe&#39;);</span>
<span class="s2">            var svgRect = evt.target.getBoundingClientRect();</span>
<span class="s2">            var svg = document.querySelector(&#39;svg&#39;);</span>
<span class="s2">            var svgPoint = svg.createSVGPoint();</span>
<span class="s2">            svgPoint.x = evt.clientX - svgRect.left;</span>
<span class="s2">            svgPoint.y = evt.clientY - svgRect.top;</span>

<span class="s2">            // Position the popup near the click event</span>
<span class="s2">            popup.setAttribute(&#39;x&#39;, svgPoint.x);</span>
<span class="s2">            popup.setAttribute(&#39;y&#39;, svgPoint.y);</span>
<span class="s2">            // Set the iframe src and make the popup visible</span>
<span class="s2">            iframe.setAttribute(&#39;src&#39;, url);</span>
<span class="s2">            popup.setAttribute(&#39;visibility&#39;, &#39;visible&#39;);</span>
<span class="s2">        }</span>

<span class="s2">        function selectPopupElement(element) {</span>
<span class="s2">            var popup = document.getElementById(&#39;dcm-svg-popup&#39;);</span>

<span class="s2">            // Deselect the current element if there is one</span>
<span class="s2">            if (popup.currentElement) {</span>
<span class="s2">                popup.currentElement.classList.remove(&#39;selected&#39;);</span>
<span class="s2">            }</span>

<span class="s2">            // Select the new element</span>
<span class="s2">            if (element) {</span>
<span class="s2">                element.classList.add(&#39;selected&#39;);</span>
<span class="s2">                popup.currentElement = element; // Update the reference to the currently selected element</span>
<span class="s2">            } else {</span>
<span class="s2">                popup.currentElement = null; // Clear the reference if no element is passed</span>
<span class="s2">            }</span>
<span class="s2">        }</span>

<span class="s2">        function closePopup() {</span>
<span class="s2">            var popup = document.getElementById(&#39;dcm-svg-popup&#39;);</span>
<span class="s2">            popup.setAttribute(&#39;visibility&#39;, &#39;hidden&#39;);</span>
<span class="s2">            // Deselect the element when the popup is closed</span>
<span class="s2">            selectPopupElement(null);</span>
<span class="s2">        }</span>
<span class="s2">    &lt;/script&gt;</span>
<span class="s2">    &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">popup_script</span>

    <span class="k">def</span> <span class="nf">get_svg_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">with_java_script</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate the complete SVG markup.</span>

<span class="sd">        Args:</span>
<span class="sd">            with_java_script(bool): if True(default) the javascript code is included otherwise</span>
<span class="sd">            it&#39;s available via the get_java_script function</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: String containing the complete SVG markup.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get current date and time</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">formatted_now</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&lt;!-- generated by dcm https://github.com/WolfgangFahl/dcm at </span><span class="si">{</span><span class="n">formatted_now</span><span class="si">}</span><span class="s2"> --&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s1">&#39;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;width=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="si">}</span><span class="s1">&quot; height=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">total_height</span><span class="si">}</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="p">)</span>
        <span class="n">popup</span> <span class="o">=</span> <span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;!-- Add a foreignObject for the popup --&gt;</span>
<span class="sd">&lt;foreignObject id=&quot;dcm-svg-popup&quot; class=&quot;popup&quot; width=&quot;500&quot; height=&quot;354&quot; x=&quot;150&quot; y=&quot;260&quot; visibility=&quot;hidden&quot;&gt;</span>
<span class="sd">    &lt;body xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span>
<span class="sd">        &lt;!-- Content of your popup goes here --&gt;</span>
<span class="sd">        &lt;div class=&quot;popup&quot; style=&quot;background-color: white; border: 1px solid black; padding: 10px; box-sizing: border-box; width: 500px; height: 354px; position: relative;&quot;&gt;</span>
<span class="sd">            &lt;span onclick=&quot;closePopup()&quot; class=&quot;close-btn&quot;&gt;ⓧ&lt;/span&gt;</span>
<span class="sd">            &lt;iframe id=&quot;popup-iframe&quot; width=&quot;100%&quot; height=&quot;100%&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &lt;/body&gt;</span>
<span class="sd">&lt;/foreignObject&gt;</span>
<span class="sd">&quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">with_popup</span>
            <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">styles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_svg_style</span><span class="p">()</span>
        <span class="n">body</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">)</span>
        <span class="n">footer</span> <span class="o">=</span> <span class="s2">&quot;&lt;/svg&gt;&quot;</span>
        <span class="n">java_script</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_java_script</span><span class="p">()</span> <span class="k">if</span> <span class="n">with_java_script</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="n">svg_markup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">header</span><span class="si">}{</span><span class="n">java_script</span><span class="si">}{</span><span class="n">styles</span><span class="si">}{</span><span class="n">body</span><span class="si">}{</span><span class="n">popup</span><span class="si">}{</span><span class="n">footer</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">svg_markup</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save the SVG markup to a file.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): Filename to save the SVG markup.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_svg_markup</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Initialize SVG object with given configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>config</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGConfig" href="#dcm.svg.SVGConfig">SVGConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration for SVG generation.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">SVGConfig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize SVG object with given configuration.</span>

<span class="sd">    Args:</span>
<span class="sd">        config (SVGConfig): Configuration for SVG generation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span> <span class="k">if</span> <span class="n">config</span> <span class="k">else</span> <span class="n">SVGConfig</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">width</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">height</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">elements</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">indent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">indent</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.add_circle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_circle</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add a circle element to the SVG, optionally making it clickable and with a hover effect.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>config</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGNodeConfig" href="#dcm.svg.SVGNodeConfig">SVGNodeConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration for the circle element.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="nf">add_circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">SVGNodeConfig</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a circle element to the SVG, optionally making it clickable and with a hover effect.</span>

<span class="sd">        Args:</span>
<span class="sd">            config (SVGNodeConfig): Configuration for the circle element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">fill</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">fill</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_color</span>
        <span class="n">circle_element</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;circle cx=&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s1">&quot; cy=&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s1">&quot; r=&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">width</span><span class="si">}</span><span class="s1">&quot; fill=&quot;</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s1">&quot; class=&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">element_class</span><span class="si">}</span><span class="s1">&quot; /&gt;&#39;</span>

        <span class="c1"># If URL is provided, wrap the circle in an anchor tag to make it clickable</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
            <span class="n">circle_indent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">indent_level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">circle_element</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;a xlink:href=&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot; target=&quot;_blank&quot;&gt;</span>
<span class="si">{</span><span class="n">circle_indent</span><span class="si">}{</span><span class="n">circle_element</span><span class="si">}</span>
<span class="s2">&lt;/a&gt;&quot;&quot;&quot;</span>

        <span class="c1"># Use add_group to add the circle element with proper indentation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_group</span><span class="p">(</span>
            <span class="n">circle_element</span><span class="p">,</span>
            <span class="n">group_id</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">group_class</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">element_class</span><span class="p">,</span>
            <span class="n">indent_level</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">indent_level</span><span class="p">,</span>
            <span class="n">comment</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.add_donut_segment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_donut_segment</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">segment</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add a donut segment to the SVG.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>config</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGNodeConfig" href="#dcm.svg.SVGNodeConfig">SVGNodeConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration for the donut segment.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_donut_segment</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">SVGNodeConfig</span><span class="p">,</span>
    <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a donut segment to the SVG.</span>

<span class="sd">    Args:</span>
<span class="sd">        config (SVGNodeConfig): Configuration for the donut segment.</span>
<span class="sd">        segment(DonutSegment)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">fill</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">fill</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_color</span>
    <span class="n">stroke_color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">color</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">color</span> <span class="k">else</span> <span class="s2">&quot;black&quot;</span>

    <span class="n">path_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_donut_path</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>

    <span class="c1"># Assemble the path and title elements</span>
    <span class="n">path_element</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s1">&#39;&lt;path d=&quot;</span><span class="si">{</span><span class="n">path_str</span><span class="si">}</span><span class="s1">&quot; stroke=&quot;</span><span class="si">{</span><span class="n">stroke_color</span><span class="si">}</span><span class="s1">&quot; fill=&quot;</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s1">&quot; /&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">title</span><span class="p">:</span>
        <span class="n">escaped_title</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>  <span class="c1"># Escape special characters</span>

        <span class="n">title_element</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;title&gt;</span><span class="si">{</span><span class="n">escaped_title</span><span class="si">}</span><span class="s2">&lt;/title&gt;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">title_element</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="c1"># Combine path and title into one string without adding indentation here</span>
    <span class="n">group_content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path_element</span><span class="si">}{</span><span class="n">title_element</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="c1"># Check if the segment should be shown as a popup</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">show_as_popup</span><span class="p">:</span>
        <span class="c1"># Add JavaScript to handle popup logic</span>
        <span class="n">onclick_action</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;onclick=</span><span class="se">\&quot;</span><span class="s2">showPopup(&#39;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&#39;, evt,this)</span><span class="se">\&quot;</span><span class="s2">&quot;</span>
        <span class="n">group_content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;g </span><span class="si">{</span><span class="n">onclick_action</span><span class="si">}</span><span class="s2">&gt;</span><span class="si">{</span><span class="n">group_content</span><span class="si">}</span><span class="s2">&lt;/g&gt;&quot;</span>
    <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
        <span class="c1"># Regular link behavior</span>
        <span class="n">group_content</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;&lt;a xlink:href=&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s1">&quot; target=&quot;_blank&quot;&gt;</span><span class="si">{</span><span class="n">group_content</span><span class="si">}</span><span class="s1">&lt;/a&gt;&#39;</span>
        <span class="p">)</span>

    <span class="c1"># Use add_group to add the pie segment with proper indentation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_group</span><span class="p">(</span>
        <span class="n">group_content</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">group_class</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">element_class</span><span class="p">,</span>
        <span class="n">indent_level</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.add_element" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_element</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add an SVG element to the elements list with proper indentation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>element</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SVG element to be added.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>indent_level</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indentation level for the element.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>comment(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional comment to add</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add an SVG element to the elements list with proper indentation.</span>

<span class="sd">    Args:</span>
<span class="sd">        element (str): SVG element to be added.</span>
<span class="sd">        indent_level (int): Indentation level for the element.</span>
<span class="sd">        comment(str): optional comment to add</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">base_indent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
        <span class="n">indented_comment</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_indent</span><span class="si">}</span><span class="s2">&lt;!-- </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s2"> --&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">indented_comment</span><span class="p">)</span>
    <span class="n">indented_element</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_indent</span><span class="si">}{</span><span class="n">element</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">indented_element</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.add_group" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_group</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">group_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">group_class</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add a group of elements to the SVG.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>content</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SVG content to be grouped.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>group_id</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ID for the group.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>group_class</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Class for the group.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>indent_level</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indentation level for the group.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="nf">add_group</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">group_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">group_class</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a group of elements to the SVG.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str): SVG content to be grouped.</span>
<span class="sd">            group_id (str, optional): ID for the group.</span>
<span class="sd">            group_class (str, optional): Class for the group.</span>
<span class="sd">            indent_level (int): Indentation level for the group.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">group_attrs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">group_id</span><span class="p">:</span>
            <span class="n">group_attrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;id=&quot;</span><span class="si">{</span><span class="n">group_id</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">group_class</span><span class="p">:</span>
            <span class="n">group_attrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;class=&quot;</span><span class="si">{</span><span class="n">group_class</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="n">attrs_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">group_attrs</span><span class="p">)</span>
        <span class="n">indented_content</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="si">}{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">group_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;g </span><span class="si">{</span><span class="n">attrs_str</span><span class="si">}</span><span class="s2">&gt;</span>
<span class="si">{</span><span class="n">indented_content</span><span class="si">}</span>
<span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/g&gt;</span>
<span class="s2">&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="n">group_str</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.add_legend_column" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_legend_column</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add a legend column to the SVG.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>items</code></td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Tuple">Tuple</span>[str, str]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of tuples with color code and label.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>title</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Title of the legend.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>x</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>X position of the legend.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>y</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Y position of the legend.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>width</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the color box in the legend.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>height</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of each legend item.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_legend_column</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a legend column to the SVG.</span>

<span class="sd">    Args:</span>
<span class="sd">        items (List[Tuple[str, str]]): List of tuples with color code and label.</span>
<span class="sd">        title (str): Title of the legend.</span>
<span class="sd">        x (int): X position of the legend.</span>
<span class="sd">        y (int): Y position of the legend.</span>
<span class="sd">        width (int): Width of the color box in the legend.</span>
<span class="sd">        height (int): Height of each legend item.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">height</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">font_weight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_rectangle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">index</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">5</span><span class="p">),</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span>
            <span class="n">x</span> <span class="o">+</span> <span class="n">width</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span>
            <span class="n">y</span> <span class="o">+</span> <span class="n">index</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
            <span class="n">label</span><span class="p">,</span>
            <span class="n">center_v</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.add_polygon" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_polygon</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add a polygon to the SVG.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>polygon</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.Polygon" href="#dcm.svg.Polygon">Polygon</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The polygon to add to the SVG.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>indent_level</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indentation level for the element.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">polygon</span><span class="p">:</span> <span class="n">Polygon</span><span class="p">,</span> <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a polygon to the SVG.</span>

<span class="sd">    Args:</span>
<span class="sd">        polygon (Polygon): The polygon to add to the SVG.</span>
<span class="sd">        indent_level (int): Indentation level for the element.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">points_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">polygon</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
    <span class="n">fill_color</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">fill</span> <span class="k">if</span> <span class="n">polygon</span><span class="o">.</span><span class="n">fill</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_color</span>
    <span class="n">opacity</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">opacity</span>
    <span class="n">stroke_color</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">color</span> <span class="k">if</span> <span class="n">polygon</span><span class="o">.</span><span class="n">color</span> <span class="k">else</span> <span class="s2">&quot;black&quot;</span>
    <span class="n">stroke_width</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">stroke_width</span>

    <span class="n">polygon_element</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s1">&#39;&lt;polygon points=&quot;</span><span class="si">{</span><span class="n">points_str</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
        <span class="sa">f</span><span class="s1">&#39;stroke=&quot;</span><span class="si">{</span><span class="n">stroke_color</span><span class="si">}</span><span class="s1">&quot; stroke-width=&quot;</span><span class="si">{</span><span class="n">stroke_width</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
        <span class="sa">f</span><span class="s1">&#39;fill=&quot;</span><span class="si">{</span><span class="n">fill_color</span><span class="si">}</span><span class="s1">&quot; fill-opacity=&quot;</span><span class="si">{</span><span class="n">opacity</span><span class="si">}</span><span class="s1">&quot; /&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="p">)</span>

    <span class="c1"># If a title (tooltip) is provided, create a title element</span>
    <span class="n">title_element</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;&lt;title&gt;</span><span class="si">{</span><span class="n">html</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">title</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/title&gt;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">polygon</span><span class="o">.</span><span class="n">title</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Combine polygon and title into one string without adding indentation here</span>
    <span class="n">group_content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">polygon_element</span><span class="si">}{</span><span class="n">title_element</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="c1"># Use add_group to add the polygon with proper indentation and optional comment</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_group</span><span class="p">(</span>
        <span class="n">group_content</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="n">polygon</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">group_class</span><span class="o">=</span><span class="s2">&quot;hoverable&quot;</span><span class="p">,</span>  <span class="c1"># You might want to adjust this or make it configurable</span>
        <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span><span class="p">,</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">polygon</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.add_rectangle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_rectangle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add a rectangle element to the SVG.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>x</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>X-coordinate of the rectangle's top-left corner.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>y</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Y-coordinate of the rectangle's top-left corner.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>width</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the rectangle.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>height</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the rectangle.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>fill</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Fill color of the rectangle. Defaults to the default color.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>indent_level</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indentation level for the rectangle.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_rectangle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">fill</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a rectangle element to the SVG.</span>

<span class="sd">    Args:</span>
<span class="sd">        x (int): X-coordinate of the rectangle&#39;s top-left corner.</span>
<span class="sd">        y (int): Y-coordinate of the rectangle&#39;s top-left corner.</span>
<span class="sd">        width (int): Width of the rectangle.</span>
<span class="sd">        height (int): Height of the rectangle.</span>
<span class="sd">        fill (str, optional): Fill color of the rectangle. Defaults to the default color.</span>
<span class="sd">        indent_level (int): Indentation level for the rectangle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">fill</span> <span class="k">if</span> <span class="n">fill</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_color</span>
    <span class="n">rect</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;rect x=&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">&quot; y=&quot;</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s1">&quot; width=&quot;</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s1">&quot; height=&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s1">&quot; fill=&quot;</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s1">&quot; /&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.add_text" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">font_weight</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="n">text_anchor</span><span class="o">=</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">center_v</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">text_class</span><span class="o">=</span><span class="s1">&#39;noclick&#39;</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add text to the SVG.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>x</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>X position of the text.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>y</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Y position of the text.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>text(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text content.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>fill</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Fill color of the text. Defaults to "black".</p>
              </div>
            </td>
            <td>
                  <code>&#39;black&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>font_weight</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Font weight (normal, bold, etc.). Defaults to "normal".</p>
              </div>
            </td>
            <td>
                  <code>&#39;normal&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>text_anchor</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Text alignment (start, middle, end). Defaults to "start".</p>
              </div>
            </td>
            <td>
                  <code>&#39;start&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>indent_level(int)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the indentation level to apply</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>center_v</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, y as the vertical center of the text. Default is False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>text_class(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>"noclick" by default so that elements below are clickable</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>transform</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transformation for the text (e.g., rotation). Defaults to an empty string.</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_text</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">fill</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">font_weight</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span>
    <span class="n">text_anchor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;start&quot;</span><span class="p">,</span>
    <span class="n">transform</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">center_v</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">text_class</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;noclick&quot;</span><span class="p">,</span>
    <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add text to the SVG.</span>

<span class="sd">    Args:</span>
<span class="sd">        x (int): X position of the text.</span>
<span class="sd">        y (int): Y position of the text.</span>
<span class="sd">        text(str): Text content.</span>
<span class="sd">        fill (str, optional): Fill color of the text. Defaults to &quot;black&quot;.</span>
<span class="sd">        font_weight (str, optional): Font weight (normal, bold, etc.). Defaults to &quot;normal&quot;.</span>
<span class="sd">        text_anchor (str, optional): Text alignment (start, middle, end). Defaults to &quot;start&quot;.</span>
<span class="sd">        indent_level(int): the indentation level to apply</span>
<span class="sd">        center_v (bool): If True, y as the vertical center of the text. Default is False.</span>
<span class="sd">        text_class(str): &quot;noclick&quot; by default so that elements below are clickable</span>
<span class="sd">        transform (str, optional): Transformation for the text (e.g., rotation). Defaults to an empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">text_obj</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">center_v</span><span class="p">:</span>
        <span class="c1"># y-offset adjustment to center the text vertically</span>
        <span class="n">y</span> <span class="o">-=</span> <span class="n">text_obj</span><span class="o">.</span><span class="n">total_text_height</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="c1"># adjust for the ascender / descender vertical font weighting</span>
        <span class="n">y</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">font_size</span> <span class="o">*</span> <span class="mf">0.5</span>
    <span class="c1"># Create a text element to hold the tspan elements</span>
    <span class="c1"># Only include the transform attribute if it is provided</span>
    <span class="n">transform_attr</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;transform=&quot;</span><span class="si">{</span><span class="n">transform</span><span class="si">}</span><span class="s1">&quot; &#39;</span> <span class="k">if</span> <span class="n">transform</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

    <span class="n">text_element</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="p">)</span><span class="si">}</span><span class="s1">&lt;text class=&quot;</span><span class="si">{</span><span class="n">text_class</span><span class="si">}</span><span class="s1">&quot; x=&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">&quot; y=&quot;</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s1">&quot; fill=&quot;</span><span class="si">{</span><span class="n">fill</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
        <span class="sa">f</span><span class="s1">&#39;font-family=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">font</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
        <span class="sa">f</span><span class="s1">&#39;font-size=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">font_size</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
        <span class="sa">f</span><span class="s1">&#39;font-weight=&quot;</span><span class="si">{</span><span class="n">font_weight</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
        <span class="sa">f</span><span class="s1">&#39;text-anchor=&quot;</span><span class="si">{</span><span class="n">text_anchor</span><span class="si">}</span><span class="s1">&quot; &#39;</span>
        <span class="sa">f</span><span class="s1">&#39;dominant-baseline=&quot;middle&quot; &#39;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">transform_attr</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
    <span class="p">)</span>
    <span class="c1"># Add tspan elements for each line</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">text_obj</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
        <span class="n">escaped_line</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">text_element</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="si">}</span><span class="s1">&lt;tspan x=&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">&quot; dy=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">line_height</span><span class="si">}</span><span class="s1">&quot;&gt;</span><span class="si">{</span><span class="n">escaped_line</span><span class="si">}</span><span class="s1">&lt;/tspan&gt;&#39;</span>

    <span class="n">text_element</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_indent</span><span class="p">(</span><span class="n">indent_level</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/text&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="n">text_element</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.add_text_to_donut_segment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_text_to_donut_segment</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">text_class</span><span class="o">=</span><span class="s1">&#39;noclick&#39;</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Add text to a donut segment with various direction options.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>segment</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The donut segment to which text will be added.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>text</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The text content to be added.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>direction</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The direction in which the text should be drawn.
             Options are "horizontal", "angled", or "curved".</p>
              </div>
            </td>
            <td>
                  <code>&#39;horizontal&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>color</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The color of the text. Default is "white".</p>
              </div>
            </td>
            <td>
                  <code>&#39;white&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_text_to_donut_segment</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
    <span class="n">color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">text_class</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;noclick&quot;</span><span class="p">,</span>
    <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add text to a donut segment with various direction options.</span>

<span class="sd">    Args:</span>
<span class="sd">        segment (DonutSegment): The donut segment to which text will be added.</span>
<span class="sd">        text (str): The text content to be added.</span>
<span class="sd">        direction (str): The direction in which the text should be drawn.</span>
<span class="sd">                         Options are &quot;horizontal&quot;, &quot;angled&quot;, or &quot;curved&quot;.</span>
<span class="sd">        color (str): The color of the text. Default is &quot;white&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;horizontal&quot;</span><span class="p">,</span> <span class="s2">&quot;angled&quot;</span><span class="p">]:</span>
        <span class="c1"># Calculate position for horizontal or angled text</span>
        <span class="c1"># Use the get_arc method to find the position for horizontal or angled text</span>
        <span class="n">mid_arc</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">get_arc</span><span class="p">(</span><span class="n">radial_offset</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Get the mid-arc</span>
        <span class="n">text_x</span><span class="p">,</span> <span class="n">text_y</span> <span class="o">=</span> <span class="n">mid_arc</span><span class="o">.</span><span class="n">middle_x</span><span class="p">,</span> <span class="n">mid_arc</span><span class="o">.</span><span class="n">middle_y</span>

        <span class="c1"># Adjust text anchor and rotation for better readability</span>
        <span class="n">transform</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;angled&quot;</span><span class="p">:</span>
            <span class="n">mid_angle</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">relative_angle</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">rotation_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text_rotation</span><span class="p">(</span><span class="n">mid_angle</span><span class="p">)</span>
            <span class="n">transform</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;rotate(</span><span class="si">{</span><span class="n">rotation_angle</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">text_x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">text_y</span><span class="si">}</span><span class="s2">)&quot;</span>

        <span class="c1"># Add text using the add_text method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">text_x</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">text_y</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
            <span class="n">fill</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
            <span class="n">font_weight</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span>
            <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span><span class="p">,</span>
            <span class="n">transform</span><span class="o">=</span><span class="n">transform</span><span class="p">,</span>
            <span class="n">text_anchor</span><span class="o">=</span><span class="s2">&quot;middle&quot;</span><span class="p">,</span>
            <span class="n">center_v</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;curved&quot;</span><span class="p">:</span>
        <span class="n">text_obj</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">text_obj</span><span class="o">.</span><span class="n">lines</span><span class="p">):</span>
            <span class="n">radial_offset</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">text_obj</span><span class="o">.</span><span class="n">line_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="c1"># Create a path for the text to follow</span>
            <span class="n">path_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;path</span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">start_angle</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">end_angle</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">path_d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_donut_path</span><span class="p">(</span>
                <span class="n">segment</span><span class="p">,</span> <span class="n">middle_arc</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">radial_offset</span><span class="o">=</span><span class="n">radial_offset</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;&lt;path id=&quot;</span><span class="si">{</span><span class="n">path_id</span><span class="si">}</span><span class="s1">&quot; d=&quot;</span><span class="si">{</span><span class="n">path_d</span><span class="si">}</span><span class="s1">&quot; fill=&quot;none&quot; stroke=&quot;none&quot; /&gt;&#39;</span>
            <span class="p">)</span>

            <span class="n">text_tag</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;text class=&quot;</span><span class="si">{</span><span class="n">text_class</span><span class="si">}</span><span class="s2">&quot; fill=&quot;</span><span class="si">{</span><span class="n">color</span><span class="si">}</span><span class="s2">&quot; font-family=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">font</span><span class="si">}</span><span class="s2">&quot; font-size=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">font_size</span><span class="si">}</span><span class="s2">&quot;&gt;&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="n">text_tag</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span><span class="p">)</span>
            <span class="n">text_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;textPath  xlink:href=&quot;#</span><span class="si">{</span><span class="n">path_id</span><span class="si">}</span><span class="s2">&quot; startOffset=&quot;50%&quot; dominant-baseline=&quot;middle&quot; text-anchor=&quot;middle&quot;&gt;</span><span class="si">{</span><span class="n">html</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="si">}</span><span class="s2">&lt;/textPath&gt;&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="n">text_path</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_element</span><span class="p">(</span><span class="s2">&quot;&lt;/text&gt;&quot;</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="n">indent_level</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid direction </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.get_donut_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_donut_path</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">radial_offset</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">middle_arc</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Create an SVG path definition for an arc using the properties of a DonutSegment.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>segment</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.DonutSegment" href="#dcm.svg.DonutSegment">DonutSegment</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The segment for which to create the path.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>radial_offset(float)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>0 to 1 - useable in middle_arc mode</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>middle_arc(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True get the middle arc</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SVG path definition string for the full donut segment or the middle_arc if middle_arc is set to true.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_donut_path</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">segment</span><span class="p">:</span> <span class="n">DonutSegment</span><span class="p">,</span>
    <span class="n">radial_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">middle_arc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an SVG path definition for an arc using the properties of a DonutSegment.</span>

<span class="sd">    Args:</span>
<span class="sd">        segment (DonutSegment): The segment for which to create the path.</span>
<span class="sd">        radial_offset(float): 0 to 1 - useable in middle_arc mode</span>
<span class="sd">        middle_arc(bool): if True get the middle arc</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: SVG path definition string for the full donut segment or the middle_arc if middle_arc is set to true.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">middle_arc</span><span class="p">:</span>
        <span class="n">arc</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">get_arc</span><span class="p">(</span><span class="n">radial_offset</span><span class="o">=</span><span class="n">radial_offset</span><span class="p">)</span>

        <span class="c1"># Create the path for the middle arc</span>
        <span class="n">path_str</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;M </span><span class="si">{</span><span class="n">arc</span><span class="o">.</span><span class="n">start_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">arc</span><span class="o">.</span><span class="n">start_y</span><span class="si">}</span><span class="s2"> &quot;</span>  <span class="c1"># Move to start of middle arc</span>
            <span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="n">arc</span><span class="o">.</span><span class="n">radius</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">arc</span><span class="o">.</span><span class="n">radius</span><span class="si">}</span><span class="s2"> 0 </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">large_arc_flag</span><span class="si">}</span><span class="s2"> 1 </span><span class="si">{</span><span class="n">arc</span><span class="o">.</span><span class="n">end_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">arc</span><span class="o">.</span><span class="n">end_y</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">outer_arc</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">get_arc</span><span class="p">(</span><span class="n">radial_offset</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">inner_arc</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">get_arc</span><span class="p">(</span><span class="n">radial_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">path_str</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;M </span><span class="si">{</span><span class="n">inner_arc</span><span class="o">.</span><span class="n">start_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">inner_arc</span><span class="o">.</span><span class="n">start_y</span><span class="si">}</span><span class="s2"> &quot;</span>  <span class="c1"># Move to start of inner arc</span>
            <span class="sa">f</span><span class="s2">&quot;L </span><span class="si">{</span><span class="n">outer_arc</span><span class="o">.</span><span class="n">start_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">outer_arc</span><span class="o">.</span><span class="n">start_y</span><span class="si">}</span><span class="s2"> &quot;</span>  <span class="c1"># Line to start of outer arc</span>
            <span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">outer_radius</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">outer_radius</span><span class="si">}</span><span class="s2"> 0 </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">large_arc_flag</span><span class="si">}</span><span class="s2"> 1 </span><span class="si">{</span><span class="n">outer_arc</span><span class="o">.</span><span class="n">end_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">outer_arc</span><span class="o">.</span><span class="n">end_y</span><span class="si">}</span><span class="s2"> &quot;</span>  <span class="c1"># Outer arc</span>
            <span class="sa">f</span><span class="s2">&quot;L </span><span class="si">{</span><span class="n">inner_arc</span><span class="o">.</span><span class="n">end_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">inner_arc</span><span class="o">.</span><span class="n">end_y</span><span class="si">}</span><span class="s2"> &quot;</span>  <span class="c1"># Line to end of inner arc</span>
            <span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">inner_radius</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">inner_radius</span><span class="si">}</span><span class="s2"> 0 </span><span class="si">{</span><span class="n">segment</span><span class="o">.</span><span class="n">large_arc_flag</span><span class="si">}</span><span class="s2"> 0 </span><span class="si">{</span><span class="n">inner_arc</span><span class="o">.</span><span class="n">start_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">inner_arc</span><span class="o">.</span><span class="n">start_y</span><span class="si">}</span><span class="s2"> &quot;</span>  <span class="c1"># Inner arc (reverse)</span>
            <span class="s2">&quot;Z&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">path_str</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.get_indent" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_indent</span><span class="p">(</span><span class="n">level</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the indentation for the given level</p>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_indent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the indentation for the given level</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">indentation</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">level</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">indentation</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.get_java_script" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_java_script</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the java script code for interactive behavior</p>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_java_script</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the java script code for interactive behavior</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">popup_script</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;script&gt;</span>
<span class="s2">     function showPopup(url, evt,element) {</span>
<span class="s2">        // show a Popup fetching html content from the given url</span>
<span class="s2">        // for the given element</span>
<span class="s2">        // Handle the selection of the popup element</span>
<span class="s2">        selectPopupElement(element);</span>
<span class="s2">        var popup = document.getElementById(&#39;dcm-svg-popup&#39;);</span>
<span class="s2">        var iframe = document.getElementById(&#39;popup-iframe&#39;);</span>
<span class="s2">        var svgRect = evt.target.getBoundingClientRect();</span>
<span class="s2">        var svg = document.querySelector(&#39;svg&#39;);</span>
<span class="s2">        var svgPoint = svg.createSVGPoint();</span>
<span class="s2">        svgPoint.x = evt.clientX - svgRect.left;</span>
<span class="s2">        svgPoint.y = evt.clientY - svgRect.top;</span>

<span class="s2">        // Position the popup near the click event</span>
<span class="s2">        popup.setAttribute(&#39;x&#39;, svgPoint.x);</span>
<span class="s2">        popup.setAttribute(&#39;y&#39;, svgPoint.y);</span>
<span class="s2">        // Set the iframe src and make the popup visible</span>
<span class="s2">        iframe.setAttribute(&#39;src&#39;, url);</span>
<span class="s2">        popup.setAttribute(&#39;visibility&#39;, &#39;visible&#39;);</span>
<span class="s2">    }</span>

<span class="s2">    function selectPopupElement(element) {</span>
<span class="s2">        var popup = document.getElementById(&#39;dcm-svg-popup&#39;);</span>

<span class="s2">        // Deselect the current element if there is one</span>
<span class="s2">        if (popup.currentElement) {</span>
<span class="s2">            popup.currentElement.classList.remove(&#39;selected&#39;);</span>
<span class="s2">        }</span>

<span class="s2">        // Select the new element</span>
<span class="s2">        if (element) {</span>
<span class="s2">            element.classList.add(&#39;selected&#39;);</span>
<span class="s2">            popup.currentElement = element; // Update the reference to the currently selected element</span>
<span class="s2">        } else {</span>
<span class="s2">            popup.currentElement = null; // Clear the reference if no element is passed</span>
<span class="s2">        }</span>
<span class="s2">    }</span>

<span class="s2">    function closePopup() {</span>
<span class="s2">        var popup = document.getElementById(&#39;dcm-svg-popup&#39;);</span>
<span class="s2">        popup.setAttribute(&#39;visibility&#39;, &#39;hidden&#39;);</span>
<span class="s2">        // Deselect the element when the popup is closed</span>
<span class="s2">        selectPopupElement(null);</span>
<span class="s2">    }</span>
<span class="s2">&lt;/script&gt;</span>
<span class="s2">&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">popup_script</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.get_svg_markup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_svg_markup</span><span class="p">(</span><span class="n">with_java_script</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Generate the complete SVG markup.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>with_java_script(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True(default) the javascript code is included otherwise</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>String containing the complete SVG markup.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="nf">get_svg_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">with_java_script</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate the complete SVG markup.</span>

<span class="sd">        Args:</span>
<span class="sd">            with_java_script(bool): if True(default) the javascript code is included otherwise</span>
<span class="sd">            it&#39;s available via the get_java_script function</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: String containing the complete SVG markup.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get current date and time</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">formatted_now</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&lt;!-- generated by dcm https://github.com/WolfgangFahl/dcm at </span><span class="si">{</span><span class="n">formatted_now</span><span class="si">}</span><span class="s2"> --&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s1">&#39;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;width=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="si">}</span><span class="s1">&quot; height=&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">total_height</span><span class="si">}</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="p">)</span>
        <span class="n">popup</span> <span class="o">=</span> <span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;!-- Add a foreignObject for the popup --&gt;</span>
<span class="sd">&lt;foreignObject id=&quot;dcm-svg-popup&quot; class=&quot;popup&quot; width=&quot;500&quot; height=&quot;354&quot; x=&quot;150&quot; y=&quot;260&quot; visibility=&quot;hidden&quot;&gt;</span>
<span class="sd">    &lt;body xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span>
<span class="sd">        &lt;!-- Content of your popup goes here --&gt;</span>
<span class="sd">        &lt;div class=&quot;popup&quot; style=&quot;background-color: white; border: 1px solid black; padding: 10px; box-sizing: border-box; width: 500px; height: 354px; position: relative;&quot;&gt;</span>
<span class="sd">            &lt;span onclick=&quot;closePopup()&quot; class=&quot;close-btn&quot;&gt;ⓧ&lt;/span&gt;</span>
<span class="sd">            &lt;iframe id=&quot;popup-iframe&quot; width=&quot;100%&quot; height=&quot;100%&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;</span>
<span class="sd">        &lt;/div&gt;</span>
<span class="sd">    &lt;/body&gt;</span>
<span class="sd">&lt;/foreignObject&gt;</span>
<span class="sd">&quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">with_popup</span>
            <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">styles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_svg_style</span><span class="p">()</span>
        <span class="n">body</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">)</span>
        <span class="n">footer</span> <span class="o">=</span> <span class="s2">&quot;&lt;/svg&gt;&quot;</span>
        <span class="n">java_script</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_java_script</span><span class="p">()</span> <span class="k">if</span> <span class="n">with_java_script</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="n">svg_markup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">header</span><span class="si">}{</span><span class="n">java_script</span><span class="si">}{</span><span class="n">styles</span><span class="si">}{</span><span class="n">body</span><span class="si">}{</span><span class="n">popup</span><span class="si">}{</span><span class="n">footer</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">svg_markup</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.get_svg_style" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_svg_style</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Define styles for SVG elements.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>String containing style definitions for SVG.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_svg_style</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Define styles for SVG elements.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: String containing style definitions for SVG.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">style</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="si">}</span><span class="s2">&lt;style&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">.hoverable </span><span class="se">{{</span><span class="s2"> cursor: pointer; fill-opacity: 1; stroke: black; stroke-width: 0.5; </span><span class="se">}}\n</span><span class="s2">&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">.hoverable:hover </span><span class="se">{{</span><span class="s2"> fill-opacity: 0.7; </span><span class="se">}}\n</span><span class="s2">&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">.selected </span><span class="se">{{</span><span class="s2"> fill-opacity: 0.5; stroke: blue !important; stroke-width: 1.5;</span><span class="se">}}\n</span><span class="s2">&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">.noclick </span><span class="se">{{</span><span class="s2"> pointer-events: none; </span><span class="se">}}\n</span><span class="s2">&quot;</span>  <span class="c1"># style for non-clickable text</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">with_popup</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">+=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">.popup </span><span class="se">{{\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">border: 2px solid black;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">border-radius: 15px;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">overflow: auto;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># changed to &#39;auto&#39; to allow scrolling only if needed</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">background: white;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">box-sizing: border-box;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># ensures padding and border are included</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">padding: 10px;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># optional padding inside the popup</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">height: 100%;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># adjusts height relative to foreignObject</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">width: 100%;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># adjusts width relative to foreignObject</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="se">}}\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">.close-btn </span><span class="se">{{\n</span><span class="s2">&quot;</span>  <span class="c1"># style for the close button</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">cursor: pointer;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">position: absolute;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">top: 0;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">right: 0;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">padding: 5px;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">font-size: 20px;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">user-select: none;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># prevents text selection on click</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="se">}}\n</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">style</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="si">}</span><span class="s2">&lt;/style&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">style</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.get_text_rotation" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_text_rotation</span><span class="p">(</span><span class="n">rotation_angle</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Adjusts the rotation angle for SVG text elements to ensure that the text
is upright and readable in a circular chart. The text will be rotated
by 180 degrees if it is in the lower half of the chart (between 90 and 270 degrees).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>rotation_angle</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The initial rotation angle of the text element.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The adjusted rotation angle for the text element.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_text_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation_angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adjusts the rotation angle for SVG text elements to ensure that the text</span>
<span class="sd">    is upright and readable in a circular chart. The text will be rotated</span>
<span class="sd">    by 180 degrees if it is in the lower half of the chart (between 90 and 270 degrees).</span>

<span class="sd">    Args:</span>
<span class="sd">        rotation_angle (float): The initial rotation angle of the text element.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The adjusted rotation angle for the text element.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># In the bottom half of the chart (90 to 270 degrees), the text</span>
    <span class="c1"># would appear upside down, so we rotate it by 180 degrees.</span>
    <span class="k">if</span> <span class="mi">90</span> <span class="o">&lt;=</span> <span class="n">rotation_angle</span> <span class="o">&lt;</span> <span class="mi">270</span><span class="p">:</span>
        <span class="n">rotation_angle</span> <span class="o">-=</span> <span class="mi">180</span>

    <span class="c1"># Return the adjusted angle. No adjustment is needed for the</span>
    <span class="c1"># top half of the chart as the text is already upright.</span>
    <span class="k">return</span> <span class="n">rotation_angle</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.get_text_width" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_text_width</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Estimate the width of a text string in the SVG based on the font size and font name.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>text</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The text content.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The estimated width of the text in pixels.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_text_width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Estimate the width of a text string in the SVG based on the font size and font name.</span>

<span class="sd">    Args:</span>
<span class="sd">        text (str): The text content.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The estimated width of the text in pixels.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">average_char_width_factor</span> <span class="o">=</span> <span class="mf">0.6</span>
    <span class="n">average_char_width</span> <span class="o">=</span> <span class="n">average_char_width_factor</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">font_size</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">average_char_width</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="dcm.svg.SVG.save" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Save the SVG markup to a file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>filename</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Filename to save the SVG markup.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save the SVG markup to a file.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): Filename to save the SVG markup.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_svg_markup</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.svg.SVGConfig" class="doc doc-heading">
            <code>SVGConfig</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


      <p>Configuration class for SVG generation.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="dcm.svg.SVGConfig.width">width</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Width of the SVG canvas in pixels.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.svg.SVGConfig.height">height</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the SVG canvas in pixels.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.svg.SVGConfig.legend_height">legend_height</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height reserved for the legend in pixels.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.svg.SVGConfig.font">font</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Font family for text elements.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.svg.SVGConfig.font_size">font_size</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Font size in points for text elements.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.svg.SVGConfig.indent">indent</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indentation string, default is two spaces.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.svg.SVGConfig.default_color">default_color</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Default color code for SVG elements.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.svg.SVGConfig.with_pop(bool)">with_pop(bool)</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True support popup javascript functionality</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>dcm/svg.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">SVGConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configuration class for SVG generation.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        width (int): Width of the SVG canvas in pixels.</span>
<span class="sd">        height (int): Height of the SVG canvas in pixels.</span>
<span class="sd">        legend_height (int): Height reserved for the legend in pixels.</span>
<span class="sd">        font (str): Font family for text elements.</span>
<span class="sd">        font_size (int): Font size in points for text elements.</span>
<span class="sd">        indent (str): Indentation string, default is two spaces.</span>
<span class="sd">        default_color (str): Default color code for SVG elements.</span>
<span class="sd">        with_pop(bool): if True support popup javascript functionality</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">600</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">600</span>
    <span class="n">legend_height</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">150</span>
    <span class="n">font</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Arial&quot;</span>
    <span class="n">font_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">indent</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;  &quot;</span>
    <span class="n">default_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#C0C0C0&quot;</span>
    <span class="n">with_popup</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">total_height</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate total height of the SVG canvas including the legend.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: Total height of the SVG canvas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_height</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">line_height</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="c1"># Calculate line height based on font size</span>
        <span class="c1"># You can adjust this multiplier as needed</span>
        <span class="n">line_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">font_size</span> <span class="o">*</span> <span class="mf">1.2</span>
        <span class="k">return</span> <span class="n">line_height</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="dcm.svg.SVGConfig.total_height" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">total_height</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Calculate total height of the SVG canvas including the legend.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Total height of the SVG canvas.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.svg.SVGNode" class="doc doc-heading">
            <code>SVGNode</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


      <p>a generic SVG Node</p>

              <details class="quote">
                <summary>Source code in <code>dcm/svg.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">SVGNode</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a generic SVG Node</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="kc">None</span>  <span class="c1"># Color of font or stroke use default color of config if None</span>
    <span class="p">)</span>
    <span class="n">stroke_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># Stroke width of the polygon lines</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span>  <span class="c1"># Opacity of fill e.g. for polygons</span>
    <span class="n">fill</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span>  <span class="c1"># Fill color for the segment</span>
    <span class="n">title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Tooltip</span>
    <span class="n">comment</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.svg.SVGNodeConfig" class="doc doc-heading">
            <code>SVGNodeConfig</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGNode" href="#dcm.svg.SVGNode">SVGNode</a></code></p>


      <p>a single SVG Node configuration
to display any element</p>

              <details class="quote">
                <summary>Source code in <code>dcm/svg.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">SVGNodeConfig</span><span class="p">(</span><span class="n">SVGNode</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a single SVG Node configuration</span>
<span class="sd">    to display any element</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">x</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">element_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">show_as_popup</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Flag to indicate if the link should opened as a popup</span>
    <span class="n">element_class</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;hoverable&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="dcm.svg.Text" class="doc doc-heading">
            <code>Text</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


      <p>Class to handle text-related operations in SVG.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="dcm.svg.Text.text">text</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The text content.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="dcm.svg.Text.config">config</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="dcm.svg.SVGConfig" href="#dcm.svg.SVGConfig">SVGConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration for SVG generation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>dcm/svg.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Text</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to handle text-related operations in SVG.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        text (str): The text content.</span>
<span class="sd">        config (SVGConfig): Configuration for SVG generation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">SVGConfig</span>
    <span class="n">lines</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Post-initialization processing to split the text into lines.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">line_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">total_text_height</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the total height of the text based on the number of lines and the line height.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The total height of the text in pixels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">line_height</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">height</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="dcm.svg.Text.total_text_height" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">total_text_height</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Calculate the total height of the text based on the number of lines and the line height.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The total height of the text in pixels.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="dcm.svg.Text.__post_init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__post_init__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Post-initialization processing to split the text into lines.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/svg.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Post-initialization processing to split the text into lines.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="dcm.version" class="doc doc-heading">
            <code>version</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2023-11-06</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="dcm.version.Version" class="doc doc-heading">
            <code>Version</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


      <p>Version handling for nicepdf</p>

              <details class="quote">
                <summary>Source code in <code>dcm/version.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Version</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Version handling for nicepdf</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;dcm&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">dcm</span><span class="o">.</span><span class="n">__version__</span>
    <span class="n">date</span> <span class="o">=</span> <span class="s2">&quot;2023-11-06&quot;</span>
    <span class="n">updated</span> <span class="o">=</span> <span class="s2">&quot;2024-02-27&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;python based visualization of dynamic competence maps&quot;</span>

    <span class="n">authors</span> <span class="o">=</span> <span class="s2">&quot;Wolfgang Fahl&quot;</span>

    <span class="n">doc_url</span> <span class="o">=</span> <span class="s2">&quot;https://wiki.bitplan.com/index.php/dcm&quot;</span>
    <span class="n">chat_url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/WolfgangFahl/dcm/discussions&quot;</span>
    <span class="n">cm_url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/WolfgangFahl/dcm&quot;</span>

    <span class="n">license</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;Copyright 2023 contributors. All rights reserved.</span>

<span class="s2">  Licensed under the Apache License 2.0</span>
<span class="s2">  http://www.apache.org/licenses/LICENSE-2.0</span>

<span class="s2">  Distributed on an &quot;AS IS&quot; basis without warranties</span>
<span class="s2">  or conditions of any kind, either express or implied.&quot;&quot;&quot;</span>

    <span class="n">longDescription</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span>
<span class="si">{</span><span class="n">description</span><span class="si">}</span>

<span class="s2">  Created by </span><span class="si">{</span><span class="n">authors</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">date</span><span class="si">}</span><span class="s2"> last updated </span><span class="si">{</span><span class="n">updated</span><span class="si">}</span><span class="s2">&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="dcm.xapi" class="doc doc-heading">
            <code>xapi</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2024-01-24</p>
<p>Experience API xAPI support module
@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="dcm.xapi.XAPI" class="doc doc-heading">
            <code>XAPI</code>


</h3>


    <div class="doc doc-contents ">


      <p>Experience API xAPI support class</p>

              <details class="quote">
                <summary>Source code in <code>dcm/xapi.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">XAPI</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Experience API xAPI support class</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xapi_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">warn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">to_learner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">competence_tree</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Learner</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert xapi_dict to a Learner with Achievements.</span>
<span class="sd">        Args:</span>
<span class="sd">            competence_tree (CompetenceTree): The competence tree to align the achievements with.</span>
<span class="sd">        Returns:</span>
<span class="sd">            Learner: A learner object with achievements mapped from xapi_dict.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Assuming each entry in xapi_dict is an xAPI statement relevant to a learning activity</span>
        <span class="n">achievements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">actor_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">learner</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xapi_dict</span><span class="p">:</span>
            <span class="n">stmt</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;statement&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">stmt</span><span class="p">:</span>
                <span class="n">actor</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;actor&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">actor</span><span class="p">:</span>
                    <span class="c1"># Extract necessary information from the xAPI statement</span>
                    <span class="n">new_actor_id</span> <span class="o">=</span> <span class="n">actor</span><span class="p">[</span><span class="s2">&quot;account&quot;</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">actor_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">actor_id</span> <span class="o">=</span> <span class="n">new_actor_id</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">new_actor_id</span> <span class="o">!=</span> <span class="n">actor_id</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid actor_id </span><span class="si">{</span><span class="n">new_actor_id</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">actor_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">competence_path</span> <span class="o">=</span> <span class="n">stmt</span><span class="p">[</span><span class="s2">&quot;context&quot;</span><span class="p">][</span><span class="s2">&quot;extensions&quot;</span><span class="p">][</span>
                    <span class="s2">&quot;learningObjectMetadata&quot;</span>
                <span class="p">][</span><span class="s2">&quot;competencePath&quot;</span><span class="p">]</span>
                <span class="n">score_scaled</span> <span class="o">=</span> <span class="n">stmt</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">][</span><span class="s2">&quot;score&quot;</span><span class="p">][</span><span class="s2">&quot;scaled&quot;</span><span class="p">]</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="n">stmt</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span>

                <span class="c1"># Create an Achievement instance</span>
                <span class="n">achievement</span> <span class="o">=</span> <span class="n">Achievement</span><span class="p">(</span>
                    <span class="n">path</span><span class="o">=</span><span class="n">competence_path</span><span class="p">,</span>
                    <span class="n">level</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span>
                        <span class="n">score_scaled</span> <span class="o">*</span> <span class="n">competence_tree</span><span class="o">.</span><span class="n">total_valid_levels</span>
                    <span class="p">),</span>  <span class="c1"># Convert scaled score to level</span>
                    <span class="n">score</span><span class="o">=</span><span class="n">stmt</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">][</span><span class="s2">&quot;score&quot;</span><span class="p">][</span><span class="s2">&quot;raw&quot;</span><span class="p">],</span>
                    <span class="n">date_assessed_iso</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">achievements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">achievement</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">actor_id</span><span class="p">:</span>
            <span class="c1"># Create a Learner instance with these achievements</span>
            <span class="n">learner</span> <span class="o">=</span> <span class="n">Learner</span><span class="p">(</span><span class="n">learner_id</span><span class="o">=</span><span class="n">actor_id</span><span class="p">,</span> <span class="n">achievements</span><span class="o">=</span><span class="n">achievements</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;no learner / actor defined&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">learner</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">json_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">xapi</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="c1"># Open and read the JSON file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">json_file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="n">xapi</span><span class="o">.</span><span class="n">xapi_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xapi</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="dcm.xapi.XAPI.to_learner" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_learner</span><span class="p">(</span><span class="n">competence_tree</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Convert xapi_dict to a Learner with Achievements.
Args:
    competence_tree (CompetenceTree): The competence tree to align the achievements with.
Returns:
    Learner: A learner object with achievements mapped from xapi_dict.</p>

            <details class="quote">
              <summary>Source code in <code>dcm/xapi.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_learner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">competence_tree</span><span class="p">:</span> <span class="n">CompetenceTree</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Learner</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert xapi_dict to a Learner with Achievements.</span>
<span class="sd">    Args:</span>
<span class="sd">        competence_tree (CompetenceTree): The competence tree to align the achievements with.</span>
<span class="sd">    Returns:</span>
<span class="sd">        Learner: A learner object with achievements mapped from xapi_dict.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Assuming each entry in xapi_dict is an xAPI statement relevant to a learning activity</span>
    <span class="n">achievements</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">actor_id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">learner</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xapi_dict</span><span class="p">:</span>
        <span class="n">stmt</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;statement&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">stmt</span><span class="p">:</span>
            <span class="n">actor</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;actor&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">actor</span><span class="p">:</span>
                <span class="c1"># Extract necessary information from the xAPI statement</span>
                <span class="n">new_actor_id</span> <span class="o">=</span> <span class="n">actor</span><span class="p">[</span><span class="s2">&quot;account&quot;</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">actor_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">actor_id</span> <span class="o">=</span> <span class="n">new_actor_id</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">new_actor_id</span> <span class="o">!=</span> <span class="n">actor_id</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid actor_id </span><span class="si">{</span><span class="n">new_actor_id</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">actor_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">competence_path</span> <span class="o">=</span> <span class="n">stmt</span><span class="p">[</span><span class="s2">&quot;context&quot;</span><span class="p">][</span><span class="s2">&quot;extensions&quot;</span><span class="p">][</span>
                <span class="s2">&quot;learningObjectMetadata&quot;</span>
            <span class="p">][</span><span class="s2">&quot;competencePath&quot;</span><span class="p">]</span>
            <span class="n">score_scaled</span> <span class="o">=</span> <span class="n">stmt</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">][</span><span class="s2">&quot;score&quot;</span><span class="p">][</span><span class="s2">&quot;scaled&quot;</span><span class="p">]</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">stmt</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span>

            <span class="c1"># Create an Achievement instance</span>
            <span class="n">achievement</span> <span class="o">=</span> <span class="n">Achievement</span><span class="p">(</span>
                <span class="n">path</span><span class="o">=</span><span class="n">competence_path</span><span class="p">,</span>
                <span class="n">level</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span>
                    <span class="n">score_scaled</span> <span class="o">*</span> <span class="n">competence_tree</span><span class="o">.</span><span class="n">total_valid_levels</span>
                <span class="p">),</span>  <span class="c1"># Convert scaled score to level</span>
                <span class="n">score</span><span class="o">=</span><span class="n">stmt</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">][</span><span class="s2">&quot;score&quot;</span><span class="p">][</span><span class="s2">&quot;raw&quot;</span><span class="p">],</span>
                <span class="n">date_assessed_iso</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">achievements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">achievement</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">actor_id</span><span class="p">:</span>
        <span class="c1"># Create a Learner instance with these achievements</span>
        <span class="n">learner</span> <span class="o">=</span> <span class="n">Learner</span><span class="p">(</span><span class="n">learner_id</span><span class="o">=</span><span class="n">actor_id</span><span class="p">,</span> <span class="n">achievements</span><span class="o">=</span><span class="n">achievements</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;no learner / actor defined&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">learner</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>